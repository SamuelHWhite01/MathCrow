var VA=Object.defineProperty;var xA=(r,t,n)=>t in r?VA(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var Ve=(r,t,n)=>xA(r,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ud={exports:{}},al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function UA(){if(i_)return al;i_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return al.Fragment=t,al.jsx=n,al.jsxs=n,al}var r_;function LA(){return r_||(r_=1,ud.exports=UA()),ud.exports}var ct=LA(),cd={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function kA(){if(s_)return Rt;s_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.iterator;function D(I){return I===null||typeof I!="object"?null:(I=C&&I[C]||I["@@iterator"],typeof I=="function"?I:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,tt={};function Q(I,$,rt){this.props=I,this.context=$,this.refs=tt,this.updater=rt||j}Q.prototype.isReactComponent={},Q.prototype.setState=function(I,$){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,$,"setState")},Q.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function st(){}st.prototype=Q.prototype;function ot(I,$,rt){this.props=I,this.context=$,this.refs=tt,this.updater=rt||j}var J=ot.prototype=new st;J.constructor=ot,F(J,Q.prototype),J.isPureReactComponent=!0;var ut=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},ht=Object.prototype.hasOwnProperty;function O(I,$,rt,et,mt,Ct){return rt=Ct.ref,{$$typeof:r,type:I,key:$,ref:rt!==void 0?rt:null,props:Ct}}function S(I,$){return O(I.type,$,void 0,void 0,void 0,I.props)}function w(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function M(I){var $={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(rt){return $[rt]})}var V=/\/+/g;function x(I,$){return typeof I=="object"&&I!==null&&I.key!=null?M(""+I.key):$.toString(36)}function R(){}function re(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(R,R):(I.status="pending",I.then(function($){I.status==="pending"&&(I.status="fulfilled",I.value=$)},function($){I.status==="pending"&&(I.status="rejected",I.reason=$)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function ee(I,$,rt,et,mt){var Ct=typeof I;(Ct==="undefined"||Ct==="boolean")&&(I=null);var _t=!1;if(I===null)_t=!0;else switch(Ct){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(I.$$typeof){case r:case t:_t=!0;break;case E:return _t=I._init,ee(_t(I._payload),$,rt,et,mt)}}if(_t)return mt=mt(I),_t=et===""?"."+x(I,0):et,ut(mt)?(rt="",_t!=null&&(rt=_t.replace(V,"$&/")+"/"),ee(mt,$,rt,"",function(He){return He})):mt!=null&&(w(mt)&&(mt=S(mt,rt+(mt.key==null||I&&I.key===mt.key?"":(""+mt.key).replace(V,"$&/")+"/")+_t)),$.push(mt)),1;_t=0;var Ot=et===""?".":et+":";if(ut(I))for(var Ut=0;Ut<I.length;Ut++)et=I[Ut],Ct=Ot+x(et,Ut),_t+=ee(et,$,rt,Ct,mt);else if(Ut=D(I),typeof Ut=="function")for(I=Ut.call(I),Ut=0;!(et=I.next()).done;)et=et.value,Ct=Ot+x(et,Ut++),_t+=ee(et,$,rt,Ct,mt);else if(Ct==="object"){if(typeof I.then=="function")return ee(re(I),$,rt,et,mt);throw $=String(I),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return _t}function H(I,$,rt){if(I==null)return I;var et=[],mt=0;return ee(I,et,"","",function(Ct){return $.call(rt,Ct,mt++)}),et}function it(I){if(I._status===-1){var $=I._result;$=$(),$.then(function(rt){(I._status===0||I._status===-1)&&(I._status=1,I._result=rt)},function(rt){(I._status===0||I._status===-1)&&(I._status=2,I._result=rt)}),I._status===-1&&(I._status=0,I._result=$)}if(I._status===1)return I._result.default;throw I._result}var ft=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function jt(){}return Rt.Children={map:H,forEach:function(I,$,rt){H(I,function(){$.apply(this,arguments)},rt)},count:function(I){var $=0;return H(I,function(){$++}),$},toArray:function(I){return H(I,function($){return $})||[]},only:function(I){if(!w(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Rt.Component=Q,Rt.Fragment=n,Rt.Profiler=l,Rt.PureComponent=ot,Rt.StrictMode=s,Rt.Suspense=p,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return Z.H.useMemoCache(I)}},Rt.cache=function(I){return function(){return I.apply(null,arguments)}},Rt.cloneElement=function(I,$,rt){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var et=F({},I.props),mt=I.key,Ct=void 0;if($!=null)for(_t in $.ref!==void 0&&(Ct=void 0),$.key!==void 0&&(mt=""+$.key),$)!ht.call($,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&$.ref===void 0||(et[_t]=$[_t]);var _t=arguments.length-2;if(_t===1)et.children=rt;else if(1<_t){for(var Ot=Array(_t),Ut=0;Ut<_t;Ut++)Ot[Ut]=arguments[Ut+2];et.children=Ot}return O(I.type,mt,void 0,void 0,Ct,et)},Rt.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:c,_context:I},I},Rt.createElement=function(I,$,rt){var et,mt={},Ct=null;if($!=null)for(et in $.key!==void 0&&(Ct=""+$.key),$)ht.call($,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(mt[et]=$[et]);var _t=arguments.length-2;if(_t===1)mt.children=rt;else if(1<_t){for(var Ot=Array(_t),Ut=0;Ut<_t;Ut++)Ot[Ut]=arguments[Ut+2];mt.children=Ot}if(I&&I.defaultProps)for(et in _t=I.defaultProps,_t)mt[et]===void 0&&(mt[et]=_t[et]);return O(I,Ct,void 0,void 0,null,mt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(I){return{$$typeof:g,render:I}},Rt.isValidElement=w,Rt.lazy=function(I){return{$$typeof:E,_payload:{_status:-1,_result:I},_init:it}},Rt.memo=function(I,$){return{$$typeof:y,type:I,compare:$===void 0?null:$}},Rt.startTransition=function(I){var $=Z.T,rt={};Z.T=rt;try{var et=I(),mt=Z.S;mt!==null&&mt(rt,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(jt,ft)}catch(Ct){ft(Ct)}finally{Z.T=$}},Rt.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Rt.use=function(I){return Z.H.use(I)},Rt.useActionState=function(I,$,rt){return Z.H.useActionState(I,$,rt)},Rt.useCallback=function(I,$){return Z.H.useCallback(I,$)},Rt.useContext=function(I){return Z.H.useContext(I)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(I,$){return Z.H.useDeferredValue(I,$)},Rt.useEffect=function(I,$,rt){var et=Z.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(I,$)},Rt.useId=function(){return Z.H.useId()},Rt.useImperativeHandle=function(I,$,rt){return Z.H.useImperativeHandle(I,$,rt)},Rt.useInsertionEffect=function(I,$){return Z.H.useInsertionEffect(I,$)},Rt.useLayoutEffect=function(I,$){return Z.H.useLayoutEffect(I,$)},Rt.useMemo=function(I,$){return Z.H.useMemo(I,$)},Rt.useOptimistic=function(I,$){return Z.H.useOptimistic(I,$)},Rt.useReducer=function(I,$,rt){return Z.H.useReducer(I,$,rt)},Rt.useRef=function(I){return Z.H.useRef(I)},Rt.useState=function(I){return Z.H.useState(I)},Rt.useSyncExternalStore=function(I,$,rt){return Z.H.useSyncExternalStore(I,$,rt)},Rt.useTransition=function(){return Z.H.useTransition()},Rt.version="19.1.0",Rt}var a_;function Jd(){return a_||(a_=1,cd.exports=kA()),cd.exports}var Tt=Jd(),hd={exports:{}},ol={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function zA(){return o_||(o_=1,function(r){function t(H,it){var ft=H.length;H.push(it);t:for(;0<ft;){var jt=ft-1>>>1,I=H[jt];if(0<l(I,it))H[jt]=it,H[ft]=I,ft=jt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var it=H[0],ft=H.pop();if(ft!==it){H[0]=ft;t:for(var jt=0,I=H.length,$=I>>>1;jt<$;){var rt=2*(jt+1)-1,et=H[rt],mt=rt+1,Ct=H[mt];if(0>l(et,ft))mt<I&&0>l(Ct,et)?(H[jt]=Ct,H[mt]=ft,jt=mt):(H[jt]=et,H[rt]=ft,jt=rt);else if(mt<I&&0>l(Ct,ft))H[jt]=Ct,H[mt]=ft,jt=mt;else break t}}return it}function l(H,it){var ft=H.sortIndex-it.sortIndex;return ft!==0?ft:H.id-it.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],y=[],E=1,C=null,D=3,j=!1,F=!1,tt=!1,Q=!1,st=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ut(H){for(var it=n(y);it!==null;){if(it.callback===null)s(y);else if(it.startTime<=H)s(y),it.sortIndex=it.expirationTime,t(p,it);else break;it=n(y)}}function Z(H){if(tt=!1,ut(H),!F)if(n(p)!==null)F=!0,ht||(ht=!0,x());else{var it=n(y);it!==null&&ee(Z,it.startTime-H)}}var ht=!1,O=-1,S=5,w=-1;function M(){return Q?!0:!(r.unstable_now()-w<S)}function V(){if(Q=!1,ht){var H=r.unstable_now();w=H;var it=!0;try{t:{F=!1,tt&&(tt=!1,ot(O),O=-1),j=!0;var ft=D;try{e:{for(ut(H),C=n(p);C!==null&&!(C.expirationTime>H&&M());){var jt=C.callback;if(typeof jt=="function"){C.callback=null,D=C.priorityLevel;var I=jt(C.expirationTime<=H);if(H=r.unstable_now(),typeof I=="function"){C.callback=I,ut(H),it=!0;break e}C===n(p)&&s(p),ut(H)}else s(p);C=n(p)}if(C!==null)it=!0;else{var $=n(y);$!==null&&ee(Z,$.startTime-H),it=!1}}break t}finally{C=null,D=ft,j=!1}it=void 0}}finally{it?x():ht=!1}}}var x;if(typeof J=="function")x=function(){J(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,re=R.port2;R.port1.onmessage=V,x=function(){re.postMessage(null)}}else x=function(){st(V,0)};function ee(H,it){O=st(function(){H(r.unstable_now())},it)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(H){switch(D){case 1:case 2:case 3:var it=3;break;default:it=D}var ft=D;D=it;try{return H()}finally{D=ft}},r.unstable_requestPaint=function(){Q=!0},r.unstable_runWithPriority=function(H,it){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ft=D;D=H;try{return it()}finally{D=ft}},r.unstable_scheduleCallback=function(H,it,ft){var jt=r.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?jt+ft:jt):ft=jt,H){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ft+I,H={id:E++,callback:it,priorityLevel:H,startTime:ft,expirationTime:I,sortIndex:-1},ft>jt?(H.sortIndex=ft,t(y,H),n(p)===null&&H===n(y)&&(tt?(ot(O),O=-1):tt=!0,ee(Z,ft-jt))):(H.sortIndex=I,t(p,H),F||j||(F=!0,ht||(ht=!0,x()))),H},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(H){var it=D;return function(){var ft=D;D=it;try{return H.apply(this,arguments)}finally{D=ft}}}}(dd)),dd}var l_;function BA(){return l_||(l_=1,fd.exports=zA()),fd.exports}var md={exports:{}},Qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function jA(){if(u_)return Qe;u_=1;var r=Jd();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,E){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:p,containerInfo:y,implementation:E}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Qe.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(p,y,null,E)},Qe.flushSync=function(p){var y=d.T,E=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=E,s.d.f()}},Qe.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Qe.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Qe.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,C=g(E,y.crossOrigin),D=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:C,integrity:D,fetchPriority:j}):E==="script"&&s.d.X(p,{crossOrigin:C,integrity:D,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Qe.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Qe.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,C=g(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Qe.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Qe.requestFormReset=function(p){s.d.r(p)},Qe.unstable_batchedUpdates=function(p,y){return p(y)},Qe.useFormState=function(p,y,E){return d.H.useFormState(p,y,E)},Qe.useFormStatus=function(){return d.H.useHostTransitionStatus()},Qe.version="19.1.0",Qe}var c_;function qA(){if(c_)return md.exports;c_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),md.exports=jA(),md.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function HA(){if(h_)return ol;h_=1;var r=BA(),t=Jd(),n=qA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),e;if(f===o)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=f;break}if(T===o){v=!0,o=h,a=f;break}T=T.sibling}if(!v){for(T=f.child;T;){if(T===a){v=!0,a=f,o=h;break}if(T===o){v=!0,o=f,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),ot=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function x(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Q:return"Profiler";case tt:return"StrictMode";case Z:return"Suspense";case ht:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case J:return(e.displayName||"Context")+".Provider";case ot:return(e._context.displayName||"Context")+".Consumer";case ut:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return i=e.displayName||null,i!==null?i:re(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return re(e(i))}catch{}}return null}var ee=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},jt=[],I=-1;function $(e){return{current:e}}function rt(e){0>I||(e.current=jt[I],jt[I]=null,I--)}function et(e,i){I++,jt[I]=e.current,e.current=i}var mt=$(null),Ct=$(null),_t=$(null),Ot=$(null);function Ut(e,i){switch(et(_t,i),et(Ct,e),et(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Ny(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Ny(i),e=My(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}rt(mt),et(mt,e)}function He(){rt(mt),rt(Ct),rt(_t)}function Nn(e){e.memoizedState!==null&&et(Ot,e);var i=mt.current,a=My(i,e.type);i!==a&&(et(Ct,e),et(mt,a))}function hi(e){Ct.current===e&&(rt(mt),rt(Ct)),Ot.current===e&&(rt(Ot),el._currentValue=ft)}var kr=Object.prototype.hasOwnProperty,zr=r.unstable_scheduleCallback,Br=r.unstable_cancelCallback,Za=r.unstable_shouldYield,Ll=r.unstable_requestPaint,gn=r.unstable_now,lh=r.unstable_getCurrentPriorityLevel,Ja=r.unstable_ImmediatePriority,Us=r.unstable_UserBlockingPriority,jr=r.unstable_NormalPriority,uh=r.unstable_LowPriority,Ls=r.unstable_IdlePriority,Wa=r.log,kl=r.unstable_setDisableYieldValue,oe=null,Qt=null;function an(e){if(typeof Wa=="function"&&kl(e),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(oe,e)}catch{}}var Ge=Math.clz32?Math.clz32:qr,zl=Math.log,ch=Math.LN2;function qr(e){return e>>>=0,e===0?32:31-(zl(e)/ch|0)|0}var Hr=256,Gr=4194304;function Mn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ks(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~f,o!==0?h=Mn(o):(v&=T,v!==0?h=Mn(v):a||(a=T&~e,a!==0&&(h=Mn(a))))):(T=o&~f,T!==0?h=Mn(T):v!==0?h=Mn(v):a||(a=o&~e,a!==0&&(h=Mn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function Fr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function to(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eo(){var e=Hr;return Hr<<=1,(Hr&4194048)===0&&(Hr=256),e}function no(){var e=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),e}function fi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function di(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function io(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,b=e.expirationTimes,k=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Ge(a),Y=1<<G;T[G]=0,b[G]=-1;var z=k[G];if(z!==null)for(k[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~Y}o!==0&&qn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function qn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Ge(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function ro(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Ge(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function Qi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ki(){var e=it.p;return e!==0?e:(e=window.event,e===void 0?32:Zy(e.type))}function Bl(e,i){var a=it.p;try{return it.p=e,i()}finally{it.p=a}}var ne=Math.random().toString(36).slice(2),Te="__reactFiber$"+ne,ge="__reactProps$"+ne,pn="__reactContainer$"+ne,so="__reactEvents$"+ne,hh="__reactListeners$"+ne,Yi="__reactHandles$"+ne,jl="__reactResources$"+ne,Qr="__reactMarker$"+ne;function Xi(e){delete e[Te],delete e[ge],delete e[so],delete e[hh],delete e[Yi]}function mi(e){var i=e[Te];if(i)return i;for(var a=e.parentNode;a;){if(i=a[pn]||a[Te]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Uy(e);e!==null;){if(a=e[Te])return a;e=Uy(e)}return i}e=a,a=e.parentNode}return null}function Hn(e){if(e=e[Te]||e[pn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Gn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Ze(e){var i=e[jl];return i||(i=e[jl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function he(e){e[Qr]=!0}var ao=new Set,Bs={};function Vn(e,i){gi(e,i),gi(e+"Capture",i)}function gi(e,i){for(Bs[e]=i,e=0;e<i.length;e++)ao.add(i[e])}var ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hl={},Kr={};function Gl(e){return kr.call(Kr,e)?!0:kr.call(Hl,e)?!1:ql.test(e)?Kr[e]=!0:(Hl[e]=!0,!1)}function $i(e,i,a){if(Gl(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Fn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Pe(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var Yr,Fl;function pi(e){if(Yr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Yr=i&&i[1]||"",Fl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yr+e+Fl}var js=!1;function qs(e,i){if(!e||js)return"";js=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(B){var z=B}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(B){z=B}e.call(Y.prototype)}}else{try{throw Error()}catch(B){z=B}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],T=f[1];if(v&&T){var b=v.split(`
`),k=T.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===k.length)for(o=b.length-1,h=k.length-1;1<=o&&0<=h&&b[o]!==k[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==k[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==k[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{js=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?pi(a):""}function oo(e){switch(e.tag){case 26:case 27:case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return qs(e.type,!1);case 11:return qs(e.type.render,!1);case 1:return qs(e.type,!0);case 31:return pi("Activity");default:return""}}function Hs(e){try{var i="";do i+=oo(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function fh(e){var i=lo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Gs(e){e._valueTracker||(e._valueTracker=fh(e))}function uo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=lo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function Xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dh=/[\n"\\]/g;function pe(e){return e.replace(dh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function on(e,i,a,o,h,f,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Je(i)):e.value!==""+Je(i)&&(e.value=""+Je(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?Zi(e,v,Je(i)):a!=null?Zi(e,v,Je(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Je(T):e.removeAttribute("name")}function $r(e,i,a,o,h,f,v,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Je(a):"",i=i!=null?""+Je(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Zi(e,i,a){i==="number"&&Xr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function yi(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Xt(e,i,a){if(i!=null&&(i=""+Je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Je(a):""}function Zr(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(ee(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Je(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function yn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Jr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Jr.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function co(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Ql(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&Ql(e,f,i[f])}function ho(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fs(e){return gh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var _i=null;function _n(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,Ti=null;function fo(e){var i=Hn(e);if(i&&(e=i.stateNode)){var a=e[ge]||null;t:switch(e=i.stateNode,i.type){case"input":if(on(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[ge]||null;if(!h)throw Error(s(90));on(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&uo(o)}break t;case"textarea":Xt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&yi(e,!!a.multiple,i,!1)}}}var Qn=!1;function Kl(e,i,a){if(Qn)return e(i,a);Qn=!0;try{var o=e(i);return o}finally{if(Qn=!1,(vi!==null||Ti!==null)&&(Bu(),vi&&(i=vi,e=Ti,Ti=vi=null,fo(i),e)))for(i=0;i<e.length;i++)fo(e[i])}}function Wr(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ge]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vn=!1;if(xn)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){vn=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{vn=!1}var Kn=null,Ji=null,Ei=null;function mo(){if(Ei)return Ei;var e,i=Ji,a=i.length,o,h="value"in Kn?Kn.value:Kn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ei=h.slice(e,1<o?1-o:void 0)}function Yn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Xn(){return!0}function go(){return!1}function Ie(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xn:go,this.isPropagationStopped=go,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),i}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=Ie(Gt),es=E({},Gt,{view:0,detail:0}),Yl=Ie(es),Ks,Ys,$n,ns=E({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$n&&($n&&e.type==="mousemove"?(Ks=e.screenX-$n.screenX,Ys=e.screenY-$n.screenY):Ys=Ks=0,$n=e),Ks)},movementY:function(e){return"movementY"in e?e.movementY:Ys}}),Tn=Ie(ns),Xl=E({},ns,{dataTransfer:0}),ph=Ie(Xl),is=E({},es,{relatedTarget:0}),Xs=Ie(is),po=E({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),$s=Ie(po),$l=E({},Gt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zs=Ie($l),yh=E({},Gt,{data:0}),yo=Ie(yh),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _o(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Jl[e])?!!i[e]:!1}function ss(){return _o}var Wl=E({},es,{key:function(e){if(e.key){var i=rs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Yn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(e){return e.type==="keypress"?Yn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Js=Ie(Wl),tu=E({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vo=Ie(tu),Ai=E({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),eu=Ie(Ai),nu=E({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=Ie(nu),ru=E({},ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ws=Ie(ru),We=E({},Gt,{newState:0,oldState:0}),su=Ie(We),au=[9,13,27,32],Zn=xn&&"CompositionEvent"in window,u=null;xn&&"documentMode"in document&&(u=document.documentMode);var m=xn&&"TextEvent"in window&&!u,_=xn&&(!Zn||u&&8<u&&11>=u),A=" ",U=!1;function q(e,i){switch(e){case"keyup":return au.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lt=!1;function Ee(e,i){switch(e){case"compositionend":return nt(i);case"keypress":return i.which!==32?null:(U=!0,A);case"textInput":return e=i.data,e===A&&U?null:e;default:return null}}function kt(e,i){if(Lt)return e==="compositionend"||!Zn&&q(e,i)?(e=mo(),Ei=Ji=Kn=null,Lt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var De={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ae(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!De[e.type]:i==="textarea"}function Si(e,i,a,o){vi?Ti?Ti.push(o):Ti=[o]:vi=o,i=Qu(i,"onChange"),0<i.length&&(a=new Qs("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Ue=null,Jn=null;function To(e){Ry(e,0)}function ou(e){var i=Gn(e);if(uo(i))return e}function Km(e,i){if(e==="change")return i}var Ym=!1;if(xn){var _h;if(xn){var vh="oninput"in document;if(!vh){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),vh=typeof Xm.oninput=="function"}_h=vh}else _h=!1;Ym=_h&&(!document.documentMode||9<document.documentMode)}function $m(){Ue&&(Ue.detachEvent("onpropertychange",Zm),Jn=Ue=null)}function Zm(e){if(e.propertyName==="value"&&ou(Jn)){var i=[];Si(i,Jn,e,_n(e)),Kl(To,i)}}function uE(e,i,a){e==="focusin"?($m(),Ue=i,Jn=a,Ue.attachEvent("onpropertychange",Zm)):e==="focusout"&&$m()}function cE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ou(Jn)}function hE(e,i){if(e==="click")return ou(i)}function fE(e,i){if(e==="input"||e==="change")return ou(i)}function dE(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ln=typeof Object.is=="function"?Object.is:dE;function Eo(e,i){if(ln(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!kr.call(i,h)||!ln(e[h],i[h]))return!1}return!0}function Jm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wm(e,i){var a=Jm(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Jm(a)}}function tg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?tg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function eg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Xr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Xr(e.document)}return i}function Th(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var mE=xn&&"documentMode"in document&&11>=document.documentMode,ta=null,Eh=null,Ao=null,Ah=!1;function ng(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ah||ta==null||ta!==Xr(o)||(o=ta,"selectionStart"in o&&Th(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ao&&Eo(Ao,o)||(Ao=o,o=Qu(Eh,"onSelect"),0<o.length&&(i=new Qs("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=ta)))}function as(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ea={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionrun:as("Transition","TransitionRun"),transitionstart:as("Transition","TransitionStart"),transitioncancel:as("Transition","TransitionCancel"),transitionend:as("Transition","TransitionEnd")},Sh={},ig={};xn&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function os(e){if(Sh[e])return Sh[e];if(!ea[e])return e;var i=ea[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in ig)return Sh[e]=i[a];return e}var rg=os("animationend"),sg=os("animationiteration"),ag=os("animationstart"),gE=os("transitionrun"),pE=os("transitionstart"),yE=os("transitioncancel"),og=os("transitionend"),lg=new Map,bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bh.push("scrollEnd");function Pn(e,i){lg.set(e,i),Vn(i,[e])}var ug=new WeakMap;function En(e,i){if(typeof e=="object"&&e!==null){var a=ug.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Hs(i)},ug.set(e,i),i)}return{value:e,source:i,stack:Hs(i)}}var An=[],na=0,wh=0;function lu(){for(var e=na,i=wh=na=0;i<e;){var a=An[i];An[i++]=null;var o=An[i];An[i++]=null;var h=An[i];An[i++]=null;var f=An[i];if(An[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&cg(a,h,f)}}function uu(e,i,a,o){An[na++]=e,An[na++]=i,An[na++]=a,An[na++]=o,wh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Rh(e,i,a,o){return uu(e,i,a,o),cu(e)}function ia(e,i){return uu(e,null,null,i),cu(e)}function cg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Ge(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function cu(e){if(50<Ko)throw Ko=0,Vf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ra={};function _E(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,i,a,o){return new _E(e,i,a,o)}function Ch(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bi(e,i){var a=e.alternate;return a===null?(a=un(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function hg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function hu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")Ch(e)&&(v=1);else if(typeof e=="string")v=TA(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=un(31,a,i,h),e.elementType=w,e.lanes=f,e;case F:return ls(a.children,h,f,i);case tt:v=8,h|=24;break;case Q:return e=un(12,a,i,h|2),e.elementType=Q,e.lanes=f,e;case Z:return e=un(13,a,i,h),e.elementType=Z,e.lanes=f,e;case ht:return e=un(19,a,i,h),e.elementType=ht,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case st:case J:v=10;break t;case ot:v=9;break t;case ut:v=11;break t;case O:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=un(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function ls(e,i,a,o){return e=un(7,e,o,i),e.lanes=a,e}function Ih(e,i,a){return e=un(6,e,null,i),e.lanes=a,e}function Dh(e,i,a){return i=un(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var sa=[],aa=0,fu=null,du=0,Sn=[],bn=0,us=null,wi=1,Ri="";function cs(e,i){sa[aa++]=du,sa[aa++]=fu,fu=e,du=i}function fg(e,i,a){Sn[bn++]=wi,Sn[bn++]=Ri,Sn[bn++]=us,us=e;var o=wi;e=Ri;var h=32-Ge(o)-1;o&=~(1<<h),a+=1;var f=32-Ge(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,wi=1<<32-Ge(i)+h|a<<h|o,Ri=f+e}else wi=1<<f|a<<h|o,Ri=e}function Oh(e){e.return!==null&&(cs(e,1),fg(e,1,0))}function Nh(e){for(;e===fu;)fu=sa[--aa],sa[aa]=null,du=sa[--aa],sa[aa]=null;for(;e===us;)us=Sn[--bn],Sn[bn]=null,Ri=Sn[--bn],Sn[bn]=null,wi=Sn[--bn],Sn[bn]=null}var tn=null,le=null,Ht=!1,hs=null,Wn=!1,Mh=Error(s(519));function fs(e){var i=Error(s(418,""));throw wo(En(i,e)),Mh}function dg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Te]=e,i[ge]=o,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<Xo.length;a++)Vt(Xo[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),$r(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Gs(i);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),Zr(i,o.value,o.defaultValue,o.children),Gs(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Oy(i.textContent,a)?(o.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),o.onScroll!=null&&Vt("scroll",i),o.onScrollEnd!=null&&Vt("scrollend",i),o.onClick!=null&&(i.onclick=Ku),i=!0):i=!1,i||fs(e)}function mg(e){for(tn=e.return;tn;)switch(tn.tag){case 5:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:tn=tn.return}}function So(e){if(e!==tn)return!1;if(!Ht)return mg(e),Ht=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Xf(e.type,e.memoizedProps)),a=!a),a&&le&&fs(e),mg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=Ln(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,mr(e.type)?(e=Wf,Wf=null,le=e):le=i):le=tn?Ln(e.stateNode.nextSibling):null;return!0}function bo(){le=tn=null,Ht=!1}function gg(){var e=hs;return e!==null&&(rn===null?rn=e:rn.push.apply(rn,e),hs=null),e}function wo(e){hs===null?hs=[e]:hs.push(e)}var Vh=$(null),ds=null,Ci=null;function Wi(e,i,a){et(Vh,i._currentValue),i._currentValue=a}function Ii(e){e._currentValue=Vh.current,rt(Vh)}function xh(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Ph(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var T=f;f=h;for(var b=0;b<i.length;b++)if(T.context===i[b]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),xh(f.return,a,e),o||(v=null);break t}f=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),xh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ro(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;ln(h.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(h===Ot.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(el):e=[el])}h=h.return}e!==null&&Ph(i,e,a,o),i.flags|=262144}function mu(e){for(e=e.firstContext;e!==null;){if(!ln(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ms(e){ds=e,Ci=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Fe(e){return pg(ds,e)}function gu(e,i){return ds===null&&ms(e),pg(e,i)}function pg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ci===null){if(e===null)throw Error(s(308));Ci=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ci=Ci.next=i;return a}var vE=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},TE=r.unstable_scheduleCallback,EE=r.unstable_NormalPriority,Se={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uh(){return{controller:new vE,data:new Map,refCount:0}}function Co(e){e.refCount--,e.refCount===0&&TE(EE,function(){e.controller.abort()})}var Io=null,Lh=0,oa=0,la=null;function AE(e,i){if(Io===null){var a=Io=[];Lh=0,oa=Bf(),la={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Lh++,i.then(yg,yg),i}function yg(){if(--Lh===0&&Io!==null){la!==null&&(la.status="fulfilled");var e=Io;Io=null,oa=0,la=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function SE(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var _g=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&AE(e,i),_g!==null&&_g(e,i)};var gs=$(null);function kh(){var e=gs.current;return e!==null?e:te.pooledCache}function pu(e,i){i===null?et(gs,gs.current):et(gs,i.pool)}function vg(){var e=kh();return e===null?null:{parent:Se._currentValue,pool:e}}var Do=Error(s(460)),Tg=Error(s(474)),yu=Error(s(542)),zh={then:function(){}};function Eg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _u(){}function Ag(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(_u,_u),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,bg(e),e;default:if(typeof i.status=="string")i.then(_u,_u);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,bg(e),e}throw Oo=i,Do}}var Oo=null;function Sg(){if(Oo===null)throw Error(s(459));var e=Oo;return Oo=null,e}function bg(e){if(e===Do||e===yu)throw Error(s(483))}var tr=!1;function Bh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function er(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function nr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Kt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=cu(e),cg(e,null,a),i}return uu(e,o,i,a),cu(e)}function No(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,ro(e,a)}}function qh(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Hh=!1;function Mo(){if(Hh){var e=la;if(e!==null)throw e}}function Vo(e,i,a,o){Hh=!1;var h=e.updateQueue;tr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var b=T,k=b.next;b.next=null,v===null?f=k:v.next=k,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==v&&(T===null?G.firstBaseUpdate=k:T.next=k,G.lastBaseUpdate=b))}if(f!==null){var Y=h.baseState;v=0,G=k=b=null,T=f;do{var z=T.lane&-536870913,B=z!==T.lane;if(B?(zt&z)===z:(o&z)===z){z!==0&&z===oa&&(Hh=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Et=e,gt=T;z=i;var Jt=a;switch(gt.tag){case 1:if(Et=gt.payload,typeof Et=="function"){Y=Et.call(Jt,Y,z);break t}Y=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=gt.payload,z=typeof Et=="function"?Et.call(Jt,Y,z):Et,z==null)break t;Y=E({},Y,z);break t;case 2:tr=!0}}z=T.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(k=G=B,b=Y):G=G.next=B,v|=z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;B=T,T=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=Y),h.baseState=b,h.firstBaseUpdate=k,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),cr|=v,e.lanes=v,e.memoizedState=Y}}function wg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Rg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)wg(a[e],i)}var ua=$(null),vu=$(0);function Cg(e,i){e=Pi,et(vu,e),et(ua,i),Pi=e|i.baseLanes}function Gh(){et(vu,Pi),et(ua,ua.current)}function Fh(){Pi=vu.current,rt(ua),rt(vu)}var ir=0,It=null,$t=null,ye=null,Tu=!1,ca=!1,ps=!1,Eu=0,xo=0,ha=null,bE=0;function fe(){throw Error(s(321))}function Qh(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!ln(e[a],i[a]))return!1;return!0}function Kh(e,i,a,o,h,f){return ir=f,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?cp:hp,ps=!1,f=a(o,h),ps=!1,ca&&(f=Dg(i,a,o,h)),Ig(e),f}function Ig(e){H.H=Cu;var i=$t!==null&&$t.next!==null;if(ir=0,ye=$t=It=null,Tu=!1,xo=0,ha=null,i)throw Error(s(300));e===null||Oe||(e=e.dependencies,e!==null&&mu(e)&&(Oe=!0))}function Dg(e,i,a,o){It=e;var h=0;do{if(ca&&(ha=null),xo=0,ca=!1,25<=h)throw Error(s(301));if(h+=1,ye=$t=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=NE,f=i(a,o)}while(ca);return f}function wE(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?Po(i):i,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(It.flags|=1024),i}function Yh(){var e=Eu!==0;return Eu=0,e}function Xh(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function $h(e){if(Tu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Tu=!1}ir=0,ye=$t=It=null,ca=!1,xo=Eu=0,ha=null}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?It.memoizedState=ye=e:ye=ye.next=e,ye}function _e(){if($t===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var i=ye===null?It.memoizedState:ye.next;if(i!==null)ye=i,$t=e;else{if(e===null)throw It.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},ye===null?It.memoizedState=ye=e:ye=ye.next=e}return ye}function Zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(e){var i=xo;return xo+=1,ha===null&&(ha=[]),e=Ag(ha,e,i),i=It,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?cp:hp),e}function Au(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Po(e);if(e.$$typeof===J)return Fe(e)}throw Error(s(438,String(e)))}function Jh(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Zh(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=M;return i.index++,a}function Di(e,i){return typeof i=="function"?i(e):i}function Su(e){var i=_e();return Wh(i,$t,e)}function Wh(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var T=v=null,b=null,k=i,G=!1;do{var Y=k.lane&-536870913;if(Y!==k.lane?(zt&Y)===Y:(ir&Y)===Y){var z=k.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),Y===oa&&(G=!0);else if((ir&z)===z){k=k.next,z===oa&&(G=!0);continue}else Y={lane:0,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(T=b=Y,v=f):b=b.next=Y,It.lanes|=z,cr|=z;Y=k.action,ps&&a(f,Y),f=k.hasEagerState?k.eagerState:a(f,Y)}else z={lane:Y,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(T=b=z,v=f):b=b.next=z,It.lanes|=Y,cr|=Y;k=k.next}while(k!==null&&k!==i);if(b===null?v=f:b.next=T,!ln(f,e.memoizedState)&&(Oe=!0,G&&(a=la,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function tf(e){var i=_e(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);ln(f,i.memoizedState)||(Oe=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Og(e,i,a){var o=It,h=_e(),f=Ht;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!ln(($t||h).memoizedState,a);v&&(h.memoizedState=a,Oe=!0),h=h.queue;var T=Vg.bind(null,o,h,e);if(Uo(2048,8,T,[e]),h.getSnapshot!==i||v||ye!==null&&ye.memoizedState.tag&1){if(o.flags|=2048,fa(9,bu(),Mg.bind(null,o,h,a,i),null),te===null)throw Error(s(349));f||(ir&124)!==0||Ng(o,i,a)}return a}function Ng(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=Zh(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Mg(e,i,a,o){i.value=a,i.getSnapshot=o,xg(i)&&Pg(e)}function Vg(e,i,a){return a(function(){xg(i)&&Pg(e)})}function xg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!ln(e,a)}catch{return!0}}function Pg(e){var i=ia(e,2);i!==null&&mn(i,e,2)}function ef(e){var i=en();if(typeof e=="function"){var a=e;if(e=a(),ps){an(!0);try{a()}finally{an(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},i}function Ug(e,i,a,o){return e.baseState=a,Wh(e,$t,typeof o=="function"?o:Di)}function RE(e,i,a,o,h){if(Ru(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Lg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Lg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var T=a(h,o),b=H.S;b!==null&&b(v,T),kg(e,i,T)}catch(k){nf(e,i,k)}finally{H.T=f}}else try{f=a(h,o),kg(e,i,f)}catch(k){nf(e,i,k)}}function kg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){zg(e,i,o)},function(o){return nf(e,i,o)}):zg(e,i,a)}function zg(e,i,a){i.status="fulfilled",i.value=a,Bg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Lg(e,a)))}function nf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Bg(i),i=i.next;while(i!==o)}e.action=null}function Bg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function jg(e,i){return i}function qg(e,i){if(Ht){var a=te.formState;if(a!==null){t:{var o=It;if(Ht){if(le){e:{for(var h=le,f=Wn;h.nodeType!==8;){if(!f){h=null;break e}if(h=Ln(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=Ln(h.nextSibling),o=h.data==="F!";break t}}fs(o)}o=!1}o&&(i=a[0])}}return a=en(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:i},a.queue=o,a=op.bind(null,It,o),o.dispatch=a,o=ef(!1),f=lf.bind(null,It,!1,o.queue),o=en(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=RE.bind(null,It,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function Hg(e){var i=_e();return Gg(i,$t,e)}function Gg(e,i,a){if(i=Wh(e,i,jg)[0],e=Su(Di)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Po(i)}catch(v){throw v===Do?yu:v}else o=i;i=_e();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(It.flags|=2048,fa(9,bu(),CE.bind(null,h,a),null)),[o,f,e]}function CE(e,i){e.action=i}function Fg(e){var i=_e(),a=$t;if(a!==null)return Gg(i,a,e);_e(),i=i.memoizedState,a=_e();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function fa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=It.updateQueue,i===null&&(i=Zh(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function bu(){return{destroy:void 0,resource:void 0}}function Qg(){return _e().memoizedState}function wu(e,i,a,o){var h=en();o=o===void 0?null:o,It.flags|=e,h.memoizedState=fa(1|i,bu(),a,o)}function Uo(e,i,a,o){var h=_e();o=o===void 0?null:o;var f=h.memoizedState.inst;$t!==null&&o!==null&&Qh(o,$t.memoizedState.deps)?h.memoizedState=fa(i,f,a,o):(It.flags|=e,h.memoizedState=fa(1|i,f,a,o))}function Kg(e,i){wu(8390656,8,e,i)}function Yg(e,i){Uo(2048,8,e,i)}function Xg(e,i){return Uo(4,2,e,i)}function $g(e,i){return Uo(4,4,e,i)}function Zg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Jg(e,i,a){a=a!=null?a.concat([e]):null,Uo(4,4,Zg.bind(null,i,e),a)}function rf(){}function Wg(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Qh(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function tp(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Qh(i,o[1]))return o[0];if(o=e(),ps){an(!0);try{e()}finally{an(!1)}}return a.memoizedState=[o,i],o}function sf(e,i,a){return a===void 0||(ir&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=iy(),It.lanes|=e,cr|=e,a)}function ep(e,i,a,o){return ln(a,i)?a:ua.current!==null?(e=sf(e,a,o),ln(e,i)||(Oe=!0),e):(ir&42)===0?(Oe=!0,e.memoizedState=a):(e=iy(),It.lanes|=e,cr|=e,i)}function np(e,i,a,o,h){var f=it.p;it.p=f!==0&&8>f?f:8;var v=H.T,T={};H.T=T,lf(e,!1,i,a);try{var b=h(),k=H.S;if(k!==null&&k(T,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=SE(b,o);Lo(e,i,G,dn(e))}else Lo(e,i,o,dn(e))}catch(Y){Lo(e,i,{then:function(){},status:"rejected",reason:Y},dn())}finally{it.p=f,H.T=v}}function IE(){}function af(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=ip(e).queue;np(e,h,i,ft,a===null?IE:function(){return rp(e),a(o)})}function ip(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:ft},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function rp(e){var i=ip(e).next.queue;Lo(e,i,{},dn())}function of(){return Fe(el)}function sp(){return _e().memoizedState}function ap(){return _e().memoizedState}function DE(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=dn();e=er(a);var o=nr(i,e,a);o!==null&&(mn(o,i,a),No(o,i,a)),i={cache:Uh()},e.payload=i;return}i=i.return}}function OE(e,i,a){var o=dn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ru(e)?lp(i,a):(a=Rh(e,i,a,o),a!==null&&(mn(a,e,o),up(a,i,o)))}function op(e,i,a){var o=dn();Lo(e,i,a,o)}function Lo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ru(e))lp(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,T=f(v,a);if(h.hasEagerState=!0,h.eagerState=T,ln(T,v))return uu(e,i,h,0),te===null&&lu(),!1}catch{}finally{}if(a=Rh(e,i,h,o),a!==null)return mn(a,e,o),up(a,i,o),!0}return!1}function lf(e,i,a,o){if(o={lane:2,revertLane:Bf(),action:o,hasEagerState:!1,eagerState:null,next:null},Ru(e)){if(i)throw Error(s(479))}else i=Rh(e,a,o,2),i!==null&&mn(i,e,2)}function Ru(e){var i=e.alternate;return e===It||i!==null&&i===It}function lp(e,i){ca=Tu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function up(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,ro(e,a)}}var Cu={readContext:Fe,use:Au,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe,useHostTransitionStatus:fe,useFormState:fe,useActionState:fe,useOptimistic:fe,useMemoCache:fe,useCacheRefresh:fe},cp={readContext:Fe,use:Au,useCallback:function(e,i){return en().memoizedState=[e,i===void 0?null:i],e},useContext:Fe,useEffect:Kg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,wu(4194308,4,Zg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return wu(4194308,4,e,i)},useInsertionEffect:function(e,i){wu(4,2,e,i)},useMemo:function(e,i){var a=en();i=i===void 0?null:i;var o=e();if(ps){an(!0);try{e()}finally{an(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=en();if(a!==void 0){var h=a(i);if(ps){an(!0);try{a(i)}finally{an(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=OE.bind(null,It,e),[o.memoizedState,e]},useRef:function(e){var i=en();return e={current:e},i.memoizedState=e},useState:function(e){e=ef(e);var i=e.queue,a=op.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:rf,useDeferredValue:function(e,i){var a=en();return sf(a,e,i)},useTransition:function(){var e=ef(!1);return e=np.bind(null,It,e.queue,!0,!1),en().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=It,h=en();if(Ht){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),te===null)throw Error(s(349));(zt&124)!==0||Ng(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Kg(Vg.bind(null,o,f,e),[e]),o.flags|=2048,fa(9,bu(),Mg.bind(null,o,f,a,i),null),a},useId:function(){var e=en(),i=te.identifierPrefix;if(Ht){var a=Ri,o=wi;a=(o&~(1<<32-Ge(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Eu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=bE++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:of,useFormState:qg,useActionState:qg,useOptimistic:function(e){var i=en();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=lf.bind(null,It,!0,a),a.dispatch=i,[e,i]},useMemoCache:Jh,useCacheRefresh:function(){return en().memoizedState=DE.bind(null,It)}},hp={readContext:Fe,use:Au,useCallback:Wg,useContext:Fe,useEffect:Yg,useImperativeHandle:Jg,useInsertionEffect:Xg,useLayoutEffect:$g,useMemo:tp,useReducer:Su,useRef:Qg,useState:function(){return Su(Di)},useDebugValue:rf,useDeferredValue:function(e,i){var a=_e();return ep(a,$t.memoizedState,e,i)},useTransition:function(){var e=Su(Di)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Po(e),i]},useSyncExternalStore:Og,useId:sp,useHostTransitionStatus:of,useFormState:Hg,useActionState:Hg,useOptimistic:function(e,i){var a=_e();return Ug(a,$t,e,i)},useMemoCache:Jh,useCacheRefresh:ap},NE={readContext:Fe,use:Au,useCallback:Wg,useContext:Fe,useEffect:Yg,useImperativeHandle:Jg,useInsertionEffect:Xg,useLayoutEffect:$g,useMemo:tp,useReducer:tf,useRef:Qg,useState:function(){return tf(Di)},useDebugValue:rf,useDeferredValue:function(e,i){var a=_e();return $t===null?sf(a,e,i):ep(a,$t.memoizedState,e,i)},useTransition:function(){var e=tf(Di)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Po(e),i]},useSyncExternalStore:Og,useId:sp,useHostTransitionStatus:of,useFormState:Fg,useActionState:Fg,useOptimistic:function(e,i){var a=_e();return $t!==null?Ug(a,$t,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Jh,useCacheRefresh:ap},da=null,ko=0;function Iu(e){var i=ko;return ko+=1,da===null&&(da=[]),Ag(da,e,i)}function zo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Du(e,i){throw i.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function fp(e){var i=e._init;return i(e._payload)}function dp(e){function i(P,N){if(e){var L=P.deletions;L===null?(P.deletions=[N],P.flags|=16):L.push(N)}}function a(P,N){if(!e)return null;for(;N!==null;)i(P,N),N=N.sibling;return null}function o(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function h(P,N){return P=bi(P,N),P.index=0,P.sibling=null,P}function f(P,N,L){return P.index=L,e?(L=P.alternate,L!==null?(L=L.index,L<N?(P.flags|=67108866,N):L):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function T(P,N,L,K){return N===null||N.tag!==6?(N=Ih(L,P.mode,K),N.return=P,N):(N=h(N,L),N.return=P,N)}function b(P,N,L,K){var lt=L.type;return lt===F?G(P,N,L.props.children,K,L.key):N!==null&&(N.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&fp(lt)===N.type)?(N=h(N,L.props),zo(N,L),N.return=P,N):(N=hu(L.type,L.key,L.props,null,P.mode,K),zo(N,L),N.return=P,N)}function k(P,N,L,K){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=Dh(L,P.mode,K),N.return=P,N):(N=h(N,L.children||[]),N.return=P,N)}function G(P,N,L,K,lt){return N===null||N.tag!==7?(N=ls(L,P.mode,K,lt),N.return=P,N):(N=h(N,L),N.return=P,N)}function Y(P,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Ih(""+N,P.mode,L),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case D:return L=hu(N.type,N.key,N.props,null,P.mode,L),zo(L,N),L.return=P,L;case j:return N=Dh(N,P.mode,L),N.return=P,N;case S:var K=N._init;return N=K(N._payload),Y(P,N,L)}if(ee(N)||x(N))return N=ls(N,P.mode,L,null),N.return=P,N;if(typeof N.then=="function")return Y(P,Iu(N),L);if(N.$$typeof===J)return Y(P,gu(P,N),L);Du(P,N)}return null}function z(P,N,L,K){var lt=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return lt!==null?null:T(P,N,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case D:return L.key===lt?b(P,N,L,K):null;case j:return L.key===lt?k(P,N,L,K):null;case S:return lt=L._init,L=lt(L._payload),z(P,N,L,K)}if(ee(L)||x(L))return lt!==null?null:G(P,N,L,K,null);if(typeof L.then=="function")return z(P,N,Iu(L),K);if(L.$$typeof===J)return z(P,N,gu(P,L),K);Du(P,L)}return null}function B(P,N,L,K,lt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return P=P.get(L)||null,T(N,P,""+K,lt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return P=P.get(K.key===null?L:K.key)||null,b(N,P,K,lt);case j:return P=P.get(K.key===null?L:K.key)||null,k(N,P,K,lt);case S:var Nt=K._init;return K=Nt(K._payload),B(P,N,L,K,lt)}if(ee(K)||x(K))return P=P.get(L)||null,G(N,P,K,lt,null);if(typeof K.then=="function")return B(P,N,L,Iu(K),lt);if(K.$$typeof===J)return B(P,N,L,gu(N,K),lt);Du(N,K)}return null}function Et(P,N,L,K){for(var lt=null,Nt=null,dt=N,vt=N=0,Me=null;dt!==null&&vt<L.length;vt++){dt.index>vt?(Me=dt,dt=null):Me=dt.sibling;var qt=z(P,dt,L[vt],K);if(qt===null){dt===null&&(dt=Me);break}e&&dt&&qt.alternate===null&&i(P,dt),N=f(qt,N,vt),Nt===null?lt=qt:Nt.sibling=qt,Nt=qt,dt=Me}if(vt===L.length)return a(P,dt),Ht&&cs(P,vt),lt;if(dt===null){for(;vt<L.length;vt++)dt=Y(P,L[vt],K),dt!==null&&(N=f(dt,N,vt),Nt===null?lt=dt:Nt.sibling=dt,Nt=dt);return Ht&&cs(P,vt),lt}for(dt=o(dt);vt<L.length;vt++)Me=B(dt,P,vt,L[vt],K),Me!==null&&(e&&Me.alternate!==null&&dt.delete(Me.key===null?vt:Me.key),N=f(Me,N,vt),Nt===null?lt=Me:Nt.sibling=Me,Nt=Me);return e&&dt.forEach(function(vr){return i(P,vr)}),Ht&&cs(P,vt),lt}function gt(P,N,L,K){if(L==null)throw Error(s(151));for(var lt=null,Nt=null,dt=N,vt=N=0,Me=null,qt=L.next();dt!==null&&!qt.done;vt++,qt=L.next()){dt.index>vt?(Me=dt,dt=null):Me=dt.sibling;var vr=z(P,dt,qt.value,K);if(vr===null){dt===null&&(dt=Me);break}e&&dt&&vr.alternate===null&&i(P,dt),N=f(vr,N,vt),Nt===null?lt=vr:Nt.sibling=vr,Nt=vr,dt=Me}if(qt.done)return a(P,dt),Ht&&cs(P,vt),lt;if(dt===null){for(;!qt.done;vt++,qt=L.next())qt=Y(P,qt.value,K),qt!==null&&(N=f(qt,N,vt),Nt===null?lt=qt:Nt.sibling=qt,Nt=qt);return Ht&&cs(P,vt),lt}for(dt=o(dt);!qt.done;vt++,qt=L.next())qt=B(dt,P,vt,qt.value,K),qt!==null&&(e&&qt.alternate!==null&&dt.delete(qt.key===null?vt:qt.key),N=f(qt,N,vt),Nt===null?lt=qt:Nt.sibling=qt,Nt=qt);return e&&dt.forEach(function(MA){return i(P,MA)}),Ht&&cs(P,vt),lt}function Jt(P,N,L,K){if(typeof L=="object"&&L!==null&&L.type===F&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case D:t:{for(var lt=L.key;N!==null;){if(N.key===lt){if(lt=L.type,lt===F){if(N.tag===7){a(P,N.sibling),K=h(N,L.props.children),K.return=P,P=K;break t}}else if(N.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&fp(lt)===N.type){a(P,N.sibling),K=h(N,L.props),zo(K,L),K.return=P,P=K;break t}a(P,N);break}else i(P,N);N=N.sibling}L.type===F?(K=ls(L.props.children,P.mode,K,L.key),K.return=P,P=K):(K=hu(L.type,L.key,L.props,null,P.mode,K),zo(K,L),K.return=P,P=K)}return v(P);case j:t:{for(lt=L.key;N!==null;){if(N.key===lt)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){a(P,N.sibling),K=h(N,L.children||[]),K.return=P,P=K;break t}else{a(P,N);break}else i(P,N);N=N.sibling}K=Dh(L,P.mode,K),K.return=P,P=K}return v(P);case S:return lt=L._init,L=lt(L._payload),Jt(P,N,L,K)}if(ee(L))return Et(P,N,L,K);if(x(L)){if(lt=x(L),typeof lt!="function")throw Error(s(150));return L=lt.call(L),gt(P,N,L,K)}if(typeof L.then=="function")return Jt(P,N,Iu(L),K);if(L.$$typeof===J)return Jt(P,N,gu(P,L),K);Du(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,N!==null&&N.tag===6?(a(P,N.sibling),K=h(N,L),K.return=P,P=K):(a(P,N),K=Ih(L,P.mode,K),K.return=P,P=K),v(P)):a(P,N)}return function(P,N,L,K){try{ko=0;var lt=Jt(P,N,L,K);return da=null,lt}catch(dt){if(dt===Do||dt===yu)throw dt;var Nt=un(29,dt,null,P.mode);return Nt.lanes=K,Nt.return=P,Nt}finally{}}}var ma=dp(!0),mp=dp(!1),wn=$(null),ti=null;function rr(e){var i=e.alternate;et(be,be.current&1),et(wn,e),ti===null&&(i===null||ua.current!==null||i.memoizedState!==null)&&(ti=e)}function gp(e){if(e.tag===22){if(et(be,be.current),et(wn,e),ti===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ti=e)}}else sr()}function sr(){et(be,be.current),et(wn,wn.current)}function Oi(e){rt(wn),ti===e&&(ti=null),rt(be)}var be=$(0);function Ou(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function uf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:E({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var cf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=dn(),h=er(o);h.payload=i,a!=null&&(h.callback=a),i=nr(e,h,o),i!==null&&(mn(i,e,o),No(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=dn(),h=er(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=nr(e,h,o),i!==null&&(mn(i,e,o),No(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=dn(),o=er(a);o.tag=2,i!=null&&(o.callback=i),i=nr(e,o,a),i!==null&&(mn(i,e,a),No(i,e,a))}};function pp(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Eo(a,o)||!Eo(h,f):!0}function yp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&cf.enqueueReplaceState(i,i.state,null)}function ys(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=E({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Nu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function _p(e){Nu(e)}function vp(e){console.error(e)}function Tp(e){Nu(e)}function Mu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Ep(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hf(e,i,a){return a=er(a),a.tag=3,a.payload={element:null},a.callback=function(){Mu(e,i)},a}function Ap(e){return e=er(e),e.tag=3,e}function Sp(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Ep(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Ep(i,a,o),typeof h!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function ME(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ro(i,a,h,!0),a=wn.current,a!==null){switch(a.tag){case 13:return ti===null?Pf():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===zh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Lf(e,o,h)),!1;case 22:return a.flags|=65536,o===zh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Lf(e,o,h)),!1}throw Error(s(435,a.tag))}return Lf(e,o,h),Pf(),!1}if(Ht)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Mh&&(e=Error(s(422),{cause:o}),wo(En(e,a)))):(o!==Mh&&(i=Error(s(423),{cause:o}),wo(En(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=En(o,a),h=hf(e.stateNode,o,h),qh(e,h),ue!==4&&(ue=2)),!1;var f=Error(s(520),{cause:o});if(f=En(f,a),Qo===null?Qo=[f]:Qo.push(f),ue!==4&&(ue=2),i===null)return!0;o=En(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=hf(a.stateNode,o,e),qh(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(hr===null||!hr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ap(h),Sp(h,e,a,o),qh(a,h),!1}a=a.return}while(a!==null);return!1}var bp=Error(s(461)),Oe=!1;function Le(e,i,a,o){i.child=e===null?mp(i,null,a,o):ma(i,e.child,a,o)}function wp(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return ms(i),o=Kh(e,i,a,v,f,h),T=Yh(),e!==null&&!Oe?(Xh(e,i,h),Ni(e,i,h)):(Ht&&T&&Oh(i),i.flags|=1,Le(e,i,o,h),i.child)}function Rp(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!Ch(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Cp(e,i,f,o,h)):(e=hu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!vf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Eo,a(v,o)&&e.ref===i.ref)return Ni(e,i,h)}return i.flags|=1,e=bi(f,o),e.ref=i.ref,e.return=i,i.child=e}function Cp(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(Eo(f,o)&&e.ref===i.ref)if(Oe=!1,i.pendingProps=o=f,vf(e,h))(e.flags&131072)!==0&&(Oe=!0);else return i.lanes=e.lanes,Ni(e,i,h)}return ff(e,i,a,o,h)}function Ip(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return Dp(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&pu(i,f!==null?f.cachePool:null),f!==null?Cg(i,f):Gh(),gp(i);else return i.lanes=i.childLanes=536870912,Dp(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(pu(i,f.cachePool),Cg(i,f),sr(),i.memoizedState=null):(e!==null&&pu(i,null),Gh(),sr());return Le(e,i,h,a),i.child}function Dp(e,i,a,o){var h=kh();return h=h===null?null:{parent:Se._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&pu(i,null),Gh(),gp(i),e!==null&&Ro(e,i,o,!0),null}function Vu(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function ff(e,i,a,o,h){return ms(i),a=Kh(e,i,a,o,void 0,h),o=Yh(),e!==null&&!Oe?(Xh(e,i,h),Ni(e,i,h)):(Ht&&o&&Oh(i),i.flags|=1,Le(e,i,a,h),i.child)}function Op(e,i,a,o,h,f){return ms(i),i.updateQueue=null,a=Dg(i,o,a,h),Ig(e),o=Yh(),e!==null&&!Oe?(Xh(e,i,f),Ni(e,i,f)):(Ht&&o&&Oh(i),i.flags|=1,Le(e,i,a,f),i.child)}function Np(e,i,a,o,h){if(ms(i),i.stateNode===null){var f=ra,v=a.contextType;typeof v=="object"&&v!==null&&(f=Fe(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=cf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},Bh(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Fe(v):ra,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(uf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&cf.enqueueReplaceState(f,f.state,null),Vo(i,o,f,h),Mo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var T=i.memoizedProps,b=ys(a,T);f.props=b;var k=f.context,G=a.contextType;v=ra,typeof G=="object"&&G!==null&&(v=Fe(G));var Y=a.getDerivedStateFromProps;G=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||k!==v)&&yp(i,f,o,v),tr=!1;var z=i.memoizedState;f.state=z,Vo(i,o,f,h),Mo(),k=i.memoizedState,T||z!==k||tr?(typeof Y=="function"&&(uf(i,a,Y,o),k=i.memoizedState),(b=tr||pp(i,a,b,o,z,k,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=k),f.props=o,f.state=k,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,jh(e,i),v=i.memoizedProps,G=ys(a,v),f.props=G,Y=i.pendingProps,z=f.context,k=a.contextType,b=ra,typeof k=="object"&&k!==null&&(b=Fe(k)),T=a.getDerivedStateFromProps,(k=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Y||z!==b)&&yp(i,f,o,b),tr=!1,z=i.memoizedState,f.state=z,Vo(i,o,f,h),Mo();var B=i.memoizedState;v!==Y||z!==B||tr||e!==null&&e.dependencies!==null&&mu(e.dependencies)?(typeof T=="function"&&(uf(i,a,T,o),B=i.memoizedState),(G=tr||pp(i,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&mu(e.dependencies))?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,Vu(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=ma(i,e.child,null,h),i.child=ma(i,null,a,h)):Le(e,i,a,h),i.memoizedState=f.state,e=i.child):e=Ni(e,i,h),e}function Mp(e,i,a,o){return bo(),i.flags|=256,Le(e,i,a,o),i.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(e){return{baseLanes:e,cachePool:vg()}}function gf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Rn),e}function Vp(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(be.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ht){if(h?rr(i):sr(),Ht){var T=le,b;if(b=T){t:{for(b=T,T=Wn;b.nodeType!==8;){if(!T){T=null;break t}if(b=Ln(b.nextSibling),b===null){T=null;break t}}T=b}T!==null?(i.memoizedState={dehydrated:T,treeContext:us!==null?{id:wi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},b=un(18,null,null,0),b.stateNode=T,b.return=i,i.child=b,tn=i,le=null,b=!0):b=!1}b||fs(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Jf(T)?i.lanes=32:i.lanes=536870912,null;Oi(i)}return T=o.children,o=o.fallback,h?(sr(),h=i.mode,T=xu({mode:"hidden",children:T},h),o=ls(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,h=i.child,h.memoizedState=mf(a),h.childLanes=gf(e,v,a),i.memoizedState=df,o):(rr(i),pf(i,T))}if(b=e.memoizedState,b!==null&&(T=b.dehydrated,T!==null)){if(f)i.flags&256?(rr(i),i.flags&=-257,i=yf(e,i,a)):i.memoizedState!==null?(sr(),i.child=e.child,i.flags|=128,i=null):(sr(),h=o.fallback,T=i.mode,o=xu({mode:"visible",children:o.children},T),h=ls(h,T,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,ma(i,e.child,null,a),o=i.child,o.memoizedState=mf(a),o.childLanes=gf(e,v,a),i.memoizedState=df,i=h);else if(rr(i),Jf(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var k=v.dgst;v=k,o=Error(s(419)),o.stack="",o.digest=v,wo({value:o,source:null,stack:null}),i=yf(e,i,a)}else if(Oe||Ro(e,i,a,!1),v=(a&e.childLanes)!==0,Oe||v){if(v=te,v!==null&&(o=a&-a,o=(o&42)!==0?1:Qi(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ia(e,o),mn(v,e,o),bp;T.data==="$?"||Pf(),i=yf(e,i,a)}else T.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,le=Ln(T.nextSibling),tn=i,Ht=!0,hs=null,Wn=!1,e!==null&&(Sn[bn++]=wi,Sn[bn++]=Ri,Sn[bn++]=us,wi=e.id,Ri=e.overflow,us=i),i=pf(i,o.children),i.flags|=4096);return i}return h?(sr(),h=o.fallback,T=i.mode,b=e.child,k=b.sibling,o=bi(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,k!==null?h=bi(k,h):(h=ls(h,T,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,T=e.child.memoizedState,T===null?T=mf(a):(b=T.cachePool,b!==null?(k=Se._currentValue,b=b.parent!==k?{parent:k,pool:k}:b):b=vg(),T={baseLanes:T.baseLanes|a,cachePool:b}),h.memoizedState=T,h.childLanes=gf(e,v,a),i.memoizedState=df,o):(rr(i),a=e.child,e=a.sibling,a=bi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function pf(e,i){return i=xu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function xu(e,i){return e=un(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yf(e,i,a){return ma(i,e.child,null,a),e=pf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function xp(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),xh(e.return,i,a)}function _f(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Pp(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(Le(e,i,o.children,a),o=be.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xp(e,a,i);else if(e.tag===19)xp(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(et(be,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Ou(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),_f(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ou(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}_f(i,!0,a,null,f);break;case"together":_f(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ni(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),cr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ro(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=bi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=bi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function vf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&mu(e)))}function VE(e,i,a){switch(i.tag){case 3:Ut(i,i.stateNode.containerInfo),Wi(i,Se,e.memoizedState.cache),bo();break;case 27:case 5:Nn(i);break;case 4:Ut(i,i.stateNode.containerInfo);break;case 10:Wi(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(rr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Vp(e,i,a):(rr(i),e=Ni(e,i,a),e!==null?e.sibling:null);rr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ro(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Pp(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),et(be,be.current),o)break;return null;case 22:case 23:return i.lanes=0,Ip(e,i,a);case 24:Wi(i,Se,e.memoizedState.cache)}return Ni(e,i,a)}function Up(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Oe=!0;else{if(!vf(e,a)&&(i.flags&128)===0)return Oe=!1,VE(e,i,a);Oe=(e.flags&131072)!==0}else Oe=!1,Ht&&(i.flags&1048576)!==0&&fg(i,du,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Ch(o)?(e=ys(o,e),i.tag=1,i=Np(null,i,o,e,a)):(i.tag=0,i=ff(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===ut){i.tag=11,i=wp(null,i,o,e,a);break t}else if(h===O){i.tag=14,i=Rp(null,i,o,e,a);break t}}throw i=re(o)||o,Error(s(306,i,""))}}return i;case 0:return ff(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ys(o,i.pendingProps),Np(e,i,o,h,a);case 3:t:{if(Ut(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,jh(e,i),Vo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,Wi(i,Se,o),o!==f.cache&&Ph(i,[Se],a,!0),Mo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Mp(e,i,o,a);break t}else if(o!==h){h=En(Error(s(424)),i),wo(h),i=Mp(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=Ln(e.firstChild),tn=i,Ht=!0,hs=null,Wn=!0,a=mp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(bo(),o===h){i=Ni(e,i,a);break t}Le(e,i,o,a)}i=i.child}return i;case 26:return Vu(e,i),e===null?(a=By(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ht||(a=i.type,e=i.pendingProps,o=Yu(_t.current).createElement(a),o[Te]=i,o[ge]=e,ze(o,a,e),he(o),i.stateNode=o):i.memoizedState=By(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Nn(i),e===null&&Ht&&(o=i.stateNode=Ly(i.type,i.pendingProps,_t.current),tn=i,Wn=!0,h=le,mr(i.type)?(Wf=h,le=Ln(o.firstChild)):le=h),Le(e,i,i.pendingProps.children,a),Vu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ht&&((h=o=le)&&(o=oA(o,i.type,i.pendingProps,Wn),o!==null?(i.stateNode=o,tn=i,le=Ln(o.firstChild),Wn=!1,h=!0):h=!1),h||fs(i)),Nn(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,Xf(h,f)?o=null:v!==null&&Xf(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Kh(e,i,wE,null,null,a),el._currentValue=h),Vu(e,i),Le(e,i,o,a),i.child;case 6:return e===null&&Ht&&((e=a=le)&&(a=lA(a,i.pendingProps,Wn),a!==null?(i.stateNode=a,tn=i,le=null,e=!0):e=!1),e||fs(i)),null;case 13:return Vp(e,i,a);case 4:return Ut(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=ma(i,null,o,a):Le(e,i,o,a),i.child;case 11:return wp(e,i,i.type,i.pendingProps,a);case 7:return Le(e,i,i.pendingProps,a),i.child;case 8:return Le(e,i,i.pendingProps.children,a),i.child;case 12:return Le(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Wi(i,i.type,o.value),Le(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,ms(i),h=Fe(h),o=o(h),i.flags|=1,Le(e,i,o,a),i.child;case 14:return Rp(e,i,i.type,i.pendingProps,a);case 15:return Cp(e,i,i.type,i.pendingProps,a);case 19:return Pp(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=xu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=bi(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Ip(e,i,a);case 24:return ms(i),o=Fe(Se),e===null?(h=kh(),h===null&&(h=te,f=Uh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},Bh(i),Wi(i,Se,h)):((e.lanes&a)!==0&&(jh(e,i),Vo(i,null,null,a),Mo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Wi(i,Se,o)):(o=f.cache,Wi(i,Se,o),o!==h.cache&&Ph(i,[Se],a,!0))),Le(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Mi(e){e.flags|=4}function Lp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fy(i)){if(i=wn.current,i!==null&&((zt&4194048)===zt?ti!==null:(zt&62914560)!==zt&&(zt&536870912)===0||i!==ti))throw Oo=zh,Tg;e.flags|=8192}}function Pu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?no():536870912,e.lanes|=i,_a|=i)}function Bo(e,i){if(!Ht)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function se(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function xE(e,i,a){var o=i.pendingProps;switch(Nh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(i),null;case 1:return se(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ii(Se),He(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(So(i)?Mi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,gg())),se(i),null;case 26:return a=i.memoizedState,e===null?(Mi(i),a!==null?(se(i),Lp(i,a)):(se(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Mi(i),se(i),Lp(i,a)):(se(i),i.flags&=-16777217):(e.memoizedProps!==o&&Mi(i),se(i),i.flags&=-16777217),null;case 27:hi(i),a=_t.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Mi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return se(i),null}e=mt.current,So(i)?dg(i):(e=Ly(h,o,a),i.stateNode=e,Mi(i))}return se(i),null;case 5:if(hi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Mi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return se(i),null}if(e=mt.current,So(i))dg(i);else{switch(h=Yu(_t.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Te]=i,e[ge]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(ze(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Mi(i)}}return se(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Mi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=_t.current,So(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=tn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Te]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Oy(e.nodeValue,a)),e||fs(i)}else e=Yu(e).createTextNode(o),e[Te]=i,i.stateNode=e}return se(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=So(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Te]=i}else bo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;se(i),h=!1}else h=gg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Oi(i),i):(Oi(i),null)}if(Oi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Pu(i,i.updateQueue),se(i),null;case 4:return He(),e===null&&Gf(i.stateNode.containerInfo),se(i),null;case 10:return Ii(i.type),se(i),null;case 19:if(rt(be),h=i.memoizedState,h===null)return se(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)Bo(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Ou(e),f!==null){for(i.flags|=128,Bo(h,!1),e=f.updateQueue,i.updateQueue=e,Pu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)hg(a,e),a=a.sibling;return et(be,be.current&1|2),i.child}e=e.sibling}h.tail!==null&&gn()>ku&&(i.flags|=128,o=!0,Bo(h,!1),i.lanes=4194304)}else{if(!o)if(e=Ou(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Pu(i,e),Bo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ht)return se(i),null}else 2*gn()-h.renderingStartTime>ku&&a!==536870912&&(i.flags|=128,o=!0,Bo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=gn(),i.sibling=null,e=be.current,et(be,o?e&1|2:e&1),i):(se(i),null);case 22:case 23:return Oi(i),Fh(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(se(i),i.subtreeFlags&6&&(i.flags|=8192)):se(i),a=i.updateQueue,a!==null&&Pu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&rt(gs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ii(Se),se(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function PE(e,i){switch(Nh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ii(Se),He(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return hi(i),null;case 13:if(Oi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));bo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return rt(be),null;case 4:return He(),null;case 10:return Ii(i.type),null;case 22:case 23:return Oi(i),Fh(),e!==null&&rt(gs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Ii(Se),null;case 25:return null;default:return null}}function kp(e,i){switch(Nh(i),i.tag){case 3:Ii(Se),He();break;case 26:case 27:case 5:hi(i);break;case 4:He();break;case 13:Oi(i);break;case 19:rt(be);break;case 10:Ii(i.type);break;case 22:case 23:Oi(i),Fh(),e!==null&&rt(gs);break;case 24:Ii(Se)}}function jo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){Wt(i,i.return,T)}}function ar(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var b=a,k=T;try{k()}catch(G){Wt(h,b,G)}}}o=o.next}while(o!==f)}}catch(G){Wt(i,i.return,G)}}function zp(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Rg(i,a)}catch(o){Wt(e,e.return,o)}}}function Bp(e,i,a){a.props=ys(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Wt(e,i,o)}}function qo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Wt(e,i,h)}}function ei(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Wt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Wt(e,i,h)}else a.current=null}function jp(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Wt(e,e.return,h)}}function Tf(e,i,a){try{var o=e.stateNode;nA(o,e.type,a,i),o[ge]=i}catch(h){Wt(e,e.return,h)}}function qp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mr(e.type)||e.tag===4}function Ef(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||qp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Af(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ku));else if(o!==4&&(o===27&&mr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Af(e,i,a),e=e.sibling;e!==null;)Af(e,i,a),e=e.sibling}function Uu(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&mr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Uu(e,i,a),e=e.sibling;e!==null;)Uu(e,i,a),e=e.sibling}function Hp(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ze(i,o,a),i[Te]=e,i[ge]=a}catch(f){Wt(e,e.return,f)}}var Vi=!1,de=!1,Sf=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function UE(e,i){if(e=e.containerInfo,Kf=tc,e=eg(e),Th(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,T=-1,b=-1,k=0,G=0,Y=e,z=null;e:for(;;){for(var B;Y!==a||h!==0&&Y.nodeType!==3||(T=v+h),Y!==f||o!==0&&Y.nodeType!==3||(b=v+o),Y.nodeType===3&&(v+=Y.nodeValue.length),(B=Y.firstChild)!==null;)z=Y,Y=B;for(;;){if(Y===e)break e;if(z===a&&++k===h&&(T=v),z===f&&++G===o&&(b=v),(B=Y.nextSibling)!==null)break;Y=z,z=Y.parentNode}Y=B}a=T===-1||b===-1?null:{start:T,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yf={focusedElem:e,selectionRange:a},tc=!1,Ne=i;Ne!==null;)if(i=Ne,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ne=e;else for(;Ne!==null;){switch(i=Ne,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Et=ys(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(gt){Wt(a,a.return,gt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Zf(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ne=e;break}Ne=i.return}}function Fp(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:or(e,a),o&4&&jo(5,a);break;case 1:if(or(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Wt(a,a.return,v)}else{var h=ys(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Wt(a,a.return,v)}}o&64&&zp(a),o&512&&qo(a,a.return);break;case 3:if(or(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Rg(e,i)}catch(v){Wt(a,a.return,v)}}break;case 27:i===null&&o&4&&Hp(a);case 26:case 5:or(e,a),i===null&&o&4&&jp(a),o&512&&qo(a,a.return);break;case 12:or(e,a);break;case 13:or(e,a),o&4&&Yp(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=FE.bind(null,a),uA(e,a))));break;case 22:if(o=a.memoizedState!==null||Vi,!o){i=i!==null&&i.memoizedState!==null||de,h=Vi;var f=de;Vi=o,(de=i)&&!f?lr(e,a,(a.subtreeFlags&8772)!==0):or(e,a),Vi=h,de=f}break;case 30:break;default:or(e,a)}}function Qp(e){var i=e.alternate;i!==null&&(e.alternate=null,Qp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Xi(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,nn=!1;function xi(e,i,a){for(a=a.child;a!==null;)Kp(e,i,a),a=a.sibling}function Kp(e,i,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:de||ei(a,i),xi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:de||ei(a,i);var o=ie,h=nn;mr(a.type)&&(ie=a.stateNode,nn=!1),xi(e,i,a),Zo(a.stateNode),ie=o,nn=h;break;case 5:de||ei(a,i);case 6:if(o=ie,h=nn,ie=null,xi(e,i,a),ie=o,nn=h,ie!==null)if(nn)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(f){Wt(a,i,f)}else try{ie.removeChild(a.stateNode)}catch(f){Wt(a,i,f)}break;case 18:ie!==null&&(nn?(e=ie,Py(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sl(e)):Py(ie,a.stateNode));break;case 4:o=ie,h=nn,ie=a.stateNode.containerInfo,nn=!0,xi(e,i,a),ie=o,nn=h;break;case 0:case 11:case 14:case 15:de||ar(2,a,i),de||ar(4,a,i),xi(e,i,a);break;case 1:de||(ei(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Bp(a,i,o)),xi(e,i,a);break;case 21:xi(e,i,a);break;case 22:de=(o=de)||a.memoizedState!==null,xi(e,i,a),de=o;break;default:xi(e,i,a)}}function Yp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sl(e)}catch(a){Wt(i,i.return,a)}}function LE(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Gp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Gp),i;default:throw Error(s(435,e.tag))}}function bf(e,i){var a=LE(e);i.forEach(function(o){var h=QE.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function cn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(mr(T.type)){ie=T.stateNode,nn=!1;break t}break;case 5:ie=T.stateNode,nn=!1;break t;case 3:case 4:ie=T.stateNode.containerInfo,nn=!0;break t}T=T.return}if(ie===null)throw Error(s(160));Kp(f,v,h),ie=null,nn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Xp(i,e),i=i.sibling}var Un=null;function Xp(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cn(i,e),hn(e),o&4&&(ar(3,e,e.return),jo(3,e),ar(5,e,e.return));break;case 1:cn(i,e),hn(e),o&512&&(de||a===null||ei(a,a.return)),o&64&&Vi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Un;if(cn(i,e),hn(e),o&512&&(de||a===null||ei(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Qr]||f[Te]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),ze(f,o,a),f[Te]=e,he(f),o=f;break t;case"link":var v=Hy("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(f=v[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}f=h.createElement(o),ze(f,o,a),h.head.appendChild(f);break;case"meta":if(v=Hy("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(f=v[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}f=h.createElement(o),ze(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Te]=e,he(f),o=f}e.stateNode=o}else Gy(h,e.type,e.stateNode);else e.stateNode=qy(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Gy(h,e.type,e.stateNode):qy(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Tf(e,e.memoizedProps,a.memoizedProps)}break;case 27:cn(i,e),hn(e),o&512&&(de||a===null||ei(a,a.return)),a!==null&&o&4&&Tf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(cn(i,e),hn(e),o&512&&(de||a===null||ei(a,a.return)),e.flags&32){h=e.stateNode;try{yn(h,"")}catch(B){Wt(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Tf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Sf=!0);break;case 6:if(cn(i,e),hn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){Wt(e,e.return,B)}}break;case 3:if(Zu=null,h=Un,Un=Xu(i.containerInfo),cn(i,e),Un=h,hn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{sl(i.containerInfo)}catch(B){Wt(e,e.return,B)}Sf&&(Sf=!1,$p(e));break;case 4:o=Un,Un=Xu(e.stateNode.containerInfo),cn(i,e),hn(e),Un=o;break;case 12:cn(i,e),hn(e);break;case 13:cn(i,e),hn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Of=gn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,k=Vi,G=de;if(Vi=k||h,de=G||b,cn(i,e),de=G,Vi=k,hn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||Vi||de||_s(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=b.stateNode;var Y=b.memoizedProps.style,z=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Wt(b,b.return,B)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){Wt(b,b.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,bf(e,a))));break;case 19:cn(i,e),hn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bf(e,o)));break;case 30:break;case 21:break;default:cn(i,e),hn(e)}}function hn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(qp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Ef(e);Uu(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(yn(v,""),a.flags&=-33);var T=Ef(e);Uu(e,T,v);break;case 3:case 4:var b=a.stateNode.containerInfo,k=Ef(e);Af(e,k,b);break;default:throw Error(s(161))}}catch(G){Wt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function $p(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;$p(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function or(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Fp(e,i.alternate,i),i=i.sibling}function _s(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ar(4,i,i.return),_s(i);break;case 1:ei(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Bp(i,i.return,a),_s(i);break;case 27:Zo(i.stateNode);case 26:case 5:ei(i,i.return),_s(i);break;case 22:i.memoizedState===null&&_s(i);break;case 30:_s(i);break;default:_s(i)}e=e.sibling}}function lr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:lr(h,f,a),jo(4,f);break;case 1:if(lr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(k){Wt(o,o.return,k)}if(o=f,h=o.updateQueue,h!==null){var T=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)wg(b[h],T)}catch(k){Wt(o,o.return,k)}}a&&v&64&&zp(f),qo(f,f.return);break;case 27:Hp(f);case 26:case 5:lr(h,f,a),a&&o===null&&v&4&&jp(f),qo(f,f.return);break;case 12:lr(h,f,a);break;case 13:lr(h,f,a),a&&v&4&&Yp(h,f);break;case 22:f.memoizedState===null&&lr(h,f,a),qo(f,f.return);break;case 30:break;default:lr(h,f,a)}i=i.sibling}}function wf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Co(a))}function Rf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Co(e))}function ni(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zp(e,i,a,o),i=i.sibling}function Zp(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ni(e,i,a,o),h&2048&&jo(9,i);break;case 1:ni(e,i,a,o);break;case 3:ni(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Co(e)));break;case 12:if(h&2048){ni(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,T=f.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Wt(i,i.return,b)}}else ni(e,i,a,o);break;case 13:ni(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?ni(e,i,a,o):Ho(e,i):f._visibility&2?ni(e,i,a,o):(f._visibility|=2,ga(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&wf(v,i);break;case 24:ni(e,i,a,o),h&2048&&Rf(i.alternate,i);break;default:ni(e,i,a,o)}}function ga(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,T=a,b=o,k=v.flags;switch(v.tag){case 0:case 11:case 15:ga(f,v,T,b,h),jo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?ga(f,v,T,b,h):Ho(f,v):(G._visibility|=2,ga(f,v,T,b,h)),h&&k&2048&&wf(v.alternate,v);break;case 24:ga(f,v,T,b,h),h&&k&2048&&Rf(v.alternate,v);break;default:ga(f,v,T,b,h)}i=i.sibling}}function Ho(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:Ho(a,o),h&2048&&wf(o.alternate,o);break;case 24:Ho(a,o),h&2048&&Rf(o.alternate,o);break;default:Ho(a,o)}i=i.sibling}}var Go=8192;function pa(e){if(e.subtreeFlags&Go)for(e=e.child;e!==null;)Jp(e),e=e.sibling}function Jp(e){switch(e.tag){case 26:pa(e),e.flags&Go&&e.memoizedState!==null&&AA(Un,e.memoizedState,e.memoizedProps);break;case 5:pa(e);break;case 3:case 4:var i=Un;Un=Xu(e.stateNode.containerInfo),pa(e),Un=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Go,Go=16777216,pa(e),Go=i):pa(e));break;default:pa(e)}}function Wp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Fo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ne=o,ey(o,e)}Wp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ty(e),e=e.sibling}function ty(e){switch(e.tag){case 0:case 11:case 15:Fo(e),e.flags&2048&&ar(9,e,e.return);break;case 3:Fo(e);break;case 12:Fo(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Lu(e)):Fo(e);break;default:Fo(e)}}function Lu(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ne=o,ey(o,e)}Wp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ar(8,i,i.return),Lu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Lu(i));break;default:Lu(i)}e=e.sibling}}function ey(e,i){for(;Ne!==null;){var a=Ne;switch(a.tag){case 0:case 11:case 15:ar(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Co(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ne=o;else t:for(a=e;Ne!==null;){o=Ne;var h=o.sibling,f=o.return;if(Qp(o),o===a){Ne=null;break t}if(h!==null){h.return=f,Ne=h;break t}Ne=f}}}var kE={getCacheForType:function(e){var i=Fe(Se),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},zE=typeof WeakMap=="function"?WeakMap:Map,Kt=0,te=null,Mt=null,zt=0,Yt=0,fn=null,ur=!1,ya=!1,Cf=!1,Pi=0,ue=0,cr=0,vs=0,If=0,Rn=0,_a=0,Qo=null,rn=null,Df=!1,Of=0,ku=1/0,zu=null,hr=null,ke=0,fr=null,va=null,Ta=0,Nf=0,Mf=null,ny=null,Ko=0,Vf=null;function dn(){if((Kt&2)!==0&&zt!==0)return zt&-zt;if(H.T!==null){var e=oa;return e!==0?e:Bf()}return Ki()}function iy(){Rn===0&&(Rn=(zt&536870912)===0||Ht?eo():536870912);var e=wn.current;return e!==null&&(e.flags|=32),Rn}function mn(e,i,a){(e===te&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(Ea(e,0),dr(e,zt,Rn,!1)),di(e,a),((Kt&2)===0||e!==te)&&(e===te&&((Kt&2)===0&&(vs|=a),ue===4&&dr(e,zt,Rn,!1)),ii(e))}function ry(e,i,a){if((Kt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Fr(e,i),h=o?qE(e,i):Uf(e,i,!0),f=o;do{if(h===0){ya&&!o&&dr(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!BE(a)){h=Uf(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=e;h=Qo;var b=T.current.memoizedState.isDehydrated;if(b&&(Ea(T,v).flags|=256),v=Uf(T,v,!1),v!==2){if(Cf&&!b){T.errorRecoveryDisabledLanes|=f,vs|=f,h=4;break t}f=rn,rn=h,f!==null&&(rn===null?rn=f:rn.push.apply(rn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ea(e,0),dr(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:dr(o,i,Rn,!ur);break t;case 2:rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Of+300-gn(),10<h)){if(dr(o,i,Rn,!ur),ks(o,0,!0)!==0)break t;o.timeoutHandle=Vy(sy.bind(null,o,a,rn,zu,Df,i,Rn,vs,_a,ur,f,2,-0,0),h);break t}sy(o,a,rn,zu,Df,i,Rn,vs,_a,ur,f,0,-0,0)}}break}while(!0);ii(e)}function sy(e,i,a,o,h,f,v,T,b,k,G,Y,z,B){if(e.timeoutHandle=-1,Y=i.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(tl={stylesheets:null,count:0,unsuspend:EA},Jp(i),Y=SA(),Y!==null)){e.cancelPendingCommit=Y(fy.bind(null,e,i,f,a,o,h,v,T,b,G,1,z,B)),dr(e,f,v,!k);return}fy(e,i,f,a,o,h,v,T,b)}function BE(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!ln(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function dr(e,i,a,o){i&=~If,i&=~vs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Ge(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&qn(e,a,i)}function Bu(){return(Kt&6)===0?(Yo(0),!1):!0}function xf(){if(Mt!==null){if(Yt===0)var e=Mt.return;else e=Mt,Ci=ds=null,$h(e),da=null,ko=0,e=Mt;for(;e!==null;)kp(e.alternate,e),e=e.return;Mt=null}}function Ea(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,rA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),xf(),te=e,Mt=a=bi(e.current,null),zt=i,Yt=0,fn=null,ur=!1,ya=Fr(e,i),Cf=!1,_a=Rn=If=vs=cr=ue=0,rn=Qo=null,Df=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Ge(o),f=1<<h;i|=e[h],o&=~f}return Pi=i,lu(),a}function ay(e,i){It=null,H.H=Cu,i===Do||i===yu?(i=Sg(),Yt=3):i===Tg?(i=Sg(),Yt=4):Yt=i===bp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fn=i,Mt===null&&(ue=1,Mu(e,En(i,e.current)))}function oy(){var e=H.H;return H.H=Cu,e===null?Cu:e}function ly(){var e=H.A;return H.A=kE,e}function Pf(){ue=4,ur||(zt&4194048)!==zt&&wn.current!==null||(ya=!0),(cr&134217727)===0&&(vs&134217727)===0||te===null||dr(te,zt,Rn,!1)}function Uf(e,i,a){var o=Kt;Kt|=2;var h=oy(),f=ly();(te!==e||zt!==i)&&(zu=null,Ea(e,i)),i=!1;var v=ue;t:do try{if(Yt!==0&&Mt!==null){var T=Mt,b=fn;switch(Yt){case 8:xf(),v=6;break t;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var k=Yt;if(Yt=0,fn=null,Aa(e,T,b,k),a&&ya){v=0;break t}break;default:k=Yt,Yt=0,fn=null,Aa(e,T,b,k)}}jE(),v=ue;break}catch(G){ay(e,G)}while(!0);return i&&e.shellSuspendCounter++,Ci=ds=null,Kt=o,H.H=h,H.A=f,Mt===null&&(te=null,zt=0,lu()),v}function jE(){for(;Mt!==null;)uy(Mt)}function qE(e,i){var a=Kt;Kt|=2;var o=oy(),h=ly();te!==e||zt!==i?(zu=null,ku=gn()+500,Ea(e,i)):ya=Fr(e,i);t:do try{if(Yt!==0&&Mt!==null){i=Mt;var f=fn;e:switch(Yt){case 1:Yt=0,fn=null,Aa(e,i,f,1);break;case 2:case 9:if(Eg(f)){Yt=0,fn=null,cy(i);break}i=function(){Yt!==2&&Yt!==9||te!==e||(Yt=7),ii(e)},f.then(i,i);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Eg(f)?(Yt=0,fn=null,cy(i)):(Yt=0,fn=null,Aa(e,i,f,7));break;case 5:var v=null;switch(Mt.tag){case 26:v=Mt.memoizedState;case 5:case 27:var T=Mt;if(!v||Fy(v)){Yt=0,fn=null;var b=T.sibling;if(b!==null)Mt=b;else{var k=T.return;k!==null?(Mt=k,ju(k)):Mt=null}break e}}Yt=0,fn=null,Aa(e,i,f,5);break;case 6:Yt=0,fn=null,Aa(e,i,f,6);break;case 8:xf(),ue=6;break t;default:throw Error(s(462))}}HE();break}catch(G){ay(e,G)}while(!0);return Ci=ds=null,H.H=o,H.A=h,Kt=a,Mt!==null?0:(te=null,zt=0,lu(),ue)}function HE(){for(;Mt!==null&&!Za();)uy(Mt)}function uy(e){var i=Up(e.alternate,e,Pi);e.memoizedProps=e.pendingProps,i===null?ju(e):Mt=i}function cy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Op(a,i,i.pendingProps,i.type,void 0,zt);break;case 11:i=Op(a,i,i.pendingProps,i.type.render,i.ref,zt);break;case 5:$h(i);default:kp(a,i),i=Mt=hg(i,Pi),i=Up(a,i,Pi)}e.memoizedProps=e.pendingProps,i===null?ju(e):Mt=i}function Aa(e,i,a,o){Ci=ds=null,$h(i),da=null,ko=0;var h=i.return;try{if(ME(e,h,i,a,zt)){ue=1,Mu(e,En(a,e.current)),Mt=null;return}}catch(f){if(h!==null)throw Mt=h,f;ue=1,Mu(e,En(a,e.current)),Mt=null;return}i.flags&32768?(Ht||o===1?e=!0:ya||(zt&536870912)!==0?e=!1:(ur=e=!0,(o===2||o===9||o===3||o===6)&&(o=wn.current,o!==null&&o.tag===13&&(o.flags|=16384))),hy(i,e)):ju(i)}function ju(e){var i=e;do{if((i.flags&32768)!==0){hy(i,ur);return}e=i.return;var a=xE(i.alternate,i,Pi);if(a!==null){Mt=a;return}if(i=i.sibling,i!==null){Mt=i;return}Mt=i=e}while(i!==null);ue===0&&(ue=5)}function hy(e,i){do{var a=PE(e.alternate,e);if(a!==null){a.flags&=32767,Mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=a}while(e!==null);ue=6,Mt=null}function fy(e,i,a,o,h,f,v,T,b){e.cancelPendingCommit=null;do qu();while(ke!==0);if((Kt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=wh,io(e,a,f,v,T,b),e===te&&(Mt=te=null,zt=0),va=i,fr=e,Ta=a,Nf=f,Mf=h,ny=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,KE(jr,function(){return yy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=it.p,it.p=2,v=Kt,Kt|=4;try{UE(e,i,a)}finally{Kt=v,it.p=h,H.T=o}}ke=1,dy(),my(),gy()}}function dy(){if(ke===1){ke=0;var e=fr,i=va,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=it.p;it.p=2;var h=Kt;Kt|=4;try{Xp(i,e);var f=Yf,v=eg(e.containerInfo),T=f.focusedElem,b=f.selectionRange;if(v!==T&&T&&T.ownerDocument&&tg(T.ownerDocument.documentElement,T)){if(b!==null&&Th(T)){var k=b.start,G=b.end;if(G===void 0&&(G=k),"selectionStart"in T)T.selectionStart=k,T.selectionEnd=Math.min(G,T.value.length);else{var Y=T.ownerDocument||document,z=Y&&Y.defaultView||window;if(z.getSelection){var B=z.getSelection(),Et=T.textContent.length,gt=Math.min(b.start,Et),Jt=b.end===void 0?gt:Math.min(b.end,Et);!B.extend&&gt>Jt&&(v=Jt,Jt=gt,gt=v);var P=Wm(T,gt),N=Wm(T,Jt);if(P&&N&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var L=Y.createRange();L.setStart(P.node,P.offset),B.removeAllRanges(),gt>Jt?(B.addRange(L),B.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),B.addRange(L))}}}}for(Y=[],B=T;B=B.parentNode;)B.nodeType===1&&Y.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Y.length;T++){var K=Y[T];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}tc=!!Kf,Yf=Kf=null}finally{Kt=h,it.p=o,H.T=a}}e.current=i,ke=2}}function my(){if(ke===2){ke=0;var e=fr,i=va,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=it.p;it.p=2;var h=Kt;Kt|=4;try{Fp(e,i.alternate,i)}finally{Kt=h,it.p=o,H.T=a}}ke=3}}function gy(){if(ke===4||ke===3){ke=0,Ll();var e=fr,i=va,a=Ta,o=ny;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ke=5:(ke=0,va=fr=null,py(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(hr=null),zs(a),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=it.p,it.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var T=o[v];f(T.value,{componentStack:T.stack})}}finally{H.T=i,it.p=h}}(Ta&3)!==0&&qu(),ii(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Vf?Ko++:(Ko=0,Vf=e):Ko=0,Yo(0)}}function py(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Co(i)))}function qu(e){return dy(),my(),gy(),yy()}function yy(){if(ke!==5)return!1;var e=fr,i=Nf;Nf=0;var a=zs(Ta),o=H.T,h=it.p;try{it.p=32>a?32:a,H.T=null,a=Mf,Mf=null;var f=fr,v=Ta;if(ke=0,va=fr=null,Ta=0,(Kt&6)!==0)throw Error(s(331));var T=Kt;if(Kt|=4,ty(f.current),Zp(f,f.current,v,a),Kt=T,Yo(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(oe,f)}catch{}return!0}finally{it.p=h,H.T=o,py(e,i)}}function _y(e,i,a){i=En(a,i),i=hf(e.stateNode,i,2),e=nr(e,i,2),e!==null&&(di(e,2),ii(e))}function Wt(e,i,a){if(e.tag===3)_y(e,e,a);else for(;i!==null;){if(i.tag===3){_y(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(hr===null||!hr.has(o))){e=En(a,e),a=Ap(2),o=nr(i,a,2),o!==null&&(Sp(a,o,i,e),di(o,2),ii(o));break}}i=i.return}}function Lf(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new zE;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Cf=!0,h.add(a),e=GE.bind(null,e,i,a),i.then(e,e))}function GE(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(zt&a)===a&&(ue===4||ue===3&&(zt&62914560)===zt&&300>gn()-Of?(Kt&2)===0&&Ea(e,0):If|=a,_a===zt&&(_a=0)),ii(e)}function vy(e,i){i===0&&(i=no()),e=ia(e,i),e!==null&&(di(e,i),ii(e))}function FE(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),vy(e,a)}function QE(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),vy(e,a)}function KE(e,i){return zr(e,i)}var Hu=null,Sa=null,kf=!1,Gu=!1,zf=!1,Ts=0;function ii(e){e!==Sa&&e.next===null&&(Sa===null?Hu=Sa=e:Sa=Sa.next=e),Gu=!0,kf||(kf=!0,XE())}function Yo(e,i){if(!zf&&Gu){zf=!0;do for(var a=!1,o=Hu;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,T=o.pingedLanes;f=(1<<31-Ge(42|e)+1)-1,f&=h&~(v&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Sy(o,f))}else f=zt,f=ks(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Fr(o,f)||(a=!0,Sy(o,f));o=o.next}while(a);zf=!1}}function YE(){Ty()}function Ty(){Gu=kf=!1;var e=0;Ts!==0&&(iA()&&(e=Ts),Ts=0);for(var i=gn(),a=null,o=Hu;o!==null;){var h=o.next,f=Ey(o,i);f===0?(o.next=null,a===null?Hu=h:a.next=h,h===null&&(Sa=a)):(a=o,(e!==0||(f&3)!==0)&&(Gu=!0)),o=h}Yo(e)}function Ey(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Ge(f),T=1<<v,b=h[v];b===-1?((T&a)===0||(T&o)!==0)&&(h[v]=to(T,i)):b<=i&&(e.expiredLanes|=T),f&=~T}if(i=te,a=zt,a=ks(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Br(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Fr(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Br(o),zs(a)){case 2:case 8:a=Us;break;case 32:a=jr;break;case 268435456:a=Ls;break;default:a=jr}return o=Ay.bind(null,e),a=zr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Br(o),e.callbackPriority=2,e.callbackNode=null,2}function Ay(e,i){if(ke!==0&&ke!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(qu()&&e.callbackNode!==a)return null;var o=zt;return o=ks(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(ry(e,o,i),Ey(e,gn()),e.callbackNode!=null&&e.callbackNode===a?Ay.bind(null,e):null)}function Sy(e,i){if(qu())return null;ry(e,i,!0)}function XE(){sA(function(){(Kt&6)!==0?zr(Ja,YE):Ty()})}function Bf(){return Ts===0&&(Ts=eo()),Ts}function by(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fs(""+e)}function wy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function $E(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=by((h[ge]||null).action),v=o.submitter;v&&(i=(i=v[ge]||null)?by(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var T=new Qs("action","action",null,o,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ts!==0){var b=v?wy(h,v):new FormData(h);af(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(T.preventDefault(),b=v?wy(h,v):new FormData(h),af(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var jf=0;jf<bh.length;jf++){var qf=bh[jf],ZE=qf.toLowerCase(),JE=qf[0].toUpperCase()+qf.slice(1);Pn(ZE,"on"+JE)}Pn(rg,"onAnimationEnd"),Pn(sg,"onAnimationIteration"),Pn(ag,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(gE,"onTransitionRun"),Pn(pE,"onTransitionStart"),Pn(yE,"onTransitionCancel"),Pn(og,"onTransitionEnd"),gi("onMouseEnter",["mouseout","mouseover"]),gi("onMouseLeave",["mouseout","mouseover"]),gi("onPointerEnter",["pointerout","pointerover"]),gi("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xo));function Ry(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var T=o[v],b=T.instance,k=T.currentTarget;if(T=T.listener,b!==f&&h.isPropagationStopped())break t;f=T,h.currentTarget=k;try{f(h)}catch(G){Nu(G)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(T=o[v],b=T.instance,k=T.currentTarget,T=T.listener,b!==f&&h.isPropagationStopped())break t;f=T,h.currentTarget=k;try{f(h)}catch(G){Nu(G)}h.currentTarget=null,f=b}}}}function Vt(e,i){var a=i[so];a===void 0&&(a=i[so]=new Set);var o=e+"__bubble";a.has(o)||(Cy(i,e,2,!1),a.add(o))}function Hf(e,i,a){var o=0;i&&(o|=4),Cy(a,e,o,i)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Gf(e){if(!e[Fu]){e[Fu]=!0,ao.forEach(function(a){a!=="selectionchange"&&(WE.has(a)||Hf(a,!1,e),Hf(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Fu]||(i[Fu]=!0,Hf("selectionchange",!1,i))}}function Cy(e,i,a,o){switch(Zy(i)){case 2:var h=RA;break;case 8:h=CA;break;default:h=rd}a=h.bind(null,i,a,e),h=void 0,!vn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function Ff(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=mi(T),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}T=T.parentNode}}o=o.return}Kl(function(){var k=f,G=_n(a),Y=[];t:{var z=lg.get(e);if(z!==void 0){var B=Qs,Et=e;switch(e){case"keypress":if(Yn(a)===0)break t;case"keydown":case"keyup":B=Js;break;case"focusin":Et="focus",B=Xs;break;case"focusout":Et="blur",B=Xs;break;case"beforeblur":case"afterblur":B=Xs;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=eu;break;case rg:case sg:case ag:B=$s;break;case og:B=iu;break;case"scroll":case"scrollend":B=Yl;break;case"wheel":B=Ws;break;case"copy":case"cut":case"paste":B=Zs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=vo;break;case"toggle":case"beforetoggle":B=su}var gt=(i&4)!==0,Jt=!gt&&(e==="scroll"||e==="scrollend"),P=gt?z!==null?z+"Capture":null:z;gt=[];for(var N=k,L;N!==null;){var K=N;if(L=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||L===null||P===null||(K=Wr(N,P),K!=null&&gt.push($o(N,K,L))),Jt)break;N=N.return}0<gt.length&&(z=new B(z,Et,null,a,G),Y.push({event:z,listeners:gt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==_i&&(Et=a.relatedTarget||a.fromElement)&&(mi(Et)||Et[pn]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(Et=a.relatedTarget||a.toElement,B=k,Et=Et?mi(Et):null,Et!==null&&(Jt=c(Et),gt=Et.tag,Et!==Jt||gt!==5&&gt!==27&&gt!==6)&&(Et=null)):(B=null,Et=k),B!==Et)){if(gt=Tn,K="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(gt=vo,K="onPointerLeave",P="onPointerEnter",N="pointer"),Jt=B==null?z:Gn(B),L=Et==null?z:Gn(Et),z=new gt(K,N+"leave",B,a,G),z.target=Jt,z.relatedTarget=L,K=null,mi(G)===k&&(gt=new gt(P,N+"enter",Et,a,G),gt.target=L,gt.relatedTarget=Jt,K=gt),Jt=K,B&&Et)e:{for(gt=B,P=Et,N=0,L=gt;L;L=ba(L))N++;for(L=0,K=P;K;K=ba(K))L++;for(;0<N-L;)gt=ba(gt),N--;for(;0<L-N;)P=ba(P),L--;for(;N--;){if(gt===P||P!==null&&gt===P.alternate)break e;gt=ba(gt),P=ba(P)}gt=null}else gt=null;B!==null&&Iy(Y,z,B,gt,!1),Et!==null&&Jt!==null&&Iy(Y,Jt,Et,gt,!0)}}t:{if(z=k?Gn(k):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var lt=Km;else if(Ae(z))if(Ym)lt=fE;else{lt=cE;var Nt=uE}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?k&&ho(k.elementType)&&(lt=Km):lt=hE;if(lt&&(lt=lt(e,k))){Si(Y,lt,a,G);break t}Nt&&Nt(e,z,k),e==="focusout"&&k&&z.type==="number"&&k.memoizedProps.value!=null&&Zi(z,"number",z.value)}switch(Nt=k?Gn(k):window,e){case"focusin":(Ae(Nt)||Nt.contentEditable==="true")&&(ta=Nt,Eh=k,Ao=null);break;case"focusout":Ao=Eh=ta=null;break;case"mousedown":Ah=!0;break;case"contextmenu":case"mouseup":case"dragend":Ah=!1,ng(Y,a,G);break;case"selectionchange":if(mE)break;case"keydown":case"keyup":ng(Y,a,G)}var dt;if(Zn)t:{switch(e){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Lt?q(e,a)&&(vt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(vt="onCompositionStart");vt&&(_&&a.locale!=="ko"&&(Lt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Lt&&(dt=mo()):(Kn=G,Ji="value"in Kn?Kn.value:Kn.textContent,Lt=!0)),Nt=Qu(k,vt),0<Nt.length&&(vt=new yo(vt,e,null,a,G),Y.push({event:vt,listeners:Nt}),dt?vt.data=dt:(dt=nt(a),dt!==null&&(vt.data=dt)))),(dt=m?Ee(e,a):kt(e,a))&&(vt=Qu(k,"onBeforeInput"),0<vt.length&&(Nt=new yo("onBeforeInput","beforeinput",null,a,G),Y.push({event:Nt,listeners:vt}),Nt.data=dt)),$E(Y,e,k,a,G)}Ry(Y,i)})}function $o(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Qu(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Wr(e,a),h!=null&&o.unshift($o(e,h,f)),h=Wr(e,i),h!=null&&o.push($o(e,h,f))),e.tag===3)return o;e=e.return}return[]}function ba(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Iy(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var T=a,b=T.alternate,k=T.stateNode;if(T=T.tag,b!==null&&b===o)break;T!==5&&T!==26&&T!==27||k===null||(b=k,h?(k=Wr(a,f),k!=null&&v.unshift($o(a,k,b))):h||(k=Wr(a,f),k!=null&&v.push($o(a,k,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var tA=/\r\n?/g,eA=/\u0000|\uFFFD/g;function Dy(e){return(typeof e=="string"?e:""+e).replace(tA,`
`).replace(eA,"")}function Oy(e,i){return i=Dy(i),Dy(e)===i}function Ku(){}function Zt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||yn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&yn(e,""+o);break;case"className":Fn(e,"class",o);break;case"tabIndex":Fn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Fn(e,a,o);break;case"style":co(e,o,f);break;case"data":if(i!=="object"){Fn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Fs(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Zt(e,i,"name",h.name,h,null),Zt(e,i,"formEncType",h.formEncType,h,null),Zt(e,i,"formMethod",h.formMethod,h,null),Zt(e,i,"formTarget",h.formTarget,h,null)):(Zt(e,i,"encType",h.encType,h,null),Zt(e,i,"method",h.method,h,null),Zt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Fs(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Ku);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Fs(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),$i(e,"popover",o);break;case"xlinkActuate":Pe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Pe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Pe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Pe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Pe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Pe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":$i(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mh.get(a)||a,$i(e,a,o))}}function Qf(e,i,a,o,h,f){switch(a){case"style":co(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?yn(e,o):(typeof o=="number"||typeof o=="bigint")&&yn(e,""+o);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[ge]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):$i(e,a,o)}}}function ze(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Zt(e,i,f,v,a,null)}}h&&Zt(e,i,"srcSet",a.srcSet,a,null),o&&Zt(e,i,"src",a.src,a,null);return;case"input":Vt("invalid",e);var T=f=v=h=null,b=null,k=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":k=G;break;case"value":f=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Zt(e,i,o,G,a,null)}}$r(e,f,T,b,k,v,h,!1),Gs(e);return;case"select":Vt("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:Zt(e,i,h,T,a,null)}i=f,a=v,e.multiple=!!o,i!=null?yi(e,!!o,i,!1):a!=null&&yi(e,!!o,a,!0);return;case"textarea":Vt("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Zt(e,i,v,T,a,null)}Zr(e,o,h,f),Gs(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,i,b,o,a,null)}return;case"dialog":Vt("beforetoggle",e),Vt("toggle",e),Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(o=0;o<Xo.length;o++)Vt(Xo[o],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in a)if(a.hasOwnProperty(k)&&(o=a[k],o!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Zt(e,i,k,o,a,null)}return;default:if(ho(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Qf(e,i,G,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&Zt(e,i,T,o,a,null))}function nA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,T=null,b=null,k=null,G=null;for(B in a){var Y=a[B];if(a.hasOwnProperty(B)&&Y!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=Y;default:o.hasOwnProperty(B)||Zt(e,i,B,null,o,Y)}}for(var z in o){var B=o[z];if(Y=a[z],o.hasOwnProperty(z)&&(B!=null||Y!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":k=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":T=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==Y&&Zt(e,i,z,B,o,Y)}}on(e,v,T,b,k,G,f,h);return;case"select":B=v=T=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Zt(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":T=f;break;case"multiple":v=f;default:f!==b&&Zt(e,i,h,f,o,b)}i=T,a=v,o=B,z!=null?yi(e,!!a,z,!1):!!o!=!!a&&(i!=null?yi(e,!!a,i,!0):yi(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Zt(e,i,T,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Zt(e,i,v,h,o,f)}Xt(e,z,B);return;case"option":for(var Et in a)if(z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:Zt(e,i,Et,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Zt(e,i,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in a)z=a[gt],a.hasOwnProperty(gt)&&z!=null&&!o.hasOwnProperty(gt)&&Zt(e,i,gt,null,o,z);for(k in o)if(z=o[k],B=a[k],o.hasOwnProperty(k)&&z!==B&&(z!=null||B!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Zt(e,i,k,z,o,B)}return;default:if(ho(i)){for(var Jt in a)z=a[Jt],a.hasOwnProperty(Jt)&&z!==void 0&&!o.hasOwnProperty(Jt)&&Qf(e,i,Jt,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||Qf(e,i,G,z,o,B);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!o.hasOwnProperty(P)&&Zt(e,i,P,null,o,z);for(Y in o)z=o[Y],B=a[Y],!o.hasOwnProperty(Y)||z===B||z==null&&B==null||Zt(e,i,Y,z,o,B)}var Kf=null,Yf=null;function Yu(e){return e.nodeType===9?e:e.ownerDocument}function Ny(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Xf(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $f=null;function iA(){var e=window.event;return e&&e.type==="popstate"?e===$f?!1:($f=e,!0):($f=null,!1)}var Vy=typeof setTimeout=="function"?setTimeout:void 0,rA=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,sA=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(e){return xy.resolve(null).then(e).catch(aA)}:Vy;function aA(e){setTimeout(function(){throw e})}function mr(e){return e==="head"}function Py(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&Zo(v.documentElement),a&2&&Zo(v.body),a&4)for(a=v.head,Zo(a),v=a.firstChild;v;){var T=v.nextSibling,b=v.nodeName;v[Qr]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){e.removeChild(f),sl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);sl(i)}function Zf(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),Xi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function oA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Qr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ln(e.nextSibling),e===null)break}return null}function lA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ln(e.nextSibling),e===null))return null;return e}function Jf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function uA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Ln(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Wf=null;function Uy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function Ly(e,i,a){switch(i=Yu(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Zo(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Xi(e)}var Cn=new Map,ky=new Set;function Xu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ui=it.d;it.d={f:cA,r:hA,D:fA,C:dA,L:mA,m:gA,X:yA,S:pA,M:_A};function cA(){var e=Ui.f(),i=Bu();return e||i}function hA(e){var i=Hn(e);i!==null&&i.tag===5&&i.type==="form"?rp(i):Ui.r(e)}var wa=typeof document>"u"?null:document;function zy(e,i,a){var o=wa;if(o&&typeof i=="string"&&i){var h=pe(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ky.has(h)||(ky.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),ze(i,"link",e),he(i),o.head.appendChild(i)))}}function fA(e){Ui.D(e),zy("dns-prefetch",e,null)}function dA(e,i){Ui.C(e,i),zy("preconnect",e,i)}function mA(e,i,a){Ui.L(e,i,a);var o=wa;if(o&&e&&i){var h='link[rel="preload"][as="'+pe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pe(a.imageSizes)+'"]')):h+='[href="'+pe(e)+'"]';var f=h;switch(i){case"style":f=Ra(e);break;case"script":f=Ca(e)}Cn.has(f)||(e=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Cn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(Jo(f))||i==="script"&&o.querySelector(Wo(f))||(i=o.createElement("link"),ze(i,"link",e),he(i),o.head.appendChild(i)))}}function gA(e,i){Ui.m(e,i);var a=wa;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pe(o)+'"][href="'+pe(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ca(e)}if(!Cn.has(f)&&(e=E({rel:"modulepreload",href:e},i),Cn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wo(f)))return}o=a.createElement("link"),ze(o,"link",e),he(o),a.head.appendChild(o)}}}function pA(e,i,a){Ui.S(e,i,a);var o=wa;if(o&&e){var h=Ze(o).hoistableStyles,f=Ra(e);i=i||"default";var v=h.get(f);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(Jo(f)))T.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Cn.get(f))&&td(e,a);var b=v=o.createElement("link");he(b),ze(b,"link",e),b._p=new Promise(function(k,G){b.onload=k,b.onerror=G}),b.addEventListener("load",function(){T.loading|=1}),b.addEventListener("error",function(){T.loading|=2}),T.loading|=4,$u(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(f,v)}}}function yA(e,i){Ui.X(e,i);var a=wa;if(a&&e){var o=Ze(a).hoistableScripts,h=Ca(e),f=o.get(h);f||(f=a.querySelector(Wo(h)),f||(e=E({src:e,async:!0},i),(i=Cn.get(h))&&ed(e,i),f=a.createElement("script"),he(f),ze(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function _A(e,i){Ui.M(e,i);var a=wa;if(a&&e){var o=Ze(a).hoistableScripts,h=Ca(e),f=o.get(h);f||(f=a.querySelector(Wo(h)),f||(e=E({src:e,async:!0,type:"module"},i),(i=Cn.get(h))&&ed(e,i),f=a.createElement("script"),he(f),ze(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function By(e,i,a,o){var h=(h=_t.current)?Xu(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ra(a.href),a=Ze(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ra(a.href);var f=Ze(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(Jo(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Cn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Cn.set(e,a),f||vA(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ca(a),a=Ze(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ra(e){return'href="'+pe(e)+'"'}function Jo(e){return'link[rel="stylesheet"]['+e+"]"}function jy(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function vA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),ze(i,"link",a),he(i),e.head.appendChild(i))}function Ca(e){return'[src="'+pe(e)+'"]'}function Wo(e){return"script[async]"+e}function qy(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+pe(a.href)+'"]');if(o)return i.instance=o,he(o),o;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),he(o),ze(o,"style",h),$u(o,a.precedence,e),i.instance=o;case"stylesheet":h=Ra(a.href);var f=e.querySelector(Jo(h));if(f)return i.state.loading|=4,i.instance=f,he(f),f;o=jy(a),(h=Cn.get(h))&&td(o,h),f=(e.ownerDocument||e).createElement("link"),he(f);var v=f;return v._p=new Promise(function(T,b){v.onload=T,v.onerror=b}),ze(f,"link",o),i.state.loading|=4,$u(f,a.precedence,e),i.instance=f;case"script":return f=Ca(a.src),(h=e.querySelector(Wo(f)))?(i.instance=h,he(h),h):(o=a,(h=Cn.get(f))&&(o=E({},a),ed(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),he(h),ze(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,$u(o,a.precedence,e));return i.instance}function $u(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function td(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function ed(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Zu=null;function Hy(e,i,a){if(Zu===null){var o=new Map,h=Zu=new Map;h.set(a,o)}else h=Zu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[Qr]||f[Te]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var T=o.get(v);T?T.push(f):o.set(v,[f])}}return o}function Gy(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function TA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var tl=null;function EA(){}function AA(e,i,a){if(tl===null)throw Error(s(475));var o=tl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ra(a.href),f=e.querySelector(Jo(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Ju.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,he(f);return}f=e.ownerDocument||e,a=jy(a),(h=Cn.get(h))&&td(a,h),f=f.createElement("link"),he(f);var v=f;v._p=new Promise(function(T,b){v.onload=T,v.onerror=b}),ze(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Ju.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function SA(){if(tl===null)throw Error(s(475));var e=tl;return e.stylesheets&&e.count===0&&nd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&nd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wu=null;function nd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wu=new Map,i.forEach(bA,e),Wu=null,Ju.call(e))}function bA(e,i){if(!(i.state.loading&4)){var a=Wu.get(e);if(a)var o=a.get(null);else{a=new Map,Wu.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Ju.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var el={$$typeof:J,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function wA(e,i,a,o,h,f,v,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Qy(e,i,a,o,h,f,v,T,b,k,G,Y){return e=new wA(e,i,a,v,T,b,k,Y),i=1,f===!0&&(i|=24),f=un(3,null,null,i),e.current=f,f.stateNode=e,i=Uh(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},Bh(f),e}function Ky(e){return e?(e=ra,e):ra}function Yy(e,i,a,o,h,f){h=Ky(h),o.context===null?o.context=h:o.pendingContext=h,o=er(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=nr(e,o,i),a!==null&&(mn(a,e,i),No(a,e,i))}function Xy(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function id(e,i){Xy(e,i),(e=e.alternate)&&Xy(e,i)}function $y(e){if(e.tag===13){var i=ia(e,67108864);i!==null&&mn(i,e,67108864),id(e,67108864)}}var tc=!0;function RA(e,i,a,o){var h=H.T;H.T=null;var f=it.p;try{it.p=2,rd(e,i,a,o)}finally{it.p=f,H.T=h}}function CA(e,i,a,o){var h=H.T;H.T=null;var f=it.p;try{it.p=8,rd(e,i,a,o)}finally{it.p=f,H.T=h}}function rd(e,i,a,o){if(tc){var h=sd(o);if(h===null)Ff(e,i,o,ec,a),Jy(e,o);else if(DA(h,e,i,a,o))o.stopPropagation();else if(Jy(e,o),i&4&&-1<IA.indexOf(e)){for(;h!==null;){var f=Hn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Mn(f.pendingLanes);if(v!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var b=1<<31-Ge(v);T.entanglements[1]|=b,v&=~b}ii(f),(Kt&6)===0&&(ku=gn()+500,Yo(0))}}break;case 13:T=ia(f,2),T!==null&&mn(T,f,2),Bu(),id(f,2)}if(f=sd(o),f===null&&Ff(e,i,o,ec,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Ff(e,i,o,null,a)}}function sd(e){return e=_n(e),ad(e)}var ec=null;function ad(e){if(ec=null,e=mi(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ec=e,null}function Zy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lh()){case Ja:return 2;case Us:return 8;case jr:case uh:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var od=!1,gr=null,pr=null,yr=null,nl=new Map,il=new Map,_r=[],IA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(e,i){switch(e){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":nl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(i.pointerId)}}function rl(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Hn(i),i!==null&&$y(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function DA(e,i,a,o,h){switch(i){case"focusin":return gr=rl(gr,e,i,a,o,h),!0;case"dragenter":return pr=rl(pr,e,i,a,o,h),!0;case"mouseover":return yr=rl(yr,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return nl.set(f,rl(nl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,il.set(f,rl(il.get(f)||null,e,i,a,o,h)),!0}return!1}function Wy(e){var i=mi(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,Bl(e.priority,function(){if(a.tag===13){var o=dn();o=Qi(o);var h=ia(a,o);h!==null&&mn(h,a,o),id(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=sd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);_i=o,a.target.dispatchEvent(o),_i=null}else return i=Hn(a),i!==null&&$y(i),e.blockedOn=a,!1;i.shift()}return!0}function t_(e,i,a){nc(e)&&a.delete(i)}function OA(){od=!1,gr!==null&&nc(gr)&&(gr=null),pr!==null&&nc(pr)&&(pr=null),yr!==null&&nc(yr)&&(yr=null),nl.forEach(t_),il.forEach(t_)}function ic(e,i){e.blockedOn===i&&(e.blockedOn=null,od||(od=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,OA)))}var rc=null;function e_(e){rc!==e&&(rc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){rc===e&&(rc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(ad(o||a)===null)continue;break}var f=Hn(a);f!==null&&(e.splice(i,3),i-=3,af(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function sl(e){function i(b){return ic(b,e)}gr!==null&&ic(gr,e),pr!==null&&ic(pr,e),yr!==null&&ic(yr,e),nl.forEach(i),il.forEach(i);for(var a=0;a<_r.length;a++){var o=_r[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<_r.length&&(a=_r[0],a.blockedOn===null);)Wy(a),a.blockedOn===null&&_r.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[ge]||null;if(typeof f=="function")v||e_(a);else if(v){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[ge]||null)T=v.formAction;else if(ad(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),e_(a)}}}function ld(e){this._internalRoot=e}sc.prototype.render=ld.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=dn();Yy(a,o,e,i,null,null)},sc.prototype.unmount=ld.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Yy(e.current,2,null,e,null,null),Bu(),i[pn]=null}};function sc(e){this._internalRoot=e}sc.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ki();e={blockedOn:null,target:e,priority:i};for(var a=0;a<_r.length&&i!==0&&i<_r[a].priority;a++);_r.splice(a,0,e),a===0&&Wy(e)}};var n_=t.version;if(n_!=="19.1.0")throw Error(s(527,n_,"19.1.0"));it.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var NA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{oe=ac.inject(NA),Qt=ac}catch{}}return ol.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=_p,f=vp,v=Tp,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=Qy(e,1,!1,null,null,a,o,h,f,v,T,null),e[pn]=i.current,Gf(e),new ld(i)},ol.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=_p,v=vp,T=Tp,b=null,k=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(k=a.formState)),i=Qy(e,1,!0,i,a??null,o,h,f,v,T,b,k),i.context=Ky(null),a=i.current,o=dn(),o=Qi(o),h=er(o),h.callback=null,nr(a,h,o),a=o,i.current.lanes=a,di(i,a),ii(i),e[pn]=i.current,Gf(e),new sc(i)},ol.version="19.1.0",ol}var f_;function GA(){if(f_)return hd.exports;f_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),hd.exports=HA(),hd.exports}var FA=GA();const kv=Tt.createContext(void 0);function Ur(){const r=Tt.useContext(kv);if(!r)throw new Error("useFactorsContext must be used within a FactorsProvider");return r}const zv=Tt.createContext(void 0);function Wd(){const r=Tt.useContext(zv);if(!r)throw new Error("useSoundPlayerContext must be used within a SoundPlayerProvider");return r}function QA(){const{factors:r,setFactors:t}=Ur(),{incrementStreak:n}=Wd(),s=Tt.useMemo(()=>r.factor2.toString().length,[r.factor2]),l=Tt.useMemo(()=>r.product.toString().length,[r.product]),c=Tt.useMemo(()=>r.numGridCorrect===r.productGridList.length,[r.numGridCorrect]),d=Tt.useMemo(()=>r.factor2.toString().length>1,[r.product]),[g,p]=Tt.useState([]),y=Tt.useRef(Array.from({length:s},()=>Array.from({length:l},()=>null))),E=Tt.useMemo(()=>{var Q;return(((Q=r.nextCarry())==null?void 0:Q.order)??-1)===r.numGridCorrect},[r.numCarryCorrect,r.resetCounter,r.numGridCorrect]);Tt.useEffect(()=>{const Q=Array.from({length:s},()=>Array.from({length:l},()=>""));p(Q),y.current=Array.from({length:s},()=>Array.from({length:l},()=>null))},[r.resetCounter,s,l]);const C=(Q,st)=>{const ot=l-1-r.numGridCorrect%l,J=Math.floor(r.numGridCorrect/l);return E?!0:!(st===ot&&Q===J)},D=(Q,st)=>Q*l+l-1-st<r.numGridCorrect,j=()=>{let Q=!0;const st=r.numGridCorrect+1,ot=l*Math.ceil(st/l);for(let J=st;J<ot;J++)if(r.productGridList[J]!==0){Q=!1;break}if(Q)for(let J=st;J<ot;J++)r.correctGrid(),t(r.clone())},F=(Q,st,ot)=>{let J="";Q.target.value!==""&&(J=Number(Q.target.value)),(J===""||J<10)&&p(ut=>{const Z=ut.map(ht=>[...ht]);return Z[st][ot]=J,Z}),J===r.productGridList[r.numGridCorrect]&&(j(),r.correctGrid(),t(r.clone()),n())};function tt(Q,st,ot,J,ut,Z){if(ut||Z)return!1;const ht=ot-1-J%ot,O=Math.floor(J/ot);return Q===O&&st===ht}return ct.jsxs("div",{className:"flex flex-row items-end",children:[ct.jsx("div",{className:`leading-none text-[10vh] font-bold text-[rgb(20,128,223)] ${!c||!d?"invisible":""}`,children:"+"}),ct.jsx("div",{className:"h-auto flex flex-col gap-2",children:g.map((Q,st)=>ct.jsx("div",{className:"h-auto flex flex-row gap-2 justify-end",children:Q.map((ot,J)=>{var ut;return ct.jsx("input",{className:` product-grid-cell ${C(st,J)?D(st,J)?"bg-green-200":"bg-gray-400":""}`,type:"number",value:((ut=g[st])==null?void 0:ut[J])??"",readOnly:C(st,J),onChange:Z=>F(Z,st,J),ref:Z=>{y.current[st]||(y.current[st]=[]),y.current[st][J]=Z,Z&&tt(st,J,l,r.numGridCorrect,c,E)&&Z.focus()}},`${st}-${J}`)})},st))})]})}function KA(){const{setFactors:r,factors:t}=Ur(),{incrementStreak:n}=Wd(),s=Tt.useMemo(()=>t.product.toString().length,[t.product,t.resetCounter]),[l,c]=Tt.useState(()=>Array.from({length:s},()=>"")),[d,g]=Tt.useState([]),p=Tt.useRef([]),y=Tt.useMemo(()=>t.nextCarry(),[t.numCarryCorrect,t.resetCounter]);Tt.useEffect(()=>{t.numCarryCorrect%s===0&&(c(Array.from({length:s},()=>"")),g(Array.from({length:s},()=>!1)))},[t.numGridCorrect,t.resetCounter]);const E=j=>l[j]!=""?!0:!(y===void 0||y.place!==j||y.order!==t.numGridCorrect),C=(j,F)=>{let tt="";j.target.value!==""&&(tt=Number(j.target.value));const Q=[...l];if(Q[F]=tt,(tt===""||tt<10)&&c(Q),y!==void 0&&tt===y.value){t.correctCarry(),r(t.clone()),n();const st=[...d];st[F]=!0,g(st)}};function D(j,F,tt){return F?F.place===j&&F.order===tt:!1}return ct.jsx("div",{className:"flex flex-row gap-2 justify-end",children:l.map((j,F)=>ct.jsx("input",{className:`product-grid-cell ${E(F)?d[F]?"bg-green-200":"":"invisible"} `,type:"number",value:l[F],onChange:tt=>C(tt,F),readOnly:d[F],ref:tt=>{p.current[F]=tt,tt&&D(F,y,t.numGridCorrect)&&tt.focus()}},F))})}const Bv=Tt.createContext(void 0);function Ns(){const r=Tt.useContext(Bv);if(!r)throw new Error("useUserDataContext must be used within a userUserDataProvider");return r}var gd,d_;function YA(){if(d_)return gd;d_=1;var r="Expected a function",t=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,g=parseInt,p=typeof oc=="object"&&oc&&oc.Object===Object&&oc,y=typeof self=="object"&&self&&self.Object===Object&&self,E=p||y||Function("return this")(),C=Object.prototype,D=C.toString,j=Math.max,F=Math.min,tt=function(){return E.Date.now()};function Q(Z,ht,O){var S,w,M,V,x,R,re=0,ee=!1,H=!1,it=!0;if(typeof Z!="function")throw new TypeError(r);ht=ut(ht)||0,st(O)&&(ee=!!O.leading,H="maxWait"in O,M=H?j(ut(O.maxWait)||0,ht):M,it="trailing"in O?!!O.trailing:it);function ft(Ot){var Ut=S,He=w;return S=w=void 0,re=Ot,V=Z.apply(He,Ut),V}function jt(Ot){return re=Ot,x=setTimeout(rt,ht),ee?ft(Ot):V}function I(Ot){var Ut=Ot-R,He=Ot-re,Nn=ht-Ut;return H?F(Nn,M-He):Nn}function $(Ot){var Ut=Ot-R,He=Ot-re;return R===void 0||Ut>=ht||Ut<0||H&&He>=M}function rt(){var Ot=tt();if($(Ot))return et(Ot);x=setTimeout(rt,I(Ot))}function et(Ot){return x=void 0,it&&S?ft(Ot):(S=w=void 0,V)}function mt(){x!==void 0&&clearTimeout(x),re=0,S=R=w=x=void 0}function Ct(){return x===void 0?V:et(tt())}function _t(){var Ot=tt(),Ut=$(Ot);if(S=arguments,w=this,R=Ot,Ut){if(x===void 0)return jt(R);if(H)return x=setTimeout(rt,ht),ft(R)}return x===void 0&&(x=setTimeout(rt,ht)),V}return _t.cancel=mt,_t.flush=Ct,_t}function st(Z){var ht=typeof Z;return!!Z&&(ht=="object"||ht=="function")}function ot(Z){return!!Z&&typeof Z=="object"}function J(Z){return typeof Z=="symbol"||ot(Z)&&D.call(Z)==n}function ut(Z){if(typeof Z=="number")return Z;if(J(Z))return t;if(st(Z)){var ht=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=st(ht)?ht+"":ht}if(typeof Z!="string")return Z===0?Z:+Z;Z=Z.replace(s,"");var O=c.test(Z);return O||d.test(Z)?g(Z.slice(2),O?2:8):l.test(Z)?t:+Z}return gd=Q,gd}var XA=YA();const $A=PA(XA),ZA=()=>{};var m_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},JA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,E=c>>2,C=(c&3)<<4|g>>4;let D=(g&15)<<2|y>>6,j=y&63;p||(j=64,d||(D=64)),s.push(n[E],n[C],n[D],n[j])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(jv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):JA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const C=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||C==null)throw new WA;const D=c<<2|g>>4;if(s.push(D),y!==64){const j=g<<4&240|y>>2;if(s.push(j),C!==64){const F=y<<6&192|C;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class WA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tS=function(r){const t=jv(r);return qv.encodeByteArray(t,!0)},Sc=function(r){return tS(r).replace(/\./g,"")},Hv=function(r){try{return qv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=()=>eS().__FIREBASE_DEFAULTS__,iS=()=>{if(typeof process>"u"||typeof m_>"u")return;const r=m_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},rS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Hv(r[1]);return t&&JSON.parse(t)},Hc=()=>{try{return ZA()||nS()||iS()||rS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Gv=r=>{var t,n;return(n=(t=Hc())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[r]},sS=r=>{const t=Gv(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Fv=()=>{var r;return(r=Hc())===null||r===void 0?void 0:r.config},Qv=r=>{var t;return(t=Hc())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){return r.endsWith(".cloudworkstations.dev")}async function Kv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Sc(JSON.stringify(n)),Sc(JSON.stringify(d)),""].join(".")}const hl={};function lS(){const r={prod:[],emulator:[]};for(const t of Object.keys(hl))hl[t]?r.emulator.push(t):r.prod.push(t);return r}function uS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let g_=!1;function Gc(r,t){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||hl[r]===t||hl[r]||g_)return;hl[r]=t;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=lS().prod.length>0;function d(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function p(D,j){D.setAttribute("width","24"),D.setAttribute("id",j),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function y(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{g_=!0,d()},D}function E(D,j){D.setAttribute("id",j),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function C(){const D=uS(s),j=n("text"),F=document.getElementById(j)||document.createElement("span"),tt=n("learnmore"),Q=document.getElementById(tt)||document.createElement("a"),st=n("preprendIcon"),ot=document.getElementById(st)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const J=D.element;g(J),E(Q,tt);const ut=y();p(ot,st),J.append(ot,F,Q,ut),document.body.appendChild(J)}c?(F.innerText="Preview backend disconnected.",ot.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ot.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function hS(){var r;const t=(r=Hc())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function mS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gS(){const r=$e();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function pS(){return!hS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yS(){try{return typeof indexedDB=="object"}catch{return!1}}function _S(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;t(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="FirebaseError";class Fi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=vS,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?TS(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Fi(l,g,s)}}function TS(r,t){return r.replace(ES,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const ES=/\{\$([^}]+)}/g;function AS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Rs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(p_(c)&&p_(d)){if(!Rs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function p_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function SS(r,t){const n=new bS(r,t);return n.subscribe.bind(n)}class bS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");wS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=pd),l.error===void 0&&(l.error=pd),l.complete===void 0&&(l.complete=pd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(r){return r&&r._delegate?r._delegate:r}class Cs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new aS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IS(t))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Es){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Es){return this.instances.has(t)}getOptions(t=Es){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(t,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(t),this.onInitCallbacks.set(l,c);const d=this.instances.get(l);return d&&t(d,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:CS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Es){return this.component?this.component.multipleInstances?t:Es:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(r){return r===Es?void 0:r}function IS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new RS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xt||(xt={}));const OS={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},NS=xt.INFO,MS={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},VS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=MS[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tm{constructor(t){this.name=t,this._logLevel=NS,this._logHandler=VS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...t),this._logHandler(this,xt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...t),this._logHandler(this,xt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...t),this._logHandler(this,xt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...t),this._logHandler(this,xt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...t),this._logHandler(this,xt.ERROR,...t)}}const xS=(r,t)=>t.some(n=>r instanceof n);let y_,__;function PS(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function US(){return __||(__=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yv=new WeakMap,Id=new WeakMap,Xv=new WeakMap,yd=new WeakMap,em=new WeakMap;function LS(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(wr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&Yv.set(n,r)}).catch(()=>{}),em.set(t,r),t}function kS(r){if(Id.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Id.set(r,t)}let Dd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Id.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Xv.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function zS(r){Dd=r(Dd)}function BS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(_d(this),t,...n);return Xv.set(s,t.sort?t.sort():[t]),wr(s)}:US().includes(r)?function(...t){return r.apply(_d(this),t),wr(Yv.get(this))}:function(...t){return wr(r.apply(_d(this),t))}}function jS(r){return typeof r=="function"?BS(r):(r instanceof IDBTransaction&&kS(r),xS(r,PS())?new Proxy(r,Dd):r)}function wr(r){if(r instanceof IDBRequest)return LS(r);if(yd.has(r))return yd.get(r);const t=jS(r);return t!==r&&(yd.set(r,t),em.set(t,r)),t}const _d=r=>em.get(r);function qS(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=wr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(wr(d.result),p.oldVersion,p.newVersion,wr(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const HS=["get","getKey","getAll","getAllKeys","count"],GS=["put","add","delete","clear"],vd=new Map;function v_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(vd.get(t))return vd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=GS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||HS.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return vd.set(t,c),c}zS(r=>({...r,get:(t,n,s)=>v_(t,n)||r.get(t,n,s),has:(t,n)=>!!v_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QS(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Od="@firebase/app",T_="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new tm("@firebase/app"),KS="@firebase/app-compat",YS="@firebase/analytics-compat",XS="@firebase/analytics",$S="@firebase/app-check-compat",ZS="@firebase/app-check",JS="@firebase/auth",WS="@firebase/auth-compat",t1="@firebase/database",e1="@firebase/data-connect",n1="@firebase/database-compat",i1="@firebase/functions",r1="@firebase/functions-compat",s1="@firebase/installations",a1="@firebase/installations-compat",o1="@firebase/messaging",l1="@firebase/messaging-compat",u1="@firebase/performance",c1="@firebase/performance-compat",h1="@firebase/remote-config",f1="@firebase/remote-config-compat",d1="@firebase/storage",m1="@firebase/storage-compat",g1="@firebase/firestore",p1="@firebase/vertexai",y1="@firebase/firestore-compat",_1="firebase",v1="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="[DEFAULT]",T1={[Od]:"fire-core",[KS]:"fire-core-compat",[XS]:"fire-analytics",[YS]:"fire-analytics-compat",[ZS]:"fire-app-check",[$S]:"fire-app-check-compat",[JS]:"fire-auth",[WS]:"fire-auth-compat",[t1]:"fire-rtdb",[e1]:"fire-data-connect",[n1]:"fire-rtdb-compat",[i1]:"fire-fn",[r1]:"fire-fn-compat",[s1]:"fire-iid",[a1]:"fire-iid-compat",[o1]:"fire-fcm",[l1]:"fire-fcm-compat",[u1]:"fire-perf",[c1]:"fire-perf-compat",[h1]:"fire-rc",[f1]:"fire-rc-compat",[d1]:"fire-gcs",[m1]:"fire-gcs-compat",[g1]:"fire-fst",[y1]:"fire-fst-compat",[p1]:"fire-vertex","fire-js":"fire-js",[_1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,E1=new Map,Md=new Map;function E_(r,t){try{r.container.addComponent(t)}catch(n){ji.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ua(r){const t=r.name;if(Md.has(t))return ji.debug(`There were multiple attempts to register component ${t}.`),!1;Md.set(t,r);for(const n of bc.values())E_(n,r);for(const n of E1.values())E_(n,r);return!0}function nm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function kn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Il("app","Firebase",A1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=v1;function $v(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Nd,automaticDataCollectionEnabled:!1},t),l=s.name;if(typeof l!="string"||!l)throw Rr.create("bad-app-name",{appName:String(l)});if(n||(n=Fv()),!n)throw Rr.create("no-options");const c=bc.get(l);if(c){if(Rs(n,c.options)&&Rs(s,c.config))return c;throw Rr.create("duplicate-app",{appName:l})}const d=new DS(l);for(const p of Md.values())d.addComponent(p);const g=new S1(n,s,d);return bc.set(l,g),g}function Zv(r=Nd){const t=bc.get(r);if(!t&&r===Nd&&Fv())return $v();if(!t)throw Rr.create("no-app",{appName:r});return t}function Cr(r,t,n){var s;let l=(s=T1[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const c=l.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const g=[`Unable to register library "${l}" with version "${t}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ji.warn(g.join(" "));return}Ua(new Cs(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebase-heartbeat-database",w1=1,yl="firebase-heartbeat-store";let Td=null;function Jv(){return Td||(Td=qS(b1,w1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(yl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Rr.create("idb-open",{originalErrorMessage:r.message})})),Td}async function R1(r){try{const n=(await Jv()).transaction(yl),s=await n.objectStore(yl).get(Wv(r));return await n.done,s}catch(t){if(t instanceof Fi)ji.warn(t.message);else{const n=Rr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ji.warn(n.message)}}}async function A_(r,t){try{const s=(await Jv()).transaction(yl,"readwrite");await s.objectStore(yl).put(t,Wv(r)),await s.done}catch(n){if(n instanceof Fi)ji.warn(n.message);else{const s=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ji.warn(s.message)}}}function Wv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=1024,I1=30;class D1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=S_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>I1){const d=M1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ji.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S_(),{heartbeatsToSend:s,unsentEntries:l}=O1(this._heartbeatsCache.heartbeats),c=Sc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return ji.warn(n),""}}}function S_(){return new Date().toISOString().substring(0,10)}function O1(r,t=C1){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),b_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),b_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class N1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yS()?_S().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function b_(r){return Sc(JSON.stringify({version:2,heartbeats:r})).length}function M1(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(r){Ua(new Cs("platform-logger",t=>new FS(t),"PRIVATE")),Ua(new Cs("heartbeat",t=>new D1(t),"PRIVATE")),Cr(Od,T_,r),Cr(Od,T_,"esm2017"),Cr("fire-js","")}V1("");var x1="firebase",P1="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(x1,P1,"app");function im(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function t0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U1=t0,e0=new Il("auth","Firebase",t0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new tm("@firebase/auth");function L1(r,...t){wc.logLevel<=xt.WARN&&wc.warn(`Auth (${Fa}): ${r}`,...t)}function mc(r,...t){wc.logLevel<=xt.ERROR&&wc.error(`Auth (${Fa}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r,...t){throw sm(r,...t)}function jn(r,...t){return sm(r,...t)}function rm(r,t,n){const s=Object.assign(Object.assign({},U1()),{[t]:n});return new Il("auth","Firebase",s).create(t,{appName:r.name})}function ws(r){return rm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k1(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&li(r,"argument-error"),rm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return e0.create(r,...t)}function St(r,t,...n){if(!r)throw sm(t,...n)}function ki(r){const t="INTERNAL ASSERTION FAILED: "+r;throw mc(t),new Error(t)}function qi(r,t){r||ki(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function z1(){return w_()==="http:"||w_()==="https:"}function w_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z1()||dS()||"connection"in navigator)?navigator.onLine:!0}function j1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t,n){this.shortDelay=t,this.longDelay=n,qi(n>t,"Short delay should be less than long delay!"),this.isMobile=cS()||mS()}get(){return B1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(r,t){qi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G1=new Ol(3e4,6e4);function om(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function Qa(r,t,n,s,l={}){return i0(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const g=Dl(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:t,headers:p},c);return fS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Cl(r.emulatorConfig.host)&&(y.credentials="include"),n0.fetch()(await r0(r,r.config.apiHost,n,g),y)})}async function i0(r,t,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},q1),t);try{const l=new Q1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw lc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw lc(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw lc(r,"user-disabled",d);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw rm(r,E,y);li(r,E)}}catch(l){if(l instanceof Fi)throw l;li(r,"network-request-failed",{message:String(l)})}}async function F1(r,t,n,s,l={}){const c=await Qa(r,t,n,s,l);return"mfaPendingCredential"in c&&li(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function r0(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?am(r.config,l):`${r.config.apiScheme}://${l}`;return H1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class Q1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(jn(this.auth,"network-request-failed")),G1.get())})}}function lc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=jn(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,t){return Qa(r,"POST","/v1/accounts:delete",t)}async function Rc(r,t){return Qa(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Y1(r,t=!1){const n=On(r),s=await n.getIdToken(t),l=lm(s);St(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:fl(Ed(l.auth_time)),issuedAtTime:fl(Ed(l.iat)),expirationTime:fl(Ed(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Ed(r){return Number(r)*1e3}function lm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Hv(n);return l?JSON.parse(l):(mc("Failed to decode base64 JWT payload"),null)}catch(l){return mc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function R_(r){const t=lm(r);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Fi&&X1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function X1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(r){var t;const n=r.auth,s=await r.getIdToken(),l=await _l(r,Rc(n,{idToken:s}));St(l==null?void 0:l.users.length,n,"internal-error");const c=l.users[0];r._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?s0(c.providerUserInfo):[],g=J1(r.providerData,d),p=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(g!=null&&g.length),E=p?y:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new xd(c.createdAt,c.lastLoginAt),isAnonymous:E};Object.assign(r,C)}async function Z1(r){const t=On(r);await Cc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function J1(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function s0(r){return r.map(t=>{var{providerId:n}=t,s=im(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r,t){const n=await i0(r,{},async()=>{const s=Dl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await r0(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",n0.fetch()(d,{method:"POST",headers:g,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tb(r,t){return Qa(r,"POST","/v2/accounts:revokeToken",om(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):R_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){St(t.length!==0,"internal-error");const n=R_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await W1(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Ma;return s&&(St(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(St(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(St(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(r,t){St(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class zn{constructor(t){var{uid:n,auth:s,stsTokenManager:l}=t,c=im(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new xd(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await _l(this,this.stsTokenManager.getToken(this.auth,t));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Y1(this,t)}reload(){return Z1(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Cc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(ws(this.auth));const t=await this.getIdToken();return await _l(this,K1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,l,c,d,g,p,y,E;const C=(s=n.displayName)!==null&&s!==void 0?s:void 0,D=(l=n.email)!==null&&l!==void 0?l:void 0,j=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,F=(d=n.photoURL)!==null&&d!==void 0?d:void 0,tt=(g=n.tenantId)!==null&&g!==void 0?g:void 0,Q=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,st=(y=n.createdAt)!==null&&y!==void 0?y:void 0,ot=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:J,emailVerified:ut,isAnonymous:Z,providerData:ht,stsTokenManager:O}=n;St(J&&O,t,"internal-error");const S=Ma.fromJSON(this.name,O);St(typeof J=="string",t,"internal-error"),Tr(C,t.name),Tr(D,t.name),St(typeof ut=="boolean",t,"internal-error"),St(typeof Z=="boolean",t,"internal-error"),Tr(j,t.name),Tr(F,t.name),Tr(tt,t.name),Tr(Q,t.name),Tr(st,t.name),Tr(ot,t.name);const w=new zn({uid:J,auth:t,email:D,emailVerified:ut,displayName:C,isAnonymous:Z,photoURL:F,phoneNumber:j,tenantId:tt,stsTokenManager:S,createdAt:st,lastLoginAt:ot});return ht&&Array.isArray(ht)&&(w.providerData=ht.map(M=>Object.assign({},M))),Q&&(w._redirectEventId=Q),w}static async _fromIdTokenResponse(t,n,s=!1){const l=new Ma;l.updateFromServerResponse(n);const c=new zn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Cc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];St(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?s0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Ma;g.updateFromIdToken(s);const p=new zn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new xd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new Map;function zi(r){qi(r instanceof Function,"Expected a class definition");let t=C_.get(r);return t?(qi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,C_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}a0.type="NONE";const I_=a0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(r,t,n){return`firebase:${r}:${t}:${n}`}class Va{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=gc(this.userKey,l.apiKey,c),this.fullPersistenceKey=gc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Rc(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Va(zi(I_),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||zi(I_);const d=gc(s,t.config.apiKey,t.name);let g=null;for(const y of n)try{const E=await y._get(d);if(E){let C;if(typeof E=="string"){const D=await Rc(t,{idToken:E}).catch(()=>{});if(!D)break;C=await zn._fromGetAccountInfoResponse(t,D,E)}else C=zn._fromJSON(t,E);y!==c&&(g=C),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Va(c,t,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Va(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(c0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(o0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(f0(t))return"Blackberry";if(d0(t))return"Webos";if(l0(t))return"Safari";if((t.includes("chrome/")||u0(t))&&!t.includes("edge/"))return"Chrome";if(h0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function o0(r=$e()){return/firefox\//i.test(r)}function l0(r=$e()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function u0(r=$e()){return/crios\//i.test(r)}function c0(r=$e()){return/iemobile/i.test(r)}function h0(r=$e()){return/android/i.test(r)}function f0(r=$e()){return/blackberry/i.test(r)}function d0(r=$e()){return/webos/i.test(r)}function um(r=$e()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eb(r=$e()){var t;return um(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function nb(){return gS()&&document.documentMode===10}function m0(r=$e()){return um(r)||h0(r)||d0(r)||f0(r)||/windows phone/i.test(r)||c0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(r,t=[]){let n;switch(r){case"Browser":n=D_($e());break;case"Worker":n=`${D_($e())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,g)=>{try{const p=t(c);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(r,t={}){return Qa(r,"GET","/v2/passwordPolicy",om(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=6;class ab{constructor(t){var n,s,l,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:sb,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,l,c,d,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,p),this.validatePasswordCharacterOptions(t,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O_(this),this.idTokenSubscription=new O_(this),this.beforeStateQueue=new ib(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Va.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Rc(this,{idToken:t}),s=await zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(kn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=l==null?void 0:l._redirectEventId,p=await this.tryRedirectSignIn(t);(!d||d===g)&&(p!=null&&p.user)&&(l=p.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(d){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Cc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=j1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kn(this.app))return Promise.reject(ws(this));const n=t?On(t):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kn(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rb(this),n=new ab(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Il("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await tb(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&zi(t)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{d=!0,p()}}else{const p=t.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=g0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var t;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&L1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fc(r){return On(r)}class O_{constructor(t){this.auth=t,this.observer=null,this.addObserver=SS(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lb(r){cm=r}function ub(r){return cm.loadJS(r)}function cb(){return cm.gapiScript}function hb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r,t){const n=nm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Rs(c,t??{}))return l;li(l,"already-initialized")}return n.initialize({options:t})}function db(r,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(zi);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function mb(r,t,n){const s=Fc(r);St(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=p0(t),{host:d,port:g}=gb(t),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},E=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){St(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),St(Rs(y,s.config.emulator)&&Rs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Cl(d)?(Gc("Auth",!0),Kv(`${c}//${d}${p}`)):pb()}function p0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function gb(r){const t=p0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:N_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:N_(d)}}}function N_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function pb(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(t){return ki("not implemented")}_linkToIdToken(t,n){return ki("not implemented")}_getReauthenticationResolver(t){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(r,t){return F1(r,"POST","/v1/accounts:signInWithIdp",om(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="http://localhost";class Is extends y0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Is(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l}=n,c=im(n,["providerId","signInMethod"]);if(!s||!l)return null;const d=new Is(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return xa(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,xa(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,xa(t,n)}buildRequest(){const t={requestUri:yb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Dl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends hm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Nl{constructor(){super("facebook.com")}static credential(t){return Is._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Er.credential(t.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Nl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Is._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Li.credentialFromTaggedObject(t)}static credentialFromError(t){return Li.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Li.credential(n,s)}catch{return null}}}Li.GOOGLE_SIGN_IN_METHOD="google.com";Li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Nl{constructor(){super("github.com")}static credential(t){return Is._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ar.credentialFromTaggedObject(t)}static credentialFromError(t){return Ar.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ar.credential(t.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Nl{constructor(){super("twitter.com")}static credential(t,n){return Is._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Sr.credentialFromTaggedObject(t)}static credentialFromError(t){return Sr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Sr.credential(n,s)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await zn._fromIdTokenResponse(t,s,l),d=M_(s);return new La({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=M_(s);return new La({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function M_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Fi{constructor(t,n,s,l){var c;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Ic.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Ic(t,n,s,l)}}function _0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ic._fromErrorAndOperation(r,c,t,s):c})}async function _b(r,t,n=!1){const s=await _l(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return La._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(r,t,n=!1){const{auth:s}=r;if(kn(s.app))return Promise.reject(ws(s));const l="reauthenticate";try{const c=await _l(r,_0(s,l,t,r),n);St(c.idToken,s,"internal-error");const d=lm(c.idToken);St(d,s,"internal-error");const{sub:g}=d;return St(r.uid===g,s,"user-mismatch"),La._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&li(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(r,t,n=!1){if(kn(r.app))return Promise.reject(ws(r));const s="signIn",l=await _0(r,s,t),c=await La._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function Eb(r,t,n,s){return On(r).onIdTokenChanged(t,n,s)}function Ab(r,t,n){return On(r).beforeAuthStateChanged(t,n)}function Sb(r,t,n,s){return On(r).onAuthStateChanged(t,n,s)}function bb(r){return On(r).signOut()}const Dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=1e3,Rb=10;class T0 extends v0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);nb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Rb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},wb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}T0.type="LOCAL";const Cb=T0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends v0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}E0.type="SESSION";const A0=E0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new Qc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await Ib(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=fm("",20);l.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(C){const D=C;if(D.data.eventId===y)switch(D.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(E),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function Ob(r){si().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function Nb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mb(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Vb(){return S0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="firebaseLocalStorageDb",xb=1,Oc="firebaseLocalStorage",w0="fbase_key";class Ml{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kc(r,t){return r.transaction([Oc],t?"readwrite":"readonly").objectStore(Oc)}function Pb(){const r=indexedDB.deleteDatabase(b0);return new Ml(r).toPromise()}function Pd(){const r=indexedDB.open(b0,xb);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Oc,{keyPath:w0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Oc)?t(s):(s.close(),await Pb(),t(await Pd()))})})}async function V_(r,t,n){const s=Kc(r,!0).put({[w0]:t,value:n});return new Ml(s).toPromise()}async function Ub(r,t){const n=Kc(r,!1).get(t),s=await new Ml(n).toPromise();return s===void 0?null:s.value}function x_(r,t){const n=Kc(r,!0).delete(t);return new Ml(n).toPromise()}const Lb=800,kb=3;class R0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>kb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qc._getInstance(Vb()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Nb(),!this.activeServiceWorker)return;this.sender=new Db(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Mb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Pd();return await V_(t,Dc,"1"),await x_(t,Dc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>V_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>Ub(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>x_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=Kc(l,!1).getAll();return new Ml(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R0.type="LOCAL";const zb=R0;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(r,t){return t?zi(t):(St(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends y0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return xa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return xa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return xa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Bb(r){return Tb(r.auth,new dm(r),r.bypassAuthState)}function jb(r){const{auth:t,user:n}=r;return St(n,t,"internal-error"),vb(n,new dm(r),r.bypassAuthState)}async function qb(r){const{auth:t,user:n}=r;return St(n,t,"internal-error"),_b(n,new dm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Bb;case"linkViaPopup":case"linkViaRedirect":return qb;case"reauthViaPopup":case"reauthViaRedirect":return jb;default:li(this.auth,"internal-error")}}resolve(t){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new Ol(2e3,1e4);async function Gb(r,t,n){if(kn(r.app))return Promise.reject(jn(r,"operation-not-supported-in-this-environment"));const s=Fc(r);k1(r,t,hm);const l=C0(s,n);return new As(s,"signInViaPopup",t,l).executeNotNull()}class As extends I0{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){qi(this.filter.length===1,"Popup operations only handle one event");const t=fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Hb.get())};t()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="pendingRedirect",pc=new Map;class Qb extends I0{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=pc.get(this.auth._key());if(!t){try{const s=await Kb(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}pc.set(this.auth._key(),t)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kb(r,t){const n=$b(t),s=Xb(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Yb(r,t){pc.set(r._key(),t)}function Xb(r){return zi(r._redirectPersistence)}function $b(r){return gc(Fb,r.config.apiKey,r.name)}async function Zb(r,t,n=!1){if(kn(r.app))return Promise.reject(ws(r));const s=Fc(r),l=C0(s,t),d=await new Qb(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=10*60*1e3;class Wb{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!tw(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!D0(t)){const l=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(jn(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Jb&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(t))}saveEventToCache(t){this.cachedEventUids.add(P_(t)),this.lastProcessedEventTime=Date.now()}}function P_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function D0({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function tw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(r,t={}){return Qa(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iw=/^https?/;async function rw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await ew(r);for(const n of t)try{if(sw(n))return}catch{}li(r,"unauthorized-domain")}function sw(r){const t=Vd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!iw.test(n))return!1;if(nw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Ol(3e4,6e4);function U_(){const r=si().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function ow(r){return new Promise((t,n)=>{var s,l,c;function d(){U_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{U_(),n(jn(r,"network-request-failed"))},timeout:aw.get()})}if(!((l=(s=si().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)t(gapi.iframes.getContext());else if(!((c=si().gapi)===null||c===void 0)&&c.load)d();else{const g=hb("iframefcb");return si()[g]=()=>{gapi.load?d():n(jn(r,"network-request-failed"))},ub(`${cb()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw yc=null,t})}let yc=null;function lw(r){return yc=yc||ow(r),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Ol(5e3,15e3),cw="__/auth/iframe",hw="emulator/auth/iframe",fw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mw(r){const t=r.config;St(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?am(t,hw):`https://${r.config.authDomain}/${cw}`,s={apiKey:t.apiKey,appName:r.name,v:Fa},l=dw.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Dl(s).slice(1)}`}async function gw(r){const t=await lw(r),n=si().gapi;return St(n,r,"internal-error"),t.open({where:document.body,url:mw(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fw,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=jn(r,"network-request-failed"),g=si().setTimeout(()=>{c(d)},uw.get());function p(){si().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yw=500,_w=600,vw="_blank",Tw="http://localhost";class L_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ew(r,t,n,s=yw,l=_w){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p=Object.assign(Object.assign({},pw),{width:s.toString(),height:l.toString(),top:c,left:d}),y=$e().toLowerCase();n&&(g=u0(y)?vw:n),o0(y)&&(t=t||Tw,p.scrollbars="yes");const E=Object.entries(p).reduce((D,[j,F])=>`${D}${j}=${F},`,"");if(eb(y)&&g!=="_self")return Aw(t||"",g),new L_(null);const C=window.open(t||"",g,E);St(C,r,"popup-blocked");try{C.focus()}catch{}return new L_(C)}function Aw(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="__/auth/handler",bw="emulator/auth/handler",ww=encodeURIComponent("fac");async function k_(r,t,n,s,l,c){St(r.config.authDomain,r,"auth-domain-config-required"),St(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Fa,eventId:l};if(t instanceof hm){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",AS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,C]of Object.entries({}))d[E]=C}if(t instanceof Nl){const E=t.getScopes().filter(C=>C!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const E of Object.keys(g))g[E]===void 0&&delete g[E];const p=await r._getAppCheckToken(),y=p?`#${ww}=${encodeURIComponent(p)}`:"";return`${Rw(r)}?${Dl(g).slice(1)}${y}`}function Rw({config:r}){return r.emulator?am(r,bw):`https://${r.authDomain}/${Sw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class Cw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A0,this._completeRedirectFn=Zb,this._overrideRedirectResult=Yb}async _openPopup(t,n,s,l){var c;qi((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await k_(t,n,s,Vd(),l);return Ew(t,d,fm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await k_(t,n,s,Vd(),l);return Ob(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(qi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await gw(t),s=new Wb(t);return n.register("authEvent",l=>(St(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ad,{type:Ad},l=>{var c;const d=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[Ad];d!==void 0&&n(!!d),li(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return m0()||l0()||um()}}const Iw=Cw;var z_="@firebase/auth",B_="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nw(r){Ua(new Cs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;St(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g0(r)},y=new ob(s,l,c,p);return db(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ua(new Cs("auth-internal",t=>{const n=Fc(t.getProvider("auth").getImmediate());return(s=>new Dw(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(z_,B_,Ow(r)),Cr(z_,B_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=5*60,Vw=Qv("authIdTokenMaxAge")||Mw;let j_=null;const xw=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Vw)return;const l=n==null?void 0:n.token;j_!==l&&(j_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Pw(r=Zv()){const t=nm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=fb(r,{popupRedirectResolver:Iw,persistence:[zb,Cb,A0]}),s=Qv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=xw(c.toString());Ab(n,d,()=>d(n.currentUser)),Eb(n,g=>d(g))}}const l=Gv("auth");return l?mb(n,`http://${l}`):Gc("Auth",!1),n}function Uw(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}lb({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=jn("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",Uw().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nw("Browser");var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,O0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,S){function w(){}w.prototype=S.prototype,O.D=S.prototype,O.prototype=new w,O.prototype.constructor=O,O.C=function(M,V,x){for(var R=Array(arguments.length-2),re=2;re<arguments.length;re++)R[re-2]=arguments[re];return S.prototype[V].apply(M,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,S,w){w||(w=0);var M=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)M[V]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(V=0;16>V;++V)M[V]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=O.g[0],w=O.g[1],V=O.g[2];var x=O.g[3],R=S+(x^w&(V^x))+M[0]+3614090360&4294967295;S=w+(R<<7&4294967295|R>>>25),R=x+(V^S&(w^V))+M[1]+3905402710&4294967295,x=S+(R<<12&4294967295|R>>>20),R=V+(w^x&(S^w))+M[2]+606105819&4294967295,V=x+(R<<17&4294967295|R>>>15),R=w+(S^V&(x^S))+M[3]+3250441966&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(x^w&(V^x))+M[4]+4118548399&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(V^S&(w^V))+M[5]+1200080426&4294967295,x=S+(R<<12&4294967295|R>>>20),R=V+(w^x&(S^w))+M[6]+2821735955&4294967295,V=x+(R<<17&4294967295|R>>>15),R=w+(S^V&(x^S))+M[7]+4249261313&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(x^w&(V^x))+M[8]+1770035416&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(V^S&(w^V))+M[9]+2336552879&4294967295,x=S+(R<<12&4294967295|R>>>20),R=V+(w^x&(S^w))+M[10]+4294925233&4294967295,V=x+(R<<17&4294967295|R>>>15),R=w+(S^V&(x^S))+M[11]+2304563134&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(x^w&(V^x))+M[12]+1804603682&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(V^S&(w^V))+M[13]+4254626195&4294967295,x=S+(R<<12&4294967295|R>>>20),R=V+(w^x&(S^w))+M[14]+2792965006&4294967295,V=x+(R<<17&4294967295|R>>>15),R=w+(S^V&(x^S))+M[15]+1236535329&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(V^x&(w^V))+M[1]+4129170786&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^V&(S^w))+M[6]+3225465664&4294967295,x=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(x^S))+M[11]+643717713&4294967295,V=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(V^x))+M[0]+3921069994&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^x&(w^V))+M[5]+3593408605&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^V&(S^w))+M[10]+38016083&4294967295,x=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(x^S))+M[15]+3634488961&4294967295,V=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(V^x))+M[4]+3889429448&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^x&(w^V))+M[9]+568446438&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^V&(S^w))+M[14]+3275163606&4294967295,x=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(x^S))+M[3]+4107603335&4294967295,V=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(V^x))+M[8]+1163531501&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^x&(w^V))+M[13]+2850285829&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^V&(S^w))+M[2]+4243563512&4294967295,x=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(x^S))+M[7]+1735328473&4294967295,V=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(V^x))+M[12]+2368359562&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(w^V^x)+M[5]+4294588738&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^V)+M[8]+2272392833&4294967295,x=S+(R<<11&4294967295|R>>>21),R=V+(x^S^w)+M[11]+1839030562&4294967295,V=x+(R<<16&4294967295|R>>>16),R=w+(V^x^S)+M[14]+4259657740&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^x)+M[1]+2763975236&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^V)+M[4]+1272893353&4294967295,x=S+(R<<11&4294967295|R>>>21),R=V+(x^S^w)+M[7]+4139469664&4294967295,V=x+(R<<16&4294967295|R>>>16),R=w+(V^x^S)+M[10]+3200236656&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^x)+M[13]+681279174&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^V)+M[0]+3936430074&4294967295,x=S+(R<<11&4294967295|R>>>21),R=V+(x^S^w)+M[3]+3572445317&4294967295,V=x+(R<<16&4294967295|R>>>16),R=w+(V^x^S)+M[6]+76029189&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^x)+M[9]+3654602809&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^V)+M[12]+3873151461&4294967295,x=S+(R<<11&4294967295|R>>>21),R=V+(x^S^w)+M[15]+530742520&4294967295,V=x+(R<<16&4294967295|R>>>16),R=w+(V^x^S)+M[2]+3299628645&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(V^(w|~x))+M[0]+4096336452&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~V))+M[7]+1126891415&4294967295,x=S+(R<<10&4294967295|R>>>22),R=V+(S^(x|~w))+M[14]+2878612391&4294967295,V=x+(R<<15&4294967295|R>>>17),R=w+(x^(V|~S))+M[5]+4237533241&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~x))+M[12]+1700485571&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~V))+M[3]+2399980690&4294967295,x=S+(R<<10&4294967295|R>>>22),R=V+(S^(x|~w))+M[10]+4293915773&4294967295,V=x+(R<<15&4294967295|R>>>17),R=w+(x^(V|~S))+M[1]+2240044497&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~x))+M[8]+1873313359&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~V))+M[15]+4264355552&4294967295,x=S+(R<<10&4294967295|R>>>22),R=V+(S^(x|~w))+M[6]+2734768916&4294967295,V=x+(R<<15&4294967295|R>>>17),R=w+(x^(V|~S))+M[13]+1309151649&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~x))+M[4]+4149444226&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~V))+M[11]+3174756917&4294967295,x=S+(R<<10&4294967295|R>>>22),R=V+(S^(x|~w))+M[2]+718787259&4294967295,V=x+(R<<15&4294967295|R>>>17),R=w+(x^(V|~S))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,O.g[2]=O.g[2]+V&4294967295,O.g[3]=O.g[3]+x&4294967295}s.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var w=S-this.blockSize,M=this.B,V=this.h,x=0;x<S;){if(V==0)for(;x<=w;)l(this,O,x),x+=this.blockSize;if(typeof O=="string"){for(;x<S;)if(M[V++]=O.charCodeAt(x++),V==this.blockSize){l(this,M),V=0;break}}else for(;x<S;)if(M[V++]=O[x++],V==this.blockSize){l(this,M),V=0;break}}this.h=V,this.o+=S},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var w=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=w&255,w/=256;for(this.u(O),O=Array(16),S=w=0;4>S;++S)for(var M=0;32>M;M+=8)O[w++]=this.g[S]>>>M&255;return O};function c(O,S){var w=g;return Object.prototype.hasOwnProperty.call(w,O)?w[O]:w[O]=S(O)}function d(O,S){this.h=S;for(var w=[],M=!0,V=O.length-1;0<=V;V--){var x=O[V]|0;M&&x==S||(w[V]=x,M=!1)}this.g=w}var g={};function p(O){return-128<=O&&128>O?c(O,function(S){return new d([S|0],0>S?-1:0)}):new d([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return C;if(0>O)return Q(y(-O));for(var S=[],w=1,M=0;O>=w;M++)S[M]=O/w|0,w*=4294967296;return new d(S,0)}function E(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return Q(E(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=y(Math.pow(S,8)),M=C,V=0;V<O.length;V+=8){var x=Math.min(8,O.length-V),R=parseInt(O.substring(V,V+x),S);8>x?(x=y(Math.pow(S,x)),M=M.j(x).add(y(R))):(M=M.j(w),M=M.add(y(R)))}return M}var C=p(0),D=p(1),j=p(16777216);r=d.prototype,r.m=function(){if(tt(this))return-Q(this).m();for(var O=0,S=1,w=0;w<this.g.length;w++){var M=this.i(w);O+=(0<=M?M:4294967296+M)*S,S*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(F(this))return"0";if(tt(this))return"-"+Q(this).toString(O);for(var S=y(Math.pow(O,6)),w=this,M="";;){var V=ut(w,S).g;w=st(w,V.j(S));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(O);if(w=V,F(w))return x+M;for(;6>x.length;)x="0"+x;M=x+M}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function F(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function tt(O){return O.h==-1}r.l=function(O){return O=st(this,O),tt(O)?-1:F(O)?0:1};function Q(O){for(var S=O.g.length,w=[],M=0;M<S;M++)w[M]=~O.g[M];return new d(w,~O.h).add(D)}r.abs=function(){return tt(this)?Q(this):this},r.add=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],M=0,V=0;V<=S;V++){var x=M+(this.i(V)&65535)+(O.i(V)&65535),R=(x>>>16)+(this.i(V)>>>16)+(O.i(V)>>>16);M=R>>>16,x&=65535,R&=65535,w[V]=R<<16|x}return new d(w,w[w.length-1]&-2147483648?-1:0)};function st(O,S){return O.add(Q(S))}r.j=function(O){if(F(this)||F(O))return C;if(tt(this))return tt(O)?Q(this).j(Q(O)):Q(Q(this).j(O));if(tt(O))return Q(this.j(Q(O)));if(0>this.l(j)&&0>O.l(j))return y(this.m()*O.m());for(var S=this.g.length+O.g.length,w=[],M=0;M<2*S;M++)w[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<O.g.length;V++){var x=this.i(M)>>>16,R=this.i(M)&65535,re=O.i(V)>>>16,ee=O.i(V)&65535;w[2*M+2*V]+=R*ee,ot(w,2*M+2*V),w[2*M+2*V+1]+=x*ee,ot(w,2*M+2*V+1),w[2*M+2*V+1]+=R*re,ot(w,2*M+2*V+1),w[2*M+2*V+2]+=x*re,ot(w,2*M+2*V+2)}for(M=0;M<S;M++)w[M]=w[2*M+1]<<16|w[2*M];for(M=S;M<2*S;M++)w[M]=0;return new d(w,0)};function ot(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function J(O,S){this.g=O,this.h=S}function ut(O,S){if(F(S))throw Error("division by zero");if(F(O))return new J(C,C);if(tt(O))return S=ut(Q(O),S),new J(Q(S.g),Q(S.h));if(tt(S))return S=ut(O,Q(S)),new J(Q(S.g),S.h);if(30<O.g.length){if(tt(O)||tt(S))throw Error("slowDivide_ only works with positive integers.");for(var w=D,M=S;0>=M.l(O);)w=Z(w),M=Z(M);var V=ht(w,1),x=ht(M,1);for(M=ht(M,2),w=ht(w,2);!F(M);){var R=x.add(M);0>=R.l(O)&&(V=V.add(w),x=R),M=ht(M,1),w=ht(w,1)}return S=st(O,V.j(S)),new J(V,S)}for(V=C;0<=O.l(S);){for(w=Math.max(1,Math.floor(O.m()/S.m())),M=Math.ceil(Math.log(w)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),x=y(w),R=x.j(S);tt(R)||0<R.l(O);)w-=M,x=y(w),R=x.j(S);F(x)&&(x=D),V=V.add(x),O=st(O,R)}return new J(V,O)}r.A=function(O){return ut(this,O).h},r.and=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],M=0;M<S;M++)w[M]=this.i(M)&O.i(M);return new d(w,this.h&O.h)},r.or=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],M=0;M<S;M++)w[M]=this.i(M)|O.i(M);return new d(w,this.h|O.h)},r.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],M=0;M<S;M++)w[M]=this.i(M)^O.i(M);return new d(w,this.h^O.h)};function Z(O){for(var S=O.g.length+1,w=[],M=0;M<S;M++)w[M]=O.i(M)<<1|O.i(M-1)>>>31;return new d(w,O.h)}function ht(O,S){var w=S>>5;S%=32;for(var M=O.g.length-w,V=[],x=0;x<M;x++)V[x]=0<S?O.i(x+w)>>>S|O.i(x+w+1)<<32-S:O.i(x+w);return new d(V,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,O0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=E,Ir=d}).apply(typeof q_<"u"?q_:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N0,ll,M0,_c,Ud,V0,x0,P0;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in _))break t;_=_[U]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,U={next:function(){if(!A&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function C(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function D(u,m,_){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:C,D.apply(null,arguments)}function j(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function F(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,U,q){for(var nt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)nt[Lt-2]=arguments[Lt];return m.prototype[U].apply(A,nt)}}function tt(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function Q(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const U=u.length||0,q=A.length||0;u.length=U+q;for(let nt=0;nt<q;nt++)u[U+nt]=A[nt]}else u.push(A)}}class st{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ot(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ut(u){return ut[" "](u),u}ut[" "]=function(){};var Z=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ht(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function O(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,m){let _,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(_ in A)u[_]=A[_];for(let q=0;q<w.length;q++)_=w[q],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function x(u){g.setTimeout(()=>{throw u},0)}function R(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,_){const A=ee.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ee=new st(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let it,ft=!1,jt=new re,I=()=>{const u=g.Promise.resolve(void 0);it=()=>{u.then($)}};var $=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){x(_)}var m=ee;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ft=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return u}();function Ct(u,m){if(et.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Z){t:{try{ut(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_t[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}F(Ct,et);var _t={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),Ut=0;function He(u,m,_,A,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=U,this.key=++Ut,this.da=this.fa=!1}function Nn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function hi(u){this.src=u,this.g={},this.h=0}hi.prototype.add=function(u,m,_,A,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var nt=zr(u,m,A,U);return-1<nt?(m=u[nt],_||(m.fa=!1)):(m=new He(m,this.src,q,!!A,U),m.fa=_,u.push(m)),m};function kr(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],U=Array.prototype.indexOf.call(A,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(A,U,1),q&&(Nn(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function zr(u,m,_,A){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==A)return U}return-1}var Br="closure_lm_"+(1e6*Math.random()|0),Za={};function Ll(u,m,_,A,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Ll(u,m[q],_,A,U);return null}return _=kl(_),u&&u[Ot]?u.K(m,_,y(A)?!!A.capture:!1,U):gn(u,m,_,!1,A,U)}function gn(u,m,_,A,U,q){if(!m)throw Error("Invalid event type");var nt=y(U)?!!U.capture:!!U,Lt=Ls(u);if(Lt||(u[Br]=Lt=new hi(u)),_=Lt.add(m,_,A,nt,q),_.proxy)return _;if(A=lh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)mt||(U=nt),U===void 0&&(U=!1),u.addEventListener(m.toString(),A,U);else if(u.attachEvent)u.attachEvent(jr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function lh(){function u(_){return m.call(u.src,u.listener,_)}const m=uh;return u}function Ja(u,m,_,A,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ja(u,m[q],_,A,U);else A=y(A)?!!A.capture:!!A,_=kl(_),u&&u[Ot]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=zr(q,_,A,U),-1<_&&(Nn(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ls(u))&&(m=u.g[m.toString()],u=-1,m&&(u=zr(m,_,A,U)),(_=-1<u?m[u]:null)&&Us(_))}function Us(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ot])kr(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(jr(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Ls(m))?(kr(_,u),_.h==0&&(_.src=null,m[Br]=null)):Nn(u)}}}function jr(u){return u in Za?Za[u]:Za[u]="on"+u}function uh(u,m){if(u.da)u=!0;else{m=new Ct(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Us(u),u=_.call(A,m)}return u}function Ls(u){return u=u[Br],u instanceof hi?u:null}var Wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function kl(u){return typeof u=="function"?u:(u[Wa]||(u[Wa]=function(m){return u.handleEvent(m)}),u[Wa])}function oe(){rt.call(this),this.i=new hi(this),this.M=this,this.F=null}F(oe,rt),oe.prototype[Ot]=!0,oe.prototype.removeEventListener=function(u,m,_,A){Ja(this,u,m,_,A)};function Qt(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new et(m,u);else if(m instanceof et)m.target=m.target||u;else{var U=m;m=new et(A,u),M(m,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var nt=m.g=_[q];U=an(nt,A,!0,m)&&U}if(nt=m.g=u,U=an(nt,A,!0,m)&&U,U=an(nt,A,!1,m)&&U,_)for(q=0;q<_.length;q++)nt=m.g=_[q],U=an(nt,A,!1,m)&&U}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Nn(_[A]);delete u.g[m],u.h--}}this.F=null},oe.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},oe.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function an(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var nt=m[q];if(nt&&!nt.da&&nt.capture==_){var Lt=nt.listener,Ee=nt.ha||nt.src;nt.fa&&kr(u.i,nt),U=Lt.call(Ee,A)!==!1&&U}}return U&&!A.defaultPrevented}function Ge(u,m,_){if(typeof u=="function")_&&(u=D(u,_));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function zl(u){u.g=Ge(()=>{u.g=null,u.i&&(u.i=!1,zl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ch extends rt{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:zl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(u){rt.call(this),this.h=u,this.g={}}F(qr,rt);var Hr=[];function Gr(u){ht(u.g,function(m,_){this.g.hasOwnProperty(_)&&Us(m)},u),u.g={}}qr.prototype.N=function(){qr.aa.N.call(this),Gr(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=g.JSON.stringify,ks=g.JSON.parse,Fr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function to(){}to.prototype.h=null;function eo(u){return u.h||(u.h=u.i())}function no(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function di(){et.call(this,"d")}F(di,et);function io(){et.call(this,"c")}F(io,et);var qn={},ro=null;function Qi(){return ro=ro||new oe}qn.La="serverreachability";function zs(u){et.call(this,qn.La,u)}F(zs,et);function Ki(u){const m=Qi();Qt(m,new zs(m))}qn.STAT_EVENT="statevent";function Bl(u,m){et.call(this,qn.STAT_EVENT,u),this.stat=m}F(Bl,et);function ne(u){const m=Qi();Qt(m,new Bl(m,u))}qn.Ma="timingevent";function Te(u,m){et.call(this,qn.Ma,u),this.size=m}F(Te,et);function ge(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function so(u,m,_,A,U,q){u.info(function(){if(u.g)if(q)for(var nt="",Lt=q.split("&"),Ee=0;Ee<Lt.length;Ee++){var kt=Lt[Ee].split("=");if(1<kt.length){var De=kt[0];kt=kt[1];var Ae=De.split("_");nt=2<=Ae.length&&Ae[1]=="type"?nt+(De+"="+kt+"&"):nt+(De+"=redacted&")}}else nt=null;else nt=q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+_+`
`+nt})}function hh(u,m,_,A,U,q,nt){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+_+`
`+q+" "+nt})}function Yi(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Qr(u,_)+(A?" "+A:"")})}function jl(u,m){u.info(function(){return"TIMEOUT: "+m})}pn.prototype.info=function(){};function Qr(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var nt=1;nt<U.length;nt++)U[nt]=""}}}}return Mn(_)}catch{return m}}var Xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hn;function Gn(){}F(Gn,to),Gn.prototype.g=function(){return new XMLHttpRequest},Gn.prototype.i=function(){return{}},Hn=new Gn;function Ze(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new he}function he(){this.i=null,this.g="",this.h=!1}var ao={},Bs={};function Vn(u,m,_){u.L=1,u.v=Zr(on(m)),u.m=_,u.P=!0,gi(u,null)}function gi(u,m){u.F=Date.now(),Kr(u),u.A=on(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),fo(_.i,"t",A),u.C=0,_=u.j.J,u.h=new he,u.g=iu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new ch(D(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Hr[0]=U.toString()),U=Hr);for(var q=0;q<U.length;q++){var nt=Ll(_,U[q],A||m.handleEvent,!1,m.h||m);if(!nt)break;m.g[nt.key]=nt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Ki(),so(u.i,u.u,u.A,u.l,u.R,u.m)}Ze.prototype.ca=function(u){u=u.target;const m=this.M;m&&Tn(u)==3?m.j():this.Y(u)},Ze.prototype.Y=function(u){try{if(u==this.g)t:{const Ae=Tn(this.g);var m=this.g.Ba();const Si=this.g.Z();if(!(3>Ae)&&(Ae!=3||this.g&&(this.h.h||this.g.oa()||Xl(this.g)))){this.J||Ae!=4||m==7||(m==8||0>=Si?Ki(3):Ki(2)),$i(this);var _=this.g.Z();this.X=_;e:if(ql(this)){var A=Xl(this.g);u="";var U=A.length,q=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),Fn(this);var nt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(q&&m==U-1)});A.length=0,this.h.g+=u,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=_==200,hh(this.i,this.u,this.A,this.l,this.R,Ae,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Ee=this.g;if((Lt=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ot(Lt)){var kt=Lt;break e}}kt=null}if(_=kt)Yi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,_);else{this.o=!1,this.s=3,ne(12),Pe(this),Fn(this);break t}}if(this.P){_=!0;let Ue;for(;!this.J&&this.C<nt.length;)if(Ue=Hl(this,nt),Ue==Bs){Ae==4&&(this.s=4,ne(14),_=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==ao){this.s=4,ne(15),Yi(this.i,this.l,nt,"[Invalid Chunk]"),_=!1;break}else Yi(this.i,this.l,Ue,null),Yr(this,Ue);if(ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||nt.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)Yi(this.i,this.l,nt,"[Invalid Chunked Response]"),Pe(this),Fn(this);else if(0<nt.length&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.ba&&!De.M&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),ss(De),De.M=!0,ne(11))}}else Yi(this.i,this.l,nt,null),Yr(this,nt);Ae==4&&Pe(this),this.o&&!this.J&&(Ae==4?tu(this.j,this):(this.o=!1,Kr(this)))}else ph(this.g),_==400&&0<nt.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Pe(this),Fn(this)}}}catch{}finally{}};function ql(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Hl(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Bs:(_=Number(m.substring(_,A)),isNaN(_)?ao:(A+=1,A+_>m.length?Bs:(m=m.slice(A,A+_),u.C=A+_,m)))}Ze.prototype.cancel=function(){this.J=!0,Pe(this)};function Kr(u){u.S=Date.now()+u.I,Gl(u,u.I)}function Gl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ge(D(u.ba,u),m)}function $i(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Ze.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(jl(this.i,this.A),this.L!=2&&(Ki(),ne(17)),Pe(this),this.s=2,Fn(this)):Gl(this,this.S-u)};function Fn(u){u.j.G==0||u.J||tu(u.j,u)}function Pe(u){$i(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Gr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Yr(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||oo(_.h,u))){if(!u.K&&oo(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Js(_),$s(_);else break t;_o(_),ne(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=ge(D(_.Za,_),6e3));if(1>=qs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ai(_,11)}else if((u.K||_.g==u)&&Js(_),!ot(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let kt=U[m];if(_.T=kt[0],kt=kt[1],_.G==2)if(kt[0]=="c"){_.K=kt[1],_.ia=kt[2];const De=kt[3];De!=null&&(_.la=De,_.j.info("VER="+_.la));const Ae=kt[4];Ae!=null&&(_.Aa=Ae,_.j.info("SVER="+_.Aa));const Si=kt[5];Si!=null&&typeof Si=="number"&&0<Si&&(A=1.5*Si,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Ue=u.g;if(Ue){const Jn=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jn){var q=A.h;q.g||Jn.indexOf("spdy")==-1&&Jn.indexOf("quic")==-1&&Jn.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Hs(q,q.h),q.h=null))}if(A.D){const To=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;To&&(A.ya=To,Xt(A.I,A.D,To))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var nt=u;if(A.qa=nu(A,A.J?A.ia:null,A.W),nt.K){Je(A.h,nt);var Lt=nt,Ee=A.L;Ee&&(Lt.I=Ee),Lt.B&&($i(Lt),Kr(Lt)),A.g=nt}else Jl(A);0<_.i.length&&Zs(_)}else kt[0]!="stop"&&kt[0]!="close"||Ai(_,7);else _.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Ai(_,7):po(_):kt[0]!="noop"&&_.l&&_.l.ta(kt),_.v=0)}}Ki(4)}catch{}}var Fl=class{constructor(u,m){this.g=u,this.map=m}};function pi(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function js(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qs(u){return u.h?1:u.g?u.g.size:0}function oo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Hs(u,m){u.g?u.g.add(m):u.h=m}function Je(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}pi.prototype.cancel=function(){if(this.i=lo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function lo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return tt(u.i)}function fh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function Gs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function uo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Gs(u),A=fh(u),U=A.length,q=0;q<U;q++)m.call(void 0,A[q],_&&_[q],u)}var Xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),U=null;if(0<=A){var q=u[_].substring(0,A);U=u[_].substring(A+1)}else q=u[_];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function pe(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pe){this.h=u.h,$r(this,u.j),this.o=u.o,this.g=u.g,Zi(this,u.s),this.l=u.l;var m=u.i,_=new _i;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),yi(this,_),this.m=u.m}else u&&(m=String(u).match(Xr))?(this.h=!1,$r(this,m[1]||"",!0),this.o=yn(m[2]||""),this.g=yn(m[3]||"",!0),Zi(this,m[4]),this.l=yn(m[5]||"",!0),yi(this,m[6]||"",!0),this.m=yn(m[7]||"")):(this.h=!1,this.i=new _i(null,this.h))}pe.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Jr(m,co,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Jr(m,co,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Jr(_,_.charAt(0)=="/"?mh:ho,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Jr(_,Fs)),u.join("")};function on(u){return new pe(u)}function $r(u,m,_){u.j=_?yn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Zi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function yi(u,m,_){m instanceof _i?(u.i=m,Kl(u.i,u.h)):(_||(m=Jr(m,gh)),u.i=new _i(m,u.h))}function Xt(u,m,_){u.i.set(m,_)}function Zr(u){return Xt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function yn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Jr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ql),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ql(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var co=/[#\/\?@]/g,ho=/[#\?:]/g,mh=/[#\?]/g,gh=/[#\?@]/g,Fs=/#/g;function _i(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function _n(u){u.g||(u.g=new Map,u.h=0,u.i&&dh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=_i.prototype,r.add=function(u,m){_n(this),this.i=null,u=Qn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function vi(u,m){_n(u),m=Qn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ti(u,m){return _n(u),m=Qn(u,m),u.g.has(m)}r.forEach=function(u,m){_n(this),this.g.forEach(function(_,A){_.forEach(function(U){u.call(m,U,A,this)},this)},this)},r.na=function(){_n(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const U=u[A];for(let q=0;q<U.length;q++)_.push(m[A])}return _},r.V=function(u){_n(this);let m=[];if(typeof u=="string")Ti(this,u)&&(m=m.concat(this.g.get(Qn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return _n(this),this.i=null,u=Qn(this,u),Ti(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function fo(u,m,_){vi(u,m),0<_.length&&(u.i=null,u.g.set(Qn(u,m),tt(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const q=encodeURIComponent(String(A)),nt=this.V(A);for(A=0;A<nt.length;A++){var U=q;nt[A]!==""&&(U+="="+encodeURIComponent(String(nt[A]))),u.push(U)}}return this.i=u.join("&")};function Qn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Kl(u,m){m&&!u.j&&(_n(u),u.i=null,u.g.forEach(function(_,A){var U=A.toLowerCase();A!=U&&(vi(this,A),fo(this,U,_))},u)),u.j=m}function Wr(u,m){const _=new pn;if(g.Image){const A=new Image;A.onload=j(vn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=j(vn,_,"TestLoadImage: error",!1,m,A),A.onabort=j(vn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=j(vn,_,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function xn(u,m){const _=new pn,A=new AbortController,U=setTimeout(()=>{A.abort(),vn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(q=>{clearTimeout(U),q.ok?vn(_,"TestPingServer: ok",!0,m):vn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),vn(_,"TestPingServer: error",!1,m)})}function vn(u,m,_,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(_)}catch{}}function ts(){this.g=new Fr}function Kn(u,m,_){const A=_||"";try{uo(u,function(U,q){let nt=U;y(U)&&(nt=Mn(U)),m.push(A+q+"="+encodeURIComponent(nt))})}catch(U){throw m.push(A+"type="+encodeURIComponent("_badmap")),U}}function Ji(u){this.l=u.Ub||null,this.j=u.eb||!1}F(Ji,to),Ji.prototype.g=function(){return new Ei(this.l,this.j)},Ji.prototype.i=function(u){return function(){return u}}({});function Ei(u,m){oe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Ei,oe),r=Ei.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function mo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Yn(this):Xn(this),this.readyState==3&&mo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Yn(this))},r.Qa=function(u){this.g&&(this.response=u,Yn(this))},r.ga=function(){this.g&&Yn(this)};function Yn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function go(u){let m="";return ht(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Ie(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=go(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Xt(u,m,_))}function Gt(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Gt,oe);var Qs=/^https?$/i,es=["POST","PUT"];r=Gt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hn.g(),this.v=this.o?eo(this.o):eo(Hn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Yl(this,q);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)_.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())_.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(es,m,void 0))||A||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,nt]of _)this.g.setRequestHeader(q,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ns(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Yl(this,q)}};function Yl(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ks(u),$n(u)}function Ks(u){u.A||(u.A=!0,Qt(u,"complete"),Qt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qt(this,"complete"),Qt(this,"abort"),$n(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$n(this,!0)),Gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ys(this):this.bb())},r.bb=function(){Ys(this)};function Ys(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)Ge(u.Ea,0,u);else if(Qt(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const nt=u.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=nt===0){var U=String(u.D).match(Xr)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),A=!Qs.test(U?U.toLowerCase():"")}_=A}if(_)Qt(u,"complete"),Qt(u,"success");else{u.m=6;try{var q=2<Tn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Ks(u)}}finally{$n(u)}}}}function $n(u,m){if(u.g){ns(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Qt(u,"ready");try{_.onreadystatechange=A}catch{}}}function ns(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ks(m)}};function Xl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ph(u){const m={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(ot(u[A]))continue;var _=V(u[A]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[U]||[];m[U]=q,q.push(_)}O(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Xs(u){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=is("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=is("baseRetryDelayMs",5e3,u),this.cb=is("retryDelaySeedMs",1e4,u),this.Wa=is("forwardChannelMaxRetries",2,u),this.wa=is("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pi(u&&u.concurrentRequestLimit),this.Da=new ts,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Xs.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ne(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=nu(this,null,this.W),Zs(this)};function po(u){if($l(u),u.G==3){var m=u.U++,_=on(u.I);if(Xt(_,"SID",u.K),Xt(_,"RID",m),Xt(_,"TYPE","terminate"),rs(u,_),m=new Ze(u,u.j,m),m.L=2,m.v=Zr(on(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=iu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Kr(m)}eu(u)}function $s(u){u.g&&(ss(u),u.g.cancel(),u.g=null)}function $l(u){$s(u),u.u&&(g.clearTimeout(u.u),u.u=null),Js(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Zs(u){if(!js(u.h)&&!u.s){u.s=!0;var m=u.Ga;it||I(),ft||(it(),ft=!0),jt.add(m,u),u.B=0}}function yh(u,m){return qs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ge(D(u.Ga,u,m),vo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Ze(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),M(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=Zl(this,U,m),_=on(this.I),Xt(_,"RID",u),Xt(_,"CVER",22),this.D&&Xt(_,"X-HTTP-Session-Id",this.D),rs(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(go(q)))+"&"+m:this.m&&Ie(_,this.m,q)),Hs(this.h,U),this.Ua&&Xt(_,"TYPE","init"),this.P?(Xt(_,"$req",m),Xt(_,"SID","null"),U.T=!0,Vn(U,_,null)):Vn(U,_,m),this.G=2}}else this.G==3&&(u?yo(this,u):this.i.length==0||js(this.h)||yo(this))};function yo(u,m){var _;m?_=m.l:_=u.U++;const A=on(u.I);Xt(A,"SID",u.K),Xt(A,"RID",_),Xt(A,"AID",u.T),rs(u,A),u.m&&u.o&&Ie(A,u.m,u.o),_=new Ze(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Zl(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Hs(u.h,_),Vn(_,A,m)}function rs(u,m){u.H&&ht(u.H,function(_,A){Xt(m,A,_)}),u.l&&uo({},function(_,A){Xt(m,A,_)})}function Zl(u,m,_){_=Math.min(u.i.length,_);var A=u.l?D(u.l.Na,u.l,u):null;t:{var U=u.i;let q=-1;for(;;){const nt=["count="+_];q==-1?0<_?(q=U[0].g,nt.push("ofs="+q)):q=0:nt.push("ofs="+q);let Lt=!0;for(let Ee=0;Ee<_;Ee++){let kt=U[Ee].g;const De=U[Ee].map;if(kt-=q,0>kt)q=Math.max(0,U[Ee].g-100),Lt=!1;else try{Kn(De,nt,"req"+kt+"_")}catch{A&&A(De)}}if(Lt){A=nt.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function Jl(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;it||I(),ft||(it(),ft=!0),jt.add(m,u),u.v=0}}function _o(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ge(D(u.Fa,u),vo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ge(D(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),$s(this),Wl(this))};function ss(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new Ze(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=on(u.qa);Xt(m,"RID","rpc"),Xt(m,"SID",u.K),Xt(m,"AID",u.T),Xt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xt(m,"TO",u.ja),Xt(m,"TYPE","xmlhttp"),rs(u,m),u.m&&u.o&&Ie(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Zr(on(m)),_.m=null,_.P=!0,gi(_,u)}r.Za=function(){this.C!=null&&(this.C=null,$s(this),_o(this),ne(19))};function Js(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function tu(u,m){var _=null;if(u.g==m){Js(u),ss(u),u.g=null;var A=2}else if(oo(u.h,m))_=m.D,Je(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;A=Qi(),Qt(A,new Te(A,_)),Zs(u)}else Jl(u);else if(U=m.s,U==3||U==0&&0<m.X||!(A==1&&yh(u,m)||A==2&&_o(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:Ai(u,5);break;case 4:Ai(u,10);break;case 3:Ai(u,6);break;default:Ai(u,2)}}}function vo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ai(u,m){if(u.j.info("Error code "+m),m==2){var _=D(u.fb,u),A=u.Xa;const U=!A;A=new pe(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||$r(A,"https"),Zr(A),U?Wr(A.toString(),_):xn(A.toString(),_)}else ne(2);u.G=0,u.l&&u.l.sa(m),eu(u),$l(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function eu(u){if(u.G=0,u.ka=[],u.l){const m=lo(u.h);(m.length!=0||u.i.length!=0)&&(Q(u.ka,m),Q(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function nu(u,m,_){var A=_ instanceof pe?on(_):new pe(_);if(A.g!="")m&&(A.g=m+"."+A.g),Zi(A,A.s);else{var U=g.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new pe(null);A&&$r(q,A),m&&(q.g=m),U&&Zi(q,U),_&&(q.l=_),A=q}return _=u.D,m=u.ya,_&&m&&Xt(A,_,m),Xt(A,"VER",u.la),rs(u,A),A}function iu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Gt(new Ji({eb:_})):new Gt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}r=ru.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ws(){}Ws.prototype.g=function(u,m){return new We(u,m)};function We(u,m){oe.call(this),this.g=new Xs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ot(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ot(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Zn(this)}F(We,oe),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){po(this.g)},We.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Mn(u),u=_);m.i.push(new Fl(m.Ya++,u)),m.G==3&&Zs(m)},We.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,We.aa.N.call(this)};function su(u){di.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}F(su,di);function au(){io.call(this),this.status=1}F(au,io);function Zn(u){this.g=u}F(Zn,ru),Zn.prototype.ua=function(){Qt(this.g,"a")},Zn.prototype.ta=function(u){Qt(this.g,new su(u))},Zn.prototype.sa=function(u){Qt(this.g,new au)},Zn.prototype.ra=function(){Qt(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,P0=function(){return new Ws},x0=function(){return Qi()},V0=qn,Ud={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,_c=Xi,mi.COMPLETE="complete",M0=mi,no.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",oe.prototype.listen=oe.prototype.K,ll=no,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,N0=Gt}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const H_="@firebase/firestore",G_="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new tm("@firebase/firestore");function Ia(){return Ds.logLevel}function at(r,...t){if(Ds.logLevel<=xt.DEBUG){const n=t.map(mm);Ds.debug(`Firestore (${Ka}): ${r}`,...n)}}function Hi(r,...t){if(Ds.logLevel<=xt.ERROR){const n=t.map(mm);Ds.error(`Firestore (${Ka}): ${r}`,...n)}}function ka(r,...t){if(Ds.logLevel<=xt.WARN){const n=t.map(mm);Ds.warn(`Firestore (${Ka}): ${r}`,...n)}}function mm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,U0(r,s,n)}function U0(r,t,n){let s=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Hi(s),new Error(s)}function Ft(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||U0(t,l,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Fi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Lw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class kw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zw{constructor(t){this.t=t,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ft(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Dr,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Dr)}},0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string",31837,{l:s}),new L0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string",2055,{h:t}),new Ye(t)}}class Bw{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jw{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new Bw(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qw{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ft(this.o===void 0,3512);const s=c=>{c.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>s(c))};const l=c=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new F_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=Hw(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Dt(r,t){return r<t?-1:r>t?1:0}function Ld(r,t){let n=0;for(;n<r.length&&n<t.length;){const s=r.codePointAt(n),l=t.codePointAt(n);if(s!==l){if(s<128&&l<128)return Dt(s,l);{const c=k0(),d=Gw(c.encode(Q_(r,n)),c.encode(Q_(t,n)));return d!==0?d:Dt(s,l)}}n+=s>65535?2:1}return Dt(r.length,t.length)}function Q_(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function Gw(r,t){for(let n=0;n<r.length&&n<t.length;++n)if(r[n]!==t[n])return Dt(r[n],t[n]);return Dt(r.length,t.length)}function za(r,t,n){return r.length===t.length&&r.every((s,l)=>n(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=-62135596800,Y_=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(t){return Re.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Y_);return new Re(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new pt(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pt(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<K_)throw new pt(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y_}_compareTo(t){return this.seconds===t.seconds?Dt(this.nanoseconds,t.nanoseconds):Dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-K_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Re(0,0))}static max(){return new bt(new Re(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__name__";class ri{constructor(t,n,s){n===void 0?n=0:n>t.length&&At(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&At(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ri.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ri?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ri.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Dt(t.length,n.length)}static compareSegments(t,n){const s=ri.isNumericId(t),l=ri.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ri.extractNumericId(t).compare(ri.extractNumericId(n)):Ld(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ir.fromString(t.substring(4,t.length-2))}}class ce extends ri{construct(t,n,s){return new ce(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new pt(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const Fw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class je extends ri{construct(t,n,s){return new je(t,n,s)}static isValidIdentifier(t){return Fw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),je.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X_}static keyField(){return new je([X_])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new pt(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new pt(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pt(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new pt(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new je(n)}static emptyPath(){return new je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.path=t}static fromPath(t){return new yt(ce.fromString(t))}static fromName(t){return new yt(ce.fromString(t).popFirst(5))}static empty(){return new yt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ce.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yt(new ce(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=-1;function Qw(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=bt.fromTimestamp(s===1e9?new Re(n+1,0):new Re(n,s));return new Or(l,yt.empty(),t)}function Kw(r){return new Or(r.readTime,r.key,vl)}class Or{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Or(bt.min(),yt.empty(),vl)}static max(){return new Or(bt.max(),yt.empty(),vl)}}function Yw(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=yt.comparator(r.documentKey,t.documentKey),n!==0?n:Dt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $w{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==Xw)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):X.reject(n)}static resolve(t){return new X((n,s)=>{n(t)})}static reject(t){return new X((n,s)=>{s(t)})}static waitFor(t){return new X((n,s)=>{let l=0,c=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++c,d&&c===l&&n()},p=>s(p))}),d=!0,c===l&&n()})}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next(l=>l?X.resolve(l):s());return n}static forEach(t,n){const s=[];return t.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(t,n){return new X((s,l)=>{const c=t.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(t[y]).next(E=>{d[y]=E,++g,g===c&&s(d)},E=>l(E))}})}static doWhile(t,n){return new X((s,l)=>{const c=()=>{t()===!0?n().next(()=>{c()},l):s()};c()})}}function Zw(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xa(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Yc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function Xc(r){return r==null}function Nc(r){return r===0&&1/r==-1/0}function Jw(r){return typeof r=="number"&&Number.isInteger(r)&&!Nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="";function Ww(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=$_(t)),t=tR(r.get(n),t);return $_(t)}function tR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case B0:n+="";break;default:n+=c}}return n}function $_(r){return r+B0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Ms(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function j0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n){this.comparator=t,this.root=n||Be.EMPTY}insert(t,n){return new ae(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(t){return new ae(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Be.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cc(this.root,t,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cc(this.root,t,this.comparator,!0)}}class cc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Be{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Be.RED,this.left=l??Be.EMPTY,this.right=c??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Be(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Be.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw At(27949);return t+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Be(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new ae(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(t){return new J_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class J_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.fields=t,t.sort(je.comparator)}static empty(){return new Bn([])}unionWith(t){let n=new Ce(je.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Bn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return za(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new q0("Invalid base64 string: "+c):c}}(t);return new qe(n)}static fromUint8Array(t){const n=function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c}(t);return new qe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const eR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(r){if(Ft(!!r,39018),typeof r=="string"){let t=0;const n=eR.exec(r);if(Ft(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:me(r.seconds),nanos:me(r.nanos)}}function me(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Mr(r){return typeof r=="string"?qe.fromBase64String(r):qe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="server_timestamp",G0="__type__",F0="__previous_value__",Q0="__local_write_time__";function pm(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[G0])===null||n===void 0?void 0:n.stringValue)===H0}function $c(r){const t=r.mapValue.fields[F0];return pm(t)?$c(t):t}function Tl(r){const t=Nr(r.mapValue.fields[Q0].timestampValue);return new Re(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(t,n,s,l,c,d,g,p,y,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Mc="(default)";class El{constructor(t,n){this.projectId=t,this.database=n||Mc}static empty(){return new El("","")}get isDefaultDatabase(){return this.database===Mc}isEqual(t){return t instanceof El&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__type__",iR="__max__",hc={mapValue:{}},Y0="__vector__",Vc="value";function Vr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pm(r)?4:sR(r)?9007199254740991:rR(r)?10:11:At(28295,{value:r})}function ui(r,t){if(r===t)return!0;const n=Vr(r);if(n!==Vr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Tl(r).isEqual(Tl(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Nr(l.timestampValue),g=Nr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,c){return Mr(l.bytesValue).isEqual(Mr(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,c){return me(l.geoPointValue.latitude)===me(c.geoPointValue.latitude)&&me(l.geoPointValue.longitude)===me(c.geoPointValue.longitude)}(r,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return me(l.integerValue)===me(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=me(l.doubleValue),g=me(c.doubleValue);return d===g?Nc(d)===Nc(g):isNaN(d)&&isNaN(g)}return!1}(r,t);case 9:return za(r.arrayValue.values||[],t.arrayValue.values||[],ui);case 10:case 11:return function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(Z_(d)!==Z_(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!ui(d[p],g[p])))return!1;return!0}(r,t);default:return At(52216,{left:r})}}function Al(r,t){return(r.values||[]).find(n=>ui(n,t))!==void 0}function Ba(r,t){if(r===t)return 0;const n=Vr(r),s=Vr(t);if(n!==s)return Dt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(r.booleanValue,t.booleanValue);case 2:return function(c,d){const g=me(c.integerValue||c.doubleValue),p=me(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,t);case 3:return W_(r.timestampValue,t.timestampValue);case 4:return W_(Tl(r),Tl(t));case 5:return Ld(r.stringValue,t.stringValue);case 6:return function(c,d){const g=Mr(c),p=Mr(d);return g.compareTo(p)}(r.bytesValue,t.bytesValue);case 7:return function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const E=Dt(g[y],p[y]);if(E!==0)return E}return Dt(g.length,p.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,d){const g=Dt(me(c.latitude),me(d.latitude));return g!==0?g:Dt(me(c.longitude),me(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return tv(r.arrayValue,t.arrayValue);case 10:return function(c,d){var g,p,y,E;const C=c.fields||{},D=d.fields||{},j=(g=C[Vc])===null||g===void 0?void 0:g.arrayValue,F=(p=D[Vc])===null||p===void 0?void 0:p.arrayValue,tt=Dt(((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0,((E=F==null?void 0:F.values)===null||E===void 0?void 0:E.length)||0);return tt!==0?tt:tv(j,F)}(r.mapValue,t.mapValue);case 11:return function(c,d){if(c===hc.mapValue&&d===hc.mapValue)return 0;if(c===hc.mapValue)return 1;if(d===hc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let C=0;C<p.length&&C<E.length;++C){const D=Ld(p[C],E[C]);if(D!==0)return D;const j=Ba(g[p[C]],y[E[C]]);if(j!==0)return j}return Dt(p.length,E.length)}(r.mapValue,t.mapValue);default:throw At(23264,{Pe:n})}}function W_(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Dt(r,t);const n=Nr(r),s=Nr(t),l=Dt(n.seconds,s.seconds);return l!==0?l:Dt(n.nanos,s.nanos)}function tv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Ba(n[l],s[l]);if(c)return c}return Dt(n.length,s.length)}function ja(r){return kd(r)}function kd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Nr(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Mr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return yt.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=kd(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${kd(n.fields[d])}`;return l+"}"}(r.mapValue):At(61005,{value:r})}function vc(r){switch(Vr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=$c(r);return t?16+vc(t):16;case 5:return 2*r.stringValue.length;case 6:return Mr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+vc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return Ms(s.fields,(c,d)=>{l+=c.length+vc(d)}),l}(r.mapValue);default:throw At(13486,{value:r})}}function zd(r){return!!r&&"integerValue"in r}function ym(r){return!!r&&"arrayValue"in r}function ev(r){return!!r&&"nullValue"in r}function nv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tc(r){return!!r&&"mapValue"in r}function rR(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[K0])===null||n===void 0?void 0:n.stringValue)===Y0}function dl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Ms(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=dl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=dl(r.arrayValue.values[n]);return t}return Object.assign({},r)}function sR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.value=t}static empty(){return new In({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Tc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=dl(n)}setAll(t){let n=je.emptyPath(),s={},l=[];t.forEach((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}d?s[g.lastSegment()]=dl(d):l.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ui(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Tc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Ms(n,(l,c)=>t[l]=c);for(const l of s)delete t[l]}clone(){return new In(dl(this.value))}}function X0(r){const t=[];return Ms(r.fields,(n,s)=>{const l=new je([n]);if(Tc(s)){const c=X0(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)}),new Bn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t,n,s,l,c,d,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Xe(t,0,bt.min(),bt.min(),bt.min(),In.empty(),0)}static newFoundDocument(t,n,s,l){return new Xe(t,1,n,bt.min(),s,l,0)}static newNoDocument(t,n){return new Xe(t,2,n,bt.min(),bt.min(),In.empty(),0)}static newUnknownDocument(t,n){return new Xe(t,3,n,bt.min(),bt.min(),In.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n){this.position=t,this.inclusive=n}}function iv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=yt.comparator(yt.fromName(d.referenceValue),n.key):s=Ba(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function rv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ui(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n="asc"){this.field=t,this.dir=n}}function aR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{}class we extends $0{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new lR(t,n,s):n==="array-contains"?new hR(t,s):n==="in"?new fR(t,s):n==="not-in"?new dR(t,s):n==="array-contains-any"?new mR(t,s):new we(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new uR(t,s):new cR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ba(n,this.value)):n!==null&&Vr(this.value)===Vr(n)&&this.matchesComparison(Ba(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends $0{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new ci(t,n)}matches(t){return Z0(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Z0(r){return r.op==="and"}function J0(r){return oR(r)&&Z0(r)}function oR(r){for(const t of r.filters)if(t instanceof ci)return!1;return!0}function Bd(r){if(r instanceof we)return r.field.canonicalString()+r.op.toString()+ja(r.value);if(J0(r))return r.filters.map(t=>Bd(t)).join(",");{const t=r.filters.map(n=>Bd(n)).join(",");return`${r.op}(${t})`}}function W0(r,t){return r instanceof we?function(s,l){return l instanceof we&&s.op===l.op&&s.field.isEqual(l.field)&&ui(s.value,l.value)}(r,t):r instanceof ci?function(s,l){return l instanceof ci&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,d,g)=>c&&W0(d,l.filters[g]),!0):!1}(r,t):void At(19439)}function tT(r){return r instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${ja(n.value)}`}(r):r instanceof ci?function(n){return n.op.toString()+" {"+n.getFilters().map(tT).join(" ,")+"}"}(r):"Filter"}class lR extends we{constructor(t,n,s){super(t,n,s),this.key=yt.fromName(s.referenceValue)}matches(t){const n=yt.comparator(t.key,this.key);return this.matchesComparison(n)}}class uR extends we{constructor(t,n){super(t,"in",n),this.keys=eT("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class cR extends we{constructor(t,n){super(t,"not-in",n),this.keys=eT("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function eT(r,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>yt.fromName(s.referenceValue))}class hR extends we{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ym(n)&&Al(n.arrayValue,this.value)}}class fR extends we{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Al(this.value.arrayValue,n)}}class dR extends we{constructor(t,n){super(t,"not-in",n)}matches(t){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Al(this.value.arrayValue,n)}}class mR extends we{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Al(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(t,n=null,s=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Ie=null}}function sv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new gR(r,t,n,s,l,c,d)}function _m(r){const t=wt(r);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Bd(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Xc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ja(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ja(s)).join(",")),t.Ie=n}return t.Ie}function vm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!aR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!W0(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!rv(r.startAt,t.startAt)&&rv(r.endAt,t.endAt)}function jd(r){return yt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,n=null,s=[],l=[],c=null,d="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function pR(r,t,n,s,l,c,d,g){return new Zc(r,t,n,s,l,c,d,g)}function Tm(r){return new Zc(r)}function av(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yR(r){return r.collectionGroup!==null}function ml(r){const t=wt(r);if(t.Ee===null){t.Ee=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ee.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ce(je.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ee.push(new Pc(c,s))}),n.has(je.keyField().canonicalString())||t.Ee.push(new Pc(je.keyField(),s))}return t.Ee}function ai(r){const t=wt(r);return t.de||(t.de=_R(t,ml(r))),t.de}function _R(r,t){if(r.limitType==="F")return sv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Pc(l.field,c)});const n=r.endAt?new xc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new xc(r.startAt.position,r.startAt.inclusive):null;return sv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function qd(r,t,n){return new Zc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Jc(r,t){return vm(ai(r),ai(t))&&r.limitType===t.limitType}function nT(r){return`${_m(ai(r))}|lt:${r.limitType}`}function Da(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>tT(l)).join(", ")}]`),Xc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>ja(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>ja(l)).join(",")),`Target(${s})`}(ai(r))}; limitType=${r.limitType})`}function Wc(r,t){return t.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):yt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,t)&&function(s,l){for(const c of ml(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,g,p){const y=iv(d,g,p);return d.inclusive?y<=0:y<0}(s.startAt,ml(s),l)||s.endAt&&!function(d,g,p){const y=iv(d,g,p);return d.inclusive?y>=0:y>0}(s.endAt,ml(s),l))}(r,t)}function vR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function iT(r){return(t,n)=>{let s=!1;for(const l of ml(r)){const c=TR(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function TR(r,t,n){const s=r.field.isKeyField()?yt.comparator(t.key,n.key):function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Ba(p,y):At(42886)}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return At(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ms(this.inner,(n,s)=>{for(const[l,c]of s)t(l,c)})}isEmpty(){return j0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new ae(yt.comparator);function Gi(){return ER}const rT=new ae(yt.comparator);function ul(...r){let t=rT;for(const n of r)t=t.insert(n.key,n);return t}function sT(r){let t=rT;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Ss(){return gl()}function aT(){return gl()}function gl(){return new Vs(r=>r.toString(),(r,t)=>r.isEqual(t))}const AR=new ae(yt.comparator),SR=new Ce(yt.comparator);function Pt(...r){let t=SR;for(const n of r)t=t.add(n);return t}const bR=new Ce(Dt);function wR(){return bR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(t)?"-0":t}}function oT(r){return{integerValue:""+r}}function RR(r,t){return Jw(t)?oT(t):Em(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this._=void 0}}function CR(r,t,n){return r instanceof Uc?function(l,c){const d={fields:{[G0]:{stringValue:H0},[Q0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&pm(c)&&(c=$c(c)),c&&(d.fields[F0]=c),{mapValue:d}}(n,t):r instanceof Sl?uT(r,t):r instanceof bl?cT(r,t):function(l,c){const d=lT(l,c),g=ov(d)+ov(l.Re);return zd(d)&&zd(l.Re)?oT(g):Em(l.serializer,g)}(r,t)}function IR(r,t,n){return r instanceof Sl?uT(r,t):r instanceof bl?cT(r,t):n}function lT(r,t){return r instanceof Lc?function(s){return zd(s)||function(c){return!!c&&"doubleValue"in c}(s)}(t)?t:{integerValue:0}:null}class Uc extends th{}class Sl extends th{constructor(t){super(),this.elements=t}}function uT(r,t){const n=hT(t);for(const s of r.elements)n.some(l=>ui(l,s))||n.push(s);return{arrayValue:{values:n}}}class bl extends th{constructor(t){super(),this.elements=t}}function cT(r,t){let n=hT(t);for(const s of r.elements)n=n.filter(l=>!ui(l,s));return{arrayValue:{values:n}}}class Lc extends th{constructor(t,n){super(),this.serializer=t,this.Re=n}}function ov(r){return me(r.integerValue||r.doubleValue)}function hT(r){return ym(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function DR(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof Sl&&l instanceof Sl||s instanceof bl&&l instanceof bl?za(s.elements,l.elements,ui):s instanceof Lc&&l instanceof Lc?ui(s.Re,l.Re):s instanceof Uc&&l instanceof Uc}(r.transform,t.transform)}class OR{constructor(t,n){this.version=t,this.transformResults=n}}class Bi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Bi}static exists(t){return new Bi(void 0,t)}static updateTime(t){return new Bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ec(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class eh{}function fT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new mT(r.key,Bi.none()):new Vl(r.key,r.data,Bi.none());{const n=r.data,s=In.empty();let l=new Ce(je.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new xs(r.key,s,new Bn(l.toArray()),Bi.none())}}function NR(r,t,n){r instanceof Vl?function(l,c,d){const g=l.value.clone(),p=uv(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,n):r instanceof xs?function(l,c,d){if(!Ec(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=uv(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(dT(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,t,n):function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,n)}function pl(r,t,n,s){return r instanceof Vl?function(c,d,g,p){if(!Ec(c.precondition,d))return g;const y=c.value.clone(),E=cv(c.fieldTransforms,p,d);return y.setAll(E),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,t,n,s):r instanceof xs?function(c,d,g,p){if(!Ec(c.precondition,d))return g;const y=cv(c.fieldTransforms,p,d),E=d.data;return E.setAll(dT(c)),E.setAll(y),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(C=>C.field))}(r,t,n,s):function(c,d,g){return Ec(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,t,n)}function MR(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=lT(s.transform,l||null);c!=null&&(n===null&&(n=In.empty()),n.set(s.field,c))}return n||null}function lv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&za(s,l,(c,d)=>DR(c,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Vl extends eh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class xs extends eh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function dT(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function uv(r,t,n){const s=new Map;Ft(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);s.set(c.field,IR(d,g,n[l]))}return s}function cv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,CR(c,d,t))}return s}class mT extends eh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VR extends eh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&NR(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=pl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=pl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=aT();return this.mutations.forEach(l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const p=fT(d,g);p!==null&&s.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(bt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pt())}isEqual(t){return this.batchId===t.batchId&&za(this.mutations,t.mutations,(n,s)=>lv(n,s))&&za(this.baseMutations,t.baseMutations,(n,s)=>lv(n,s))}}class Am{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Ft(t.mutations.length===s.length,58842,{fe:t.mutations.length,ge:s.length});let l=function(){return AR}();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Am(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Bt;function LR(r){switch(r){case W.OK:return At(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return At(15467,{code:r})}}function gT(r){if(r===void 0)return Hi("GRPC error has no .code"),W.UNKNOWN;switch(r){case ve.OK:return W.OK;case ve.CANCELLED:return W.CANCELLED;case ve.UNKNOWN:return W.UNKNOWN;case ve.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ve.INTERNAL:return W.INTERNAL;case ve.UNAVAILABLE:return W.UNAVAILABLE;case ve.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ve.NOT_FOUND:return W.NOT_FOUND;case ve.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ve.ABORTED:return W.ABORTED;case ve.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ve.DATA_LOSS:return W.DATA_LOSS;default:return At(39323,{code:r})}}(Bt=ve||(ve={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new Ir([4294967295,4294967295],0);function hv(r){const t=k0().encode(r),n=new O0;return n.update(t),new Uint8Array(n.digest())}function fv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Ir([n,s],0),new Ir([l,c],0)]}class Sm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new cl(`Invalid padding: ${n}`);if(s<0)throw new cl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new cl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Ir.fromNumber(this.pe)}we(t,n,s){let l=t.add(n.multiply(Ir.fromNumber(s)));return l.compare(kR)===1&&(l=new Ir([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=hv(t),[s,l]=fv(n);for(let c=0;c<this.hashCount;c++){const d=this.we(s,l,c);if(!this.be(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Sm(c,l,n);return s.forEach(g=>d.insert(g)),d}insert(t){if(this.pe===0)return;const n=hv(t),[s,l]=fv(n);for(let c=0;c<this.hashCount;c++){const d=this.we(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,xl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new nh(bt.min(),l,new ae(Dt),Gi(),Pt())}}class xl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new xl(s,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,n,s,l){this.De=t,this.removedTargetIds=n,this.key=s,this.ve=l}}class pT{constructor(t,n){this.targetId=t,this.Ce=n}}class yT{constructor(t,n,s=qe.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class dv{constructor(){this.Fe=0,this.Me=mv(),this.xe=qe.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Pt(),n=Pt(),s=Pt();return this.Me.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:At(38017,{changeType:c})}}),new xl(this.xe,this.Oe,t,n,s)}Qe(){this.Ne=!1,this.Me=mv()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ft(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class zR{constructor(t){this.ze=t,this.je=new Map,this.He=Gi(),this.Je=fc(),this.Ye=fc(),this.Ze=new ae(Dt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const s=this.rt(n);switch(t.state){case 0:this.it(n)&&s.ke(t.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(t.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(t.resumeToken));break;default:At(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(t){const n=t.targetId,s=t.Ce.count,l=this._t(n);if(l){const c=l.target;if(jd(c))if(s===0){const d=new yt(c.path);this.tt(n,d,Xe.newNoDocument(d,bt.min()))}else Ft(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const g=this.ct(t),p=g?this.lt(g,t,d):1;if(p!==0){this.st(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=Mr(s).toUint8Array()}catch(p){if(p instanceof q0)return ka("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Sm(d,l,c)}catch(p){return ka(p instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.pe===0?null:g}lt(t,n,s){return n.Ce.count===s-this.Tt(t,n.targetId)?0:2}Tt(t,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const d=this.ze.Pt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.tt(n,c,null),l++)}),l}It(t){const n=new Map;this.je.forEach((c,d)=>{const g=this._t(d);if(g){if(c.current&&jd(g.target)){const p=new yt(g.target.path);this.Et(p).has(d)||this.dt(d,p)||this.tt(d,p,Xe.newNoDocument(p,t))}c.Le&&(n.set(d,c.qe()),c.Qe())}});let s=Pt();this.Ye.forEach((c,d)=>{let g=!0;d.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.He.forEach((c,d)=>d.setReadTime(t));const l=new nh(t,n,this.Ze,this.He,s);return this.He=Gi(),this.Je=fc(),this.Ye=fc(),this.Ze=new ae(Dt),l}et(t,n){if(!this.it(t))return;const s=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,s){if(!this.it(t))return;const l=this.rt(t);this.dt(t,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),s&&(this.He=this.He.insert(n,s))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new dv,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ce(Dt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ce(Dt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||at("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new dv),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function fc(){return new ae(yt.comparator)}function mv(){return new ae(yt.comparator)}const BR={asc:"ASCENDING",desc:"DESCENDING"},jR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qR={and:"AND",or:"OR"};class HR{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Hd(r,t){return r.useProto3Json||Xc(t)?t:{value:t}}function kc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _T(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function GR(r,t){return kc(r,t.toTimestamp())}function oi(r){return Ft(!!r,49232),bt.fromTimestamp(function(n){const s=Nr(n);return new Re(s.seconds,s.nanos)}(r))}function bm(r,t){return Gd(r,t).canonicalString()}function Gd(r,t){const n=function(l){return new ce(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?n:n.child(t)}function vT(r){const t=ce.fromString(r);return Ft(bT(t),10190,{key:t.toString()}),t}function Fd(r,t){return bm(r.databaseId,t.path)}function Sd(r,t){const n=vT(t);if(n.get(1)!==r.databaseId.projectId)throw new pt(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new pt(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new yt(ET(n))}function TT(r,t){return bm(r.databaseId,t)}function FR(r){const t=vT(r);return t.length===4?ce.emptyPath():ET(t)}function Qd(r){return new ce(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ET(r){return Ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function gv(r,t,n){return{name:Fd(r,t),fields:n.value.mapValue.fields}}function QR(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:At(39313,{state:y})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(y,E){return y.useProto3Json?(Ft(E===void 0||typeof E=="string",58123),qe.fromBase64String(E||"")):(Ft(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),qe.fromUint8Array(E||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(y){const E=y.code===void 0?W.UNKNOWN:gT(y.code);return new pt(E,y.message||"")}(d);n=new yT(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Sd(r,s.document.name),c=oi(s.document.updateTime),d=s.document.createTime?oi(s.document.createTime):bt.min(),g=new In({mapValue:{fields:s.document.fields}}),p=Xe.newFoundDocument(l,c,d,g),y=s.targetIds||[],E=s.removedTargetIds||[];n=new Ac(y,E,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Sd(r,s.document),c=s.readTime?oi(s.readTime):bt.min(),d=Xe.newNoDocument(l,c),g=s.removedTargetIds||[];n=new Ac([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Sd(r,s.document),c=s.removedTargetIds||[];n=new Ac([],c,l,null)}else{if(!("filter"in t))return At(11601,{Vt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new UR(l,c),g=s.targetId;n=new pT(g,d)}}return n}function KR(r,t){let n;if(t instanceof Vl)n={update:gv(r,t.key,t.value)};else if(t instanceof mT)n={delete:Fd(r,t.key)};else if(t instanceof xs)n={update:gv(r,t.key,t.data),updateMask:nC(t.fieldMask)};else{if(!(t instanceof VR))return At(16599,{ft:t.type});n={verify:Fd(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(c,d){const g=d.transform;if(g instanceof Uc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Sl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof bl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Lc)return{fieldPath:d.field.canonicalString(),increment:g.Re};throw At(20930,{transform:d.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:GR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:At(27497)}(r,t.precondition)),n}function YR(r,t){return r&&r.length>0?(Ft(t!==void 0,14353),r.map(n=>function(l,c){let d=l.updateTime?oi(l.updateTime):oi(c);return d.isEqual(bt.min())&&(d=oi(c)),new OR(d,l.transformResults||[])}(n,t))):[]}function XR(r,t){return{documents:[TT(r,t.path)]}}function $R(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=TT(r,l);const c=function(y){if(y.length!==0)return ST(ci.create(y,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const d=function(y){if(y.length!==0)return y.map(E=>function(D){return{field:Oa(D.field),direction:WR(D.dir)}}(E))}(t.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Hd(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(t.endAt)),{gt:n,parent:l}}function ZR(r){let t=FR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ft(s===1,65062);const E=n.from[0];E.allDescendants?l=E.collectionId:t=t.child(E.collectionId)}let c=[];n.where&&(c=function(C){const D=AT(C);return D instanceof ci&&J0(D)?D.getFilters():[D]}(n.where));let d=[];n.orderBy&&(d=function(C){return C.map(D=>function(F){return new Pc(Na(F.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(D))}(n.orderBy));let g=null;n.limit&&(g=function(C){let D;return D=typeof C=="object"?C.value:C,Xc(D)?null:D}(n.limit));let p=null;n.startAt&&(p=function(C){const D=!!C.before,j=C.values||[];return new xc(j,D)}(n.startAt));let y=null;return n.endAt&&(y=function(C){const D=!C.before,j=C.values||[];return new xc(j,D)}(n.endAt)),pR(t,l,d,c,g,"F",p,y)}function JR(r,t){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:l})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function AT(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Na(n.unaryFilter.field);return we.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Na(n.unaryFilter.field);return we.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Na(n.unaryFilter.field);return we.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Na(n.unaryFilter.field);return we.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}}(r):r.fieldFilter!==void 0?function(n){return we.create(Na(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return ci.create(n.compositeFilter.filters.map(s=>AT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return At(1026)}}(n.compositeFilter.op))}(r):At(30097,{filter:r})}function WR(r){return BR[r]}function tC(r){return jR[r]}function eC(r){return qR[r]}function Oa(r){return{fieldPath:r.canonicalString()}}function Na(r){return je.fromServerFormat(r.fieldPath)}function ST(r){return r instanceof we?function(n){if(n.op==="=="){if(nv(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NAN"}};if(ev(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nv(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NOT_NAN"}};if(ev(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(n.field),op:tC(n.op),value:n.value}}}(r):r instanceof ci?function(n){const s=n.getFilters().map(l=>ST(l));return s.length===1?s[0]:{compositeFilter:{op:eC(n.op),filters:s}}}(r):At(54877,{filter:r})}function nC(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function bT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,n,s,l,c=bt.min(),d=bt.min(),g=qe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new br(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(t){this.wt=t}}function rC(r){const t=ZR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?qd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.yn=new aC}addToCollectionParentIndex(t,n){return this.yn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.yn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(Or.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(Or.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class aC{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(ce.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wT=41943040;class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(wT,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t){this.nr=t}next(){return this.nr+=2,this.nr}static rr(){return new qa(0)}static ir(){return new qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",oC=1048576;function _v([r,t],[n,s]){const l=Dt(r,n);return l===0?Dt(t,s):l}class lC{constructor(t){this.cr=t,this.buffer=new Ce(_v),this.lr=0}hr(){return++this.lr}Pr(t){const n=[t,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();_v(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uC{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(t){at(yv,`Garbage collection scheduled in ${t}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xa(n)?at(yv,"Ignoring IndexedDB error during garbage collection: ",n):await Ya(n)}await this.Ir(3e5)})}}class cC{constructor(t,n){this.Er=t,this.params=n}calculateTargetCount(t,n){return this.Er.dr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return X.resolve(Yc.le);const s=new lC(n);return this.Er.forEachTarget(t,l=>s.Pr(l.sequenceNumber)).next(()=>this.Er.Ar(t,l=>s.Pr(l))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.Er.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.Er.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(pv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pv):this.Rr(t,n))}getCacheSize(t){return this.Er.getCacheSize(t)}Rr(t,n){let s,l,c,d,g,p,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,d=Date.now(),this.nthSequenceNumber(t,l))).next(C=>(s=C,g=Date.now(),this.removeTargets(t,s,n))).next(C=>(c=C,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(C=>(y=Date.now(),Ia()<=xt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${C} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:C})))}}function hC(r,t){return new cC(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.changes=new Vs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Xe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,n))).next(l=>(s!==null&&pl(s.mutation,l,Bn.empty(),Re.now()),l))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Pt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Pt()){const l=Ss();return this.populateOverlays(t,l,n).next(()=>this.computeViews(t,n,l,s).next(c=>{let d=ul();return c.forEach((g,p)=>{d=d.insert(g,p.overlayedDocument)}),d}))}getOverlayedDocuments(t,n){const s=Ss();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Pt()))}populateOverlays(t,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((d,g)=>{n.set(d,g)})})}computeViews(t,n,s,l){let c=Gi();const d=gl(),g=function(){return gl()}();return n.forEach((p,y)=>{const E=s.get(y.key);l.has(y.key)&&(E===void 0||E.mutation instanceof xs)?c=c.insert(y.key,y):E!==void 0?(d.set(y.key,E.mutation.getFieldMask()),pl(E.mutation,y,E.mutation.getFieldMask(),Re.now())):d.set(y.key,Bn.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((y,E)=>d.set(y,E)),n.forEach((y,E)=>{var C;return g.set(y,new dC(E,(C=d.get(y))!==null&&C!==void 0?C:null))}),g))}recalculateAndSaveOverlays(t,n){const s=gl();let l=new ae((d,g)=>d-g),c=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(d=>{for(const g of d)g.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||Bn.empty();E=g.applyToLocalView(y,E),s.set(p,E);const C=(l.get(g.batchId)||Pt()).add(p);l=l.insert(g.batchId,C)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,E=p.value,C=aT();E.forEach(D=>{if(!c.has(D)){const j=fT(n.get(D),s.get(D));j!==null&&C.set(D,j),c=c.add(D)}}),d.push(this.documentOverlayCache.saveOverlays(t,y,C))}return X.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,l){return function(d){return yt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):yR(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next(c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):X.resolve(Ss());let g=vl,p=c;return d.next(y=>X.forEach(y,(E,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),c.get(E)?X.resolve():this.remoteDocumentCache.getEntry(t,E).next(D=>{p=p.insert(E,D)}))).next(()=>this.populateOverlays(t,y,c)).next(()=>this.computeViews(t,p,y,Pt())).next(E=>({batchId:g,changes:sT(E)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new yt(n)).next(s=>{let l=ul();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=ul();return this.indexManager.getCollectionParents(t,c).next(g=>X.forEach(g,p=>{const y=function(C,D){return new Zc(D,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next(E=>{E.forEach((C,D)=>{d=d.insert(C,D)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l))).next(d=>{c.forEach((p,y)=>{const E=y.getKey();d.get(E)===null&&(d=d.insert(E,Xe.newInvalidDocument(E)))});let g=ul();return d.forEach((p,y)=>{const E=c.get(p);E!==void 0&&pl(E.mutation,y,Bn.empty(),Re.now()),Wc(n,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t){this.serializer=t,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(t,n){return X.resolve(this.Fr.get(n))}saveBundleMetadata(t,n){return this.Fr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:oi(l.createTime)}}(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.Mr.get(n))}saveNamedQuery(t,n){return this.Mr.set(n.name,function(l){return{name:l.name,query:rC(l.bundledQuery),readTime:oi(l.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.overlays=new ae(yt.comparator),this.Or=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ss();return X.forEach(n,l=>this.getOverlay(t,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((l,c)=>{this.St(t,n,c)}),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.Or.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Or.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=Ss(),c=n.length+1,d=new yt(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ae((y,E)=>y-E);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=c.get(y.largestBatchId);E===null&&(E=Ss(),c=c.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const g=Ss(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>g.set(y,E)),!(g.size()>=l)););return X.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.Or.get(l.largestBatchId).delete(s.key);this.Or.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new PR(n,s));let c=this.Or.get(n);c===void 0&&(c=Pt(),this.Or.set(n,c)),this.Or.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.Nr=new Ce(xe.Br),this.Lr=new Ce(xe.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(t,n){const s=new xe(t,n);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Qr(new xe(t,n))}$r(t,n){t.forEach(s=>this.removeReference(s,n))}Ur(t){const n=new yt(new ce([])),s=new xe(n,t),l=new xe(n,t+1),c=[];return this.Lr.forEachInRange([s,l],d=>{this.Qr(d),c.push(d.key)}),c}Kr(){this.Nr.forEach(t=>this.Qr(t))}Qr(t){this.Nr=this.Nr.delete(t),this.Lr=this.Lr.delete(t)}Wr(t){const n=new yt(new ce([])),s=new xe(n,t),l=new xe(n,t+1);let c=Pt();return this.Lr.forEachInRange([s,l],d=>{c=c.add(d.key)}),c}containsKey(t){const n=new xe(t,0),s=this.Nr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class xe{constructor(t,n){this.key=t,this.Gr=n}static Br(t,n){return yt.comparator(t.key,n.key)||Dt(t.Gr,n.Gr)}static kr(t,n){return Dt(t.Gr,n.Gr)||yt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Ce(xe.Br)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new xR(c,n,s,l);this.mutationQueue.push(d);for(const g of l)this.zr=this.zr.add(new xe(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,n){return X.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.Hr(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?gm:this.Jn-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new xe(n,0),l=new xe(n,Number.POSITIVE_INFINITY),c=[];return this.zr.forEachInRange([s,l],d=>{const g=this.jr(d.Gr);c.push(g)}),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Dt);return n.forEach(l=>{const c=new xe(l,0),d=new xe(l,Number.POSITIVE_INFINITY);this.zr.forEachInRange([c,d],g=>{s=s.add(g.Gr)})}),X.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;yt.isDocumentKey(c)||(c=c.child(""));const d=new xe(new yt(c),0);let g=new Ce(Dt);return this.zr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Gr)),!0)},d),X.resolve(this.Jr(g))}Jr(t){const n=[];return t.forEach(s=>{const l=this.jr(s);l!==null&&n.push(l)}),n}removeMutationBatch(t,n){Ft(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return X.forEach(n.mutations,l=>{const c=new xe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.zr=s})}Xn(t){}containsKey(t,n){const s=new xe(n,0),l=this.zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}Yr(t,n){return this.Hr(t)}Hr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}jr(t){const n=this.Hr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t){this.Zr=t,this.docs=function(){return new ae(yt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.Zr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(t,n){let s=Gi();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Xe.newInvalidDocument(l))}),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Gi();const d=n.path,g=new yt(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||Yw(Kw(E),s)<=0||(l.has(E.key)||Wc(n,E))&&(c=c.insert(E.key,E.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,n,s,l){At(9500)}Xr(t,n){return X.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new TC(this)}getSize(t){return X.resolve(this.size)}}class TC extends fC{constructor(t){super(),this.vr=t}applyChanges(t){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.vr.addEntry(t,l)):this.vr.removeEntry(s)}),X.waitFor(n)}getFromCache(t,n){return this.vr.getEntry(t,n)}getAllFromCache(t,n){return this.vr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t){this.persistence=t,this.ei=new Vs(n=>_m(n),vm),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.ti=0,this.ni=new wm,this.targetCount=0,this.ri=qa.rr()}forEachTarget(t,n){return this.ei.forEach((s,l)=>n(l)),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.ti)}allocateTargetId(t){return this.highestTargetId=this.ri.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ti&&(this.ti=n),X.resolve()}ar(t){this.ei.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ri=new qa(n),this.highestTargetId=n),t.sequenceNumber>this.ti&&(this.ti=t.sequenceNumber)}addTargetData(t,n){return this.ar(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.ar(n),X.resolve()}removeTargetData(t,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.ei.forEach((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.ei.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),X.waitFor(c).next(()=>l)}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.ei.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this.ni.qr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this.ni.$r(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(d=>{c.push(l.markPotentiallyOrphaned(t,d))}),X.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.ni.Ur(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this.ni.Wr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,n){this.ii={},this.overlays={},this.si=new Yc(0),this.oi=!1,this.oi=!0,this._i=new yC,this.referenceDelegate=t(this),this.ai=new EC(this),this.indexManager=new sC,this.remoteDocumentCache=function(l){return new vC(l)}(s=>this.referenceDelegate.ui(s)),this.serializer=new iC(n),this.ci=new gC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new pC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ii[t.toKey()];return s||(s=new _C(n,this.referenceDelegate),this.ii[t.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(t,n,s){at("MemoryPersistence","Starting transaction:",t);const l=new AC(this.si.next());return this.referenceDelegate.li(),s(l).next(c=>this.referenceDelegate.hi(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Pi(t,n){return X.or(Object.values(this.ii).map(s=>()=>s.containsKey(t,n)))}}class AC extends $w{constructor(t){super(),this.currentSequenceNumber=t}}class Rm{constructor(t){this.persistence=t,this.Ti=new wm,this.Ii=null}static Ei(t){return new Rm(t)}get di(){if(this.Ii)return this.Ii;throw At(60996)}addReference(t,n,s){return this.Ti.addReference(s,n),this.di.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ti.removeReference(s,n),this.di.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.di.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ti.Ur(n.targetId).forEach(l=>this.di.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(l=>{l.forEach(c=>this.di.add(c.toString()))}).next(()=>s.removeTargetData(t,n))}li(){this.Ii=new Set}hi(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.di,s=>{const l=yt.fromPath(s);return this.Ai(t,l).next(c=>{c||n.removeEntry(l,bt.min())})}).next(()=>(this.Ii=null,n.apply(t)))}updateLimboDocument(t,n){return this.Ai(t,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(t){return 0}Ai(t,n){return X.or([()=>X.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Pi(t,n)])}}class zc{constructor(t,n){this.persistence=t,this.Ri=new Vs(s=>Ww(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=hC(this,n)}static Ei(t,n){return new zc(t,n)}li(){}hi(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}dr(t){const n=this.Vr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(l=>s+l))}Vr(t){let n=0;return this.Ar(t,s=>{n++}).next(()=>n)}Ar(t,n){return X.forEach(this.Ri,(s,l)=>this.gr(t,s,l).next(c=>c?X.resolve():n(l)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.Xr(t,d=>this.gr(t,d,n).next(g=>{g||(s++,c.removeEntry(d,bt.min()))})).next(()=>c.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.Ri.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.Ri.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.Ri.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.Ri.set(n,t.currentSequenceNumber),X.resolve()}ui(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=vc(t.data.value)),n}gr(t,n,s){return X.or([()=>this.persistence.Pi(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.Ri.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.ls=s,this.hs=l}static Ps(t,n){let s=Pt(),l=Pt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Cm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return pS()?8:Zw($e())>0?6:4}()}initialize(t,n){this.As=t,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.Rs(t,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.Vs(t,n,l,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new SC;return this.fs(t,n,d).next(g=>{if(c.result=g,this.Is)return this.gs(t,n,d,g.size)})}).next(()=>c.result)}gs(t,n,s,l){return s.documentReadCount<this.Es?(Ia()<=xt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),X.resolve()):(Ia()<=xt.DEBUG&&at("QueryEngine","Query:",Da(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ds*l?(Ia()<=xt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ai(n))):X.resolve())}Rs(t,n){if(av(n))return X.resolve(null);let s=ai(n);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=qd(n,null,"F"),s=ai(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(c=>{const d=Pt(...c);return this.As.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,s).next(p=>{const y=this.ps(n,g);return this.ys(n,y,d,p.readTime)?this.Rs(t,qd(n,null,"F")):this.ws(t,y,n,p)}))})))}Vs(t,n,s,l){return av(n)||l.isEqual(bt.min())?X.resolve(null):this.As.getDocuments(t,s).next(c=>{const d=this.ps(n,c);return this.ys(n,d,s,l)?X.resolve(null):(Ia()<=xt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Da(n)),this.ws(t,d,n,Qw(l,vl)).next(g=>g))})}ps(t,n){let s=new Ce(iT(t));return n.forEach((l,c)=>{Wc(t,c)&&(s=s.add(c))}),s}ys(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}fs(t,n,s){return Ia()<=xt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Da(n)),this.As.getDocumentsMatchingQuery(t,n,Or.min(),s)}ws(t,n,s,l){return this.As.getDocumentsMatchingQuery(t,s,l).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="LocalStore",wC=3e8;class RC{constructor(t,n,s,l){this.persistence=t,this.bs=n,this.serializer=l,this.Ss=new ae(Dt),this.Ds=new Vs(c=>_m(c),vm),this.vs=new Map,this.Cs=t.getRemoteDocumentCache(),this.ai=t.getTargetCache(),this.ci=t.getBundleCache(),this.Fs(s)}Fs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mC(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ss))}}function CC(r,t,n,s){return new RC(r,t,n,s)}async function CT(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.Fs(t),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],g=[];let p=Pt();for(const y of l){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of c){g.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(y=>({Ms:y,removedBatchIds:d,addedBatchIds:g}))})})}function IC(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),c=n.Cs.newChangeBuffer({trackRemovals:!0});return function(g,p,y,E){const C=y.batch,D=C.keys();let j=X.resolve();return D.forEach(F=>{j=j.next(()=>E.getEntry(p,F)).next(tt=>{const Q=y.docVersions.get(F);Ft(Q!==null,48541),tt.version.compareTo(Q)<0&&(C.applyToRemoteDocument(tt,y),tt.isValidDocument()&&(tt.setReadTime(y.commitVersion),E.addEntry(tt)))})}),j.next(()=>g.mutationQueue.removeMutationBatch(p,C))}(n,s,t,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let p=Pt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(t))).next(()=>n.localDocuments.getDocuments(s,l))})}function IT(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.ai.getLastRemoteSnapshotVersion(n))}function DC(r,t){const n=wt(r),s=t.snapshotVersion;let l=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.Cs.newChangeBuffer({trackRemovals:!0});l=n.Ss;const g=[];t.targetChanges.forEach((E,C)=>{const D=l.get(C);if(!D)return;g.push(n.ai.removeMatchingKeys(c,E.removedDocuments,C).next(()=>n.ai.addMatchingKeys(c,E.addedDocuments,C)));let j=D.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(C)!==null?j=j.withResumeToken(qe.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,s)),l=l.insert(C,j),function(tt,Q,st){return tt.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=wC?!0:st.addedDocuments.size+st.modifiedDocuments.size+st.removedDocuments.size>0}(D,j,E)&&g.push(n.ai.updateTargetData(c,j))});let p=Gi(),y=Pt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,E))}),g.push(OC(c,d,t.documentUpdates).next(E=>{p=E.xs,y=E.Os})),!s.isEqual(bt.min())){const E=n.ai.getLastRemoteSnapshotVersion(c).next(C=>n.ai.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(E)}return X.waitFor(g).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(n.Ss=l,c))}function OC(r,t,n){let s=Pt(),l=Pt();return n.forEach(c=>s=s.add(c)),t.getEntries(r,s).next(c=>{let d=Gi();return n.forEach((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(bt.min())?(t.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),d=d.insert(g,p)):at(Im,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{xs:d,Os:l}})}function NC(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=gm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function MC(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.ai.getTargetData(s,t).next(c=>c?(l=c,X.resolve(l)):n.ai.allocateTargetId(s).next(d=>(l=new br(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.ai.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.Ss.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(s.targetId,s),n.Ds.set(t,s.targetId)),s})}async function Kd(r,t,n){const s=wt(r),l=s.Ss.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!Xa(d))throw d;at(Im,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ss=s.Ss.remove(t),s.Ds.delete(l.target)}function vv(r,t,n){const s=wt(r);let l=bt.min(),c=Pt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,y,E){const C=wt(p),D=C.Ds.get(E);return D!==void 0?X.resolve(C.Ss.get(D)):C.ai.getTargetData(y,E)}(s,d,ai(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(d,g.targetId).next(p=>{c=p})}).next(()=>s.bs.getDocumentsMatchingQuery(d,t,n?l:bt.min(),n?c:Pt())).next(g=>(VC(s,vR(t),g),{documents:g,Ns:c})))}function VC(r,t,n){let s=r.vs.get(t)||bt.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.vs.set(t,s)}class Tv{constructor(){this.activeTargetIds=wR()}$s(t){this.activeTargetIds=this.activeTargetIds.add(t)}Us(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Qs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xC{constructor(){this.So=new Tv,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.So.$s(t),this.Do[t]||"not-current"}updateQueryState(t,n,s){this.Do[t]=n}removeLocalQueryTarget(t){this.So.Us(t)}isLocalQueryTarget(t){return this.So.activeTargetIds.has(t)}clearQueryState(t){delete this.Do[t]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(t){return this.So.activeTargetIds.has(t)}start(){return this.So=new Tv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{vo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="ConnectivityMonitor";class Av{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(t){this.Oo.push(t)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){at(Ev,"Network connectivity changed: AVAILABLE");for(const t of this.Oo)t(0)}xo(){at(Ev,"Network connectivity changed: UNAVAILABLE");for(const t of this.Oo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function Yd(){return dc===null?dc=function(){return 268435456+Math.round(2147483648*Math.random())}():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="RestConnection",UC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LC{get Bo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+t.host,this.ko=`projects/${s}/databases/${l}`,this.qo=this.databaseId.database===Mc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Qo(t,n,s,l,c){const d=Yd(),g=this.$o(t,n.toUriEncodedString());at(bd,`Sending RPC '${t}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,l,c);const{host:y}=new URL(g),E=Cl(y);return this.Ko(t,g,p,s,E).then(C=>(at(bd,`Received RPC '${t}' ${d}: `,C),C),C=>{throw ka(bd,`RPC '${t}' ${d} failed with error: `,C,"url: ",g,"request:",s),C})}Wo(t,n,s,l,c,d){return this.Qo(t,n,s,l,c)}Uo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>t[c]=l),s&&s.headers.forEach((l,c)=>t[c]=l)}$o(t,n){const s=UC[t];return`${this.Lo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.Go=t.Go,this.zo=t.zo}jo(t){this.Ho=t}Jo(t){this.Yo=t}Zo(t){this.Xo=t}onMessage(t){this.e_=t}close(){this.zo()}send(t){this.Go(t)}t_(){this.Ho()}n_(){this.Yo()}r_(t){this.Xo(t)}i_(t){this.e_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke="WebChannelConnection";class zC extends LC{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ko(t,n,s,l,c){const d=Yd();return new Promise((g,p)=>{const y=new N0;y.setWithCredentials(!0),y.listenOnce(M0.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case _c.NO_ERROR:const C=y.getResponseJson();at(Ke,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(C)),g(C);break;case _c.TIMEOUT:at(Ke,`RPC '${t}' ${d} timed out`),p(new pt(W.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const D=y.getStatus();if(at(Ke,`RPC '${t}' ${d} failed with status:`,D,"response text:",y.getResponseText()),D>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const F=j==null?void 0:j.error;if(F&&F.status&&F.message){const tt=function(st){const ot=st.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ot)>=0?ot:W.UNKNOWN}(F.status);p(new pt(tt,F.message))}else p(new pt(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new pt(W.UNAVAILABLE,"Connection failed."));break;default:At(9055,{s_:t,streamId:d,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{at(Ke,`RPC '${t}' ${d} completed.`)}});const E=JSON.stringify(l);at(Ke,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",E,s,15)})}a_(t,n,s){const l=Yd(),c=[this.Lo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=P0(),g=x0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=c.join("");at(Ke,`Creating RPC '${t}' stream ${l}: ${E}`,p);const C=d.createWebChannel(E,p);let D=!1,j=!1;const F=new kC({Go:Q=>{j?at(Ke,`Not sending because RPC '${t}' stream ${l} is closed:`,Q):(D||(at(Ke,`Opening RPC '${t}' stream ${l} transport.`),C.open(),D=!0),at(Ke,`RPC '${t}' stream ${l} sending:`,Q),C.send(Q))},zo:()=>C.close()}),tt=(Q,st,ot)=>{Q.listen(st,J=>{try{ot(J)}catch(ut){setTimeout(()=>{throw ut},0)}})};return tt(C,ll.EventType.OPEN,()=>{j||(at(Ke,`RPC '${t}' stream ${l} transport opened.`),F.t_())}),tt(C,ll.EventType.CLOSE,()=>{j||(j=!0,at(Ke,`RPC '${t}' stream ${l} transport closed`),F.r_())}),tt(C,ll.EventType.ERROR,Q=>{j||(j=!0,ka(Ke,`RPC '${t}' stream ${l} transport errored. Name:`,Q.name,"Message:",Q.message),F.r_(new pt(W.UNAVAILABLE,"The operation could not be completed")))}),tt(C,ll.EventType.MESSAGE,Q=>{var st;if(!j){const ot=Q.data[0];Ft(!!ot,16349);const J=ot,ut=(J==null?void 0:J.error)||((st=J[0])===null||st===void 0?void 0:st.error);if(ut){at(Ke,`RPC '${t}' stream ${l} received error:`,ut);const Z=ut.status;let ht=function(w){const M=ve[w];if(M!==void 0)return gT(M)}(Z),O=ut.message;ht===void 0&&(ht=W.INTERNAL,O="Unknown error status: "+Z+" with message "+ut.message),j=!0,F.r_(new pt(ht,O)),C.close()}else at(Ke,`RPC '${t}' stream ${l} received:`,ot),F.i_(ot)}}),tt(g,V0.STAT_EVENT,Q=>{Q.stat===Ud.PROXY?at(Ke,`RPC '${t}' stream ${l} detected buffering proxy`):Q.stat===Ud.NOPROXY&&at(Ke,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{F.n_()},0),F}}function wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(r){return new HR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t,n,s=1e3,l=1.5,c=6e4){this.bi=t,this.timerId=n,this.u_=s,this.c_=l,this.l_=c,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(t){this.cancel();const n=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),l=Math.max(0,n-s);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,l,()=>(this.T_=Date.now(),t())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="PersistentStream";class OT{constructor(t,n,s,l,c,d,g,p){this.bi=t,this.R_=s,this.V_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new DT(t,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(t){this.M_(),this.stream.send(t)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(t,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,t!==4?this.y_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Hi(n.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const t=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.m_===n&&this.B_(s,l)},s=>{t(()=>{const l=new pt(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(l)})})}B_(t,n){const s=this.N_(this.m_);this.stream=this.k_(t,n),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(l=>{s(()=>this.L_(l))}),this.stream.onMessage(l=>{s(()=>++this.p_==1?this.q_(l):this.onNext(l))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(t){return at(Sv,`close with error: ${t}`),this.stream=null,this.close(4,t)}N_(t){return n=>{this.bi.enqueueAndForget(()=>this.m_===t?n():(at(Sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BC extends OT{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}k_(t,n){return this.connection.a_("Listen",t,n)}q_(t){return this.onNext(t)}onNext(t){this.y_.reset();const n=QR(this.serializer,t),s=function(c){if(!("targetChange"in c))return bt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?bt.min():d.readTime?oi(d.readTime):bt.min()}(t);return this.listener.Q_(n,s)}U_(t){const n={};n.database=Qd(this.serializer),n.addTarget=function(c,d){let g;const p=d.target;if(g=jd(p)?{documents:XR(c,p)}:{query:$R(c,p).gt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=_T(c,d.resumeToken);const y=Hd(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(bt.min())>0){g.readTime=kc(c,d.snapshotVersion.toTimestamp());const y=Hd(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,t);const s=JR(this.serializer,t);s&&(n.labels=s),this.F_(n)}K_(t){const n={};n.database=Qd(this.serializer),n.removeTarget=t,this.F_(n)}}class jC extends OT{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(t,n){return this.connection.a_("Write",t,n)}q_(t){return Ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.z_()}onNext(t){Ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.y_.reset();const n=YR(t.writeResults,t.commitTime),s=oi(t.commitTime);return this.listener.j_(s,n)}H_(){const t={};t.database=Qd(this.serializer),this.F_(t)}G_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>KR(this.serializer,s))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class HC extends qC{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.J_=!1}Y_(){if(this.J_)throw new pt(W.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(t,n,s,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Qo(t,Gd(n,s),l,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pt(W.UNKNOWN,c.toString())})}Wo(t,n,s,l,c){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Wo(t,Gd(n,s),l,d,g,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pt(W.UNKNOWN,d.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class GC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(t){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.na("Offline")))}set(t){this.sa(),this.Z_=0,t==="Online"&&(this.ea=!1),this.na(t)}na(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ra(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Hi(n),this.ea=!1):at("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class FC{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=c,this.ca.vo(d=>{s.enqueueAndForget(async()=>{Ps(this)&&(at(Os,"Restarting streams for network reachability change."),await async function(p){const y=wt(p);y.aa.add(4),await Pl(y),y.la.set("Unknown"),y.aa.delete(4),await rh(y)}(this))})}),this.la=new GC(s,l)}}async function rh(r){if(Ps(r))for(const t of r.ua)await t(!0)}async function Pl(r){for(const t of r.ua)await t(!1)}function NT(r,t){const n=wt(r);n._a.has(t.targetId)||(n._a.set(t.targetId,t),Mm(n)?Nm(n):$a(n).b_()&&Om(n,t))}function Dm(r,t){const n=wt(r),s=$a(n);n._a.delete(t),s.b_()&&MT(n,t),n._a.size===0&&(s.b_()?s.v_():Ps(n)&&n.la.set("Unknown"))}function Om(r,t){if(r.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$a(r).U_(t)}function MT(r,t){r.ha.Ke(t),$a(r).K_(t)}function Nm(r){r.ha=new zR({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>r._a.get(t)||null,Pt:()=>r.datastore.serializer.databaseId}),$a(r).start(),r.la.ta()}function Mm(r){return Ps(r)&&!$a(r).w_()&&r._a.size>0}function Ps(r){return wt(r).aa.size===0}function VT(r){r.ha=void 0}async function QC(r){r.la.set("Online")}async function KC(r){r._a.forEach((t,n)=>{Om(r,t)})}async function YC(r,t){VT(r),Mm(r)?(r.la.ia(t),Nm(r)):r.la.set("Unknown")}async function XC(r,t,n){if(r.la.set("Online"),t instanceof yT&&t.state===2&&t.cause)try{await async function(l,c){const d=c.cause;for(const g of c.targetIds)l._a.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l._a.delete(g),l.ha.removeTarget(g))}(r,t)}catch(s){at(Os,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Bc(r,s)}else if(t instanceof Ac?r.ha.Xe(t):t instanceof pT?r.ha.ot(t):r.ha.nt(t),!n.isEqual(bt.min()))try{const s=await IT(r.localStore);n.compareTo(s)>=0&&await function(c,d){const g=c.ha.It(d);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=c._a.get(y);E&&c._a.set(y,E.withResumeToken(p.resumeToken,d))}}),g.targetMismatches.forEach((p,y)=>{const E=c._a.get(p);if(!E)return;c._a.set(p,E.withResumeToken(qe.EMPTY_BYTE_STRING,E.snapshotVersion)),MT(c,p);const C=new br(E.target,p,y,E.sequenceNumber);Om(c,C)}),c.remoteSyncer.applyRemoteEvent(g)}(r,n)}catch(s){at(Os,"Failed to raise snapshot:",s),await Bc(r,s)}}async function Bc(r,t,n){if(!Xa(t))throw t;r.aa.add(1),await Pl(r),r.la.set("Offline"),n||(n=()=>IT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at(Os,"Retrying IndexedDB access"),await n(),r.aa.delete(1),await rh(r)})}function xT(r,t){return t().catch(n=>Bc(r,n,t))}async function sh(r){const t=wt(r),n=xr(t);let s=t.oa.length>0?t.oa[t.oa.length-1].batchId:gm;for(;$C(t);)try{const l=await NC(t.localStore,s);if(l===null){t.oa.length===0&&n.v_();break}s=l.batchId,ZC(t,l)}catch(l){await Bc(t,l)}PT(t)&&UT(t)}function $C(r){return Ps(r)&&r.oa.length<10}function ZC(r,t){r.oa.push(t);const n=xr(r);n.b_()&&n.W_&&n.G_(t.mutations)}function PT(r){return Ps(r)&&!xr(r).w_()&&r.oa.length>0}function UT(r){xr(r).start()}async function JC(r){xr(r).H_()}async function WC(r){const t=xr(r);for(const n of r.oa)t.G_(n.mutations)}async function tI(r,t,n){const s=r.oa.shift(),l=Am.from(s,t,n);await xT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await sh(r)}async function eI(r,t){t&&xr(r).W_&&await async function(s,l){if(function(d){return LR(d)&&d!==W.ABORTED}(l.code)){const c=s.oa.shift();xr(s).D_(),await xT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await sh(s)}}(r,t),PT(r)&&UT(r)}async function bv(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),at(Os,"RemoteStore received new credentials");const s=Ps(n);n.aa.add(3),await Pl(n),s&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await rh(n)}async function nI(r,t){const n=wt(r);t?(n.aa.delete(2),await rh(n)):t||(n.aa.add(2),await Pl(n),n.la.set("Unknown"))}function $a(r){return r.Pa||(r.Pa=function(n,s,l){const c=wt(n);return c.Y_(),new BC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{jo:QC.bind(null,r),Jo:KC.bind(null,r),Zo:YC.bind(null,r),Q_:XC.bind(null,r)}),r.ua.push(async t=>{t?(r.Pa.D_(),Mm(r)?Nm(r):r.la.set("Unknown")):(await r.Pa.stop(),VT(r))})),r.Pa}function xr(r){return r.Ta||(r.Ta=function(n,s,l){const c=wt(n);return c.Y_(),new jC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:JC.bind(null,r),Zo:eI.bind(null,r),z_:WC.bind(null,r),j_:tI.bind(null,r)}),r.ua.push(async t=>{t?(r.Ta.D_(),await sh(r)):(await r.Ta.stop(),r.oa.length>0&&(at(Os,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,g=new Vm(t,n,d,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(r,t){if(Hi("AsyncQueue",`${t}: ${r}`),Xa(r))return new pt(W.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(t){return new Pa(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||yt.comparator(n.key,s.key):(n,s)=>yt.comparator(n.key,s.key),this.keyedMap=ul(),this.sortedSet=new ae(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Pa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Pa;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.Ia=new ae(yt.comparator)}track(t){const n=t.doc.key,s=this.Ia.get(n);s?t.type!==0&&s.type===3?this.Ia=this.Ia.insert(n,t):t.type===3&&s.type!==1?this.Ia=this.Ia.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Ia=this.Ia.remove(n):t.type===1&&s.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:t.doc}):At(63341,{Vt:t,Ea:s}):this.Ia=this.Ia.insert(n,t)}da(){const t=[];return this.Ia.inorderTraversal((n,s)=>{t.push(s)}),t}}class Ha{constructor(t,n,s,l,c,d,g,p,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach(g=>{d.push({type:0,doc:g})}),new Ha(t,n,Pa.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Jc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(t=>t.ma())}}class rI{constructor(){this.queries=Rv(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,s){const l=wt(n),c=l.queries;l.queries=Rv(),c.forEach((d,g)=>{for(const p of g.Ra)p.onError(s)})})(this,new pt(W.ABORTED,"Firestore shutting down"))}}function Rv(){return new Vs(r=>nT(r),Jc)}async function sI(r,t){const n=wt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.Va()&&t.ma()&&(s=2):(c=new iI,s=t.ma()?0:1);try{switch(s){case 0:c.Aa=await n.onListen(l,!0);break;case 1:c.Aa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=xm(d,`Initialization of query '${Da(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Ra.push(t),t.ga(n.onlineState),c.Aa&&t.pa(c.Aa)&&Pm(n)}async function aI(r,t){const n=wt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Ra.indexOf(t);d>=0&&(c.Ra.splice(d,1),c.Ra.length===0?l=t.ma()?0:1:!c.Va()&&t.ma()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function oI(r,t){const n=wt(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.Ra)g.pa(l)&&(s=!0);d.Aa=l}}s&&Pm(n)}function lI(r,t,n){const s=wt(r),l=s.queries.get(t);if(l)for(const c of l.Ra)c.onError(n);s.queries.delete(t)}function Pm(r){r.fa.forEach(t=>{t.next()})}var Xd,Cv;(Cv=Xd||(Xd={})).ya="default",Cv.Cache="cache";class uI{constructor(t,n,s){this.query=t,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Ha(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ba?this.Da(t)&&(this.wa.next(t),n=!0):this.va(t,this.onlineState)&&(this.Ca(t),n=!0),this.Sa=t,n}onError(t){this.wa.error(t)}ga(t){this.onlineState=t;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,t)&&(this.Ca(this.Sa),n=!0),n}va(t,n){if(!t.fromCache||!this.ma())return!0;const s=n!=="Offline";return(!this.options.Fa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Da(t){if(t.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(t){t=Ha.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ba=!0,this.wa.next(t)}ma(){return this.options.source!==Xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t){this.key=t}}class kT{constructor(t){this.key=t}}class cI{constructor(t,n){this.query=t,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Pt(),this.mutatedKeys=Pt(),this.Ua=iT(t),this.Ka=new Pa(this.Ua)}get Wa(){return this.qa}Ga(t,n){const s=n?n.za:new wv,l=n?n.Ka:this.Ka;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((E,C)=>{const D=l.get(E),j=Wc(this.query,C)?C:null,F=!!D&&this.mutatedKeys.has(D.key),tt=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Q=!1;D&&j?D.data.isEqual(j.data)?F!==tt&&(s.track({type:3,doc:j}),Q=!0):this.ja(D,j)||(s.track({type:2,doc:j}),Q=!0,(p&&this.Ua(j,p)>0||y&&this.Ua(j,y)<0)&&(g=!0)):!D&&j?(s.track({type:0,doc:j}),Q=!0):D&&!j&&(s.track({type:1,doc:D}),Q=!0,(p||y)&&(g=!0)),Q&&(j?(d=d.add(j),c=tt?c.add(E):c.delete(E)):(d=d.delete(E),c=c.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),c=c.delete(E.key),s.track({type:1,doc:E})}return{Ka:d,za:s,ys:g,mutatedKeys:c}}ja(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.Ka;this.Ka=t.Ka,this.mutatedKeys=t.mutatedKeys;const d=t.za.da();d.sort((E,C)=>function(j,F){const tt=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Vt:Q})}};return tt(j)-tt(F)}(E.type,C.type)||this.Ua(E.doc,C.doc)),this.Ha(s),l=l!=null&&l;const g=n&&!l?this.Ja():[],p=this.$a.size===0&&this.current&&!l?1:0,y=p!==this.Qa;return this.Qa=p,d.length!==0||y?{snapshot:new Ha(this.query,t.Ka,c,d,t.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:g}:{Ya:g}}ga(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new wv,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(t){return!this.qa.has(t)&&!!this.Ka.has(t)&&!this.Ka.get(t).hasLocalMutations}Ha(t){t&&(t.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=t.current)}Ja(){if(!this.current)return[];const t=this.$a;this.$a=Pt(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const n=[];return t.forEach(s=>{this.$a.has(s)||n.push(new kT(s))}),this.$a.forEach(s=>{t.has(s)||n.push(new LT(s))}),n}Xa(t){this.qa=t.Ns,this.$a=Pt();const n=this.Ga(t.documents);return this.applyChanges(n,!0)}eu(){return Ha.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Um="SyncEngine";class hI{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class fI{constructor(t){this.key=t,this.tu=!1}}class dI{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.nu={},this.ru=new Vs(g=>nT(g),Jc),this.iu=new Map,this.su=new Set,this.ou=new ae(yt.comparator),this._u=new Map,this.au=new wm,this.uu={},this.cu=new Map,this.lu=qa.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function mI(r,t,n=!0){const s=GT(r);let l;const c=s.ru.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.eu()):l=await zT(s,t,n,!0),l}async function gI(r,t){const n=GT(r);await zT(n,t,!0,!1)}async function zT(r,t,n,s){const l=await MC(r.localStore,ai(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await pI(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&NT(r.remoteStore,l),g}async function pI(r,t,n,s,l){r.Pu=(C,D,j)=>async function(tt,Q,st,ot){let J=Q.view.Ga(st);J.ys&&(J=await vv(tt.localStore,Q.query,!1).then(({documents:O})=>Q.view.Ga(O,J)));const ut=ot&&ot.targetChanges.get(Q.targetId),Z=ot&&ot.targetMismatches.get(Q.targetId)!=null,ht=Q.view.applyChanges(J,tt.isPrimaryClient,ut,Z);return Dv(tt,Q.targetId,ht.Ya),ht.snapshot}(r,C,D,j);const c=await vv(r.localStore,t,!0),d=new cI(t,c.Ns),g=d.Ga(c.documents),p=xl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(g,r.isPrimaryClient,p);Dv(r,n,y.Ya);const E=new hI(t,n,d);return r.ru.set(t,E),r.iu.has(n)?r.iu.get(n).push(t):r.iu.set(n,[t]),y.snapshot}async function yI(r,t,n){const s=wt(r),l=s.ru.get(t),c=s.iu.get(l.targetId);if(c.length>1)return s.iu.set(l.targetId,c.filter(d=>!Jc(d,t))),void s.ru.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Kd(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Dm(s.remoteStore,l.targetId),$d(s,l.targetId)}).catch(Ya)):($d(s,l.targetId),await Kd(s.localStore,l.targetId,!0))}async function _I(r,t){const n=wt(r),s=n.ru.get(t),l=n.iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Dm(n.remoteStore,s.targetId))}async function vI(r,t,n){const s=RI(r);try{const l=await function(d,g){const p=wt(d),y=Re.now(),E=g.reduce((j,F)=>j.add(F.key),Pt());let C,D;return p.persistence.runTransaction("Locally write mutations","readwrite",j=>{let F=Gi(),tt=Pt();return p.Cs.getEntries(j,E).next(Q=>{F=Q,F.forEach((st,ot)=>{ot.isValidDocument()||(tt=tt.add(st))})}).next(()=>p.localDocuments.getOverlayedDocuments(j,F)).next(Q=>{C=Q;const st=[];for(const ot of g){const J=MR(ot,C.get(ot.key).overlayedDocument);J!=null&&st.push(new xs(ot.key,J,X0(J.value.mapValue),Bi.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,st,g)}).next(Q=>{D=Q;const st=Q.applyToLocalDocumentSet(C,tt);return p.documentOverlayCache.saveOverlays(j,Q.batchId,st)})}).then(()=>({batchId:D.batchId,changes:sT(C)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,p){let y=d.uu[d.currentUser.toKey()];y||(y=new ae(Dt)),y=y.insert(g,p),d.uu[d.currentUser.toKey()]=y}(s,l.batchId,n),await Ul(s,l.changes),await sh(s.remoteStore)}catch(l){const c=xm(l,"Failed to persist write");n.reject(c)}}async function BT(r,t){const n=wt(r);try{const s=await DC(n.localStore,t);t.targetChanges.forEach((l,c)=>{const d=n._u.get(c);d&&(Ft(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.tu=!0:l.modifiedDocuments.size>0?Ft(d.tu,14607):l.removedDocuments.size>0&&(Ft(d.tu,42227),d.tu=!1))}),await Ul(n,s,t)}catch(s){await Ya(s)}}function Iv(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.ru.forEach((c,d)=>{const g=d.view.ga(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const p=wt(d);p.onlineState=g;let y=!1;p.queries.forEach((E,C)=>{for(const D of C.Ra)D.ga(g)&&(y=!0)}),y&&Pm(p)}(s.eventManager,t),l.length&&s.nu.Q_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function TI(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s._u.get(t),c=l&&l.key;if(c){let d=new ae(yt.comparator);d=d.insert(c,Xe.newNoDocument(c,bt.min()));const g=Pt().add(c),p=new nh(bt.min(),new Map,new ae(Dt),d,g);await BT(s,p),s.ou=s.ou.remove(c),s._u.delete(t),Lm(s)}else await Kd(s.localStore,t,!1).then(()=>$d(s,t,n)).catch(Ya)}async function EI(r,t){const n=wt(r),s=t.batch.batchId;try{const l=await IC(n.localStore,t);qT(n,s,null),jT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ul(n,l)}catch(l){await Ya(l)}}async function AI(r,t,n){const s=wt(r);try{const l=await function(d,g){const p=wt(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,g).next(C=>(Ft(C!==null,37113),E=C.keys(),p.mutationQueue.removeMutationBatch(y,C))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(s.localStore,t);qT(s,t,n),jT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Ul(s,l)}catch(l){await Ya(l)}}function jT(r,t){(r.cu.get(t)||[]).forEach(n=>{n.resolve()}),r.cu.delete(t)}function qT(r,t,n){const s=wt(r);let l=s.uu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.uu[s.currentUser.toKey()]=l}}function $d(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.iu.get(t))r.ru.delete(s),n&&r.nu.Tu(s,n);r.iu.delete(t),r.isPrimaryClient&&r.au.Ur(t).forEach(s=>{r.au.containsKey(s)||HT(r,s)})}function HT(r,t){r.su.delete(t.path.canonicalString());const n=r.ou.get(t);n!==null&&(Dm(r.remoteStore,n),r.ou=r.ou.remove(t),r._u.delete(n),Lm(r))}function Dv(r,t,n){for(const s of n)s instanceof LT?(r.au.addReference(s.key,t),SI(r,s)):s instanceof kT?(at(Um,"Document no longer in limbo: "+s.key),r.au.removeReference(s.key,t),r.au.containsKey(s.key)||HT(r,s.key)):At(19791,{Iu:s})}function SI(r,t){const n=t.key,s=n.path.canonicalString();r.ou.get(n)||r.su.has(s)||(at(Um,"New document in limbo: "+n),r.su.add(s),Lm(r))}function Lm(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const t=r.su.values().next().value;r.su.delete(t);const n=new yt(ce.fromString(t)),s=r.lu.next();r._u.set(s,new fI(n)),r.ou=r.ou.insert(n,s),NT(r.remoteStore,new br(ai(Tm(n.path)),s,"TargetPurposeLimboResolution",Yc.le))}}async function Ul(r,t,n){const s=wt(r),l=[],c=[],d=[];s.ru.isEmpty()||(s.ru.forEach((g,p)=>{d.push(s.Pu(p,t,n).then(y=>{var E;if((y||n)&&s.isPrimaryClient){const C=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,C?"current":"not-current")}if(y){l.push(y);const C=Cm.Ps(p.targetId,y);c.push(C)}}))}),await Promise.all(d),s.nu.Q_(l),await async function(p,y){const E=wt(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>X.forEach(y,D=>X.forEach(D.ls,j=>E.persistence.referenceDelegate.addReference(C,D.targetId,j)).next(()=>X.forEach(D.hs,j=>E.persistence.referenceDelegate.removeReference(C,D.targetId,j)))))}catch(C){if(!Xa(C))throw C;at(Im,"Failed to update sequence numbers: "+C)}for(const C of y){const D=C.targetId;if(!C.fromCache){const j=E.Ss.get(D),F=j.snapshotVersion,tt=j.withLastLimboFreeSnapshotVersion(F);E.Ss=E.Ss.insert(D,tt)}}}(s.localStore,c))}async function bI(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){at(Um,"User change. New user:",t.toKey());const s=await CT(n.localStore,t);n.currentUser=t,function(c,d){c.cu.forEach(g=>{g.forEach(p=>{p.reject(new pt(W.CANCELLED,d))})}),c.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ul(n,s.Ms)}}function wI(r,t){const n=wt(r),s=n._u.get(t);if(s&&s.tu)return Pt().add(s.key);{let l=Pt();const c=n.iu.get(t);if(!c)return l;for(const d of c){const g=n.ru.get(d);l=l.unionWith(g.view.Wa)}return l}}function GT(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=BT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TI.bind(null,t),t.nu.Q_=oI.bind(null,t.eventManager),t.nu.Tu=lI.bind(null,t.eventManager),t}function RI(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=EI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AI.bind(null,t),t}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ih(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),await this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)}mu(t,n){return null}fu(t,n){return null}Vu(t){return CC(this.persistence,new bC,t.initialUser,this.serializer)}Ru(t){return new RT(Rm.Ei,this.serializer)}Au(t){return new xC}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class CI extends jc{constructor(t){super(),this.cacheSizeBytes=t}mu(t,n){Ft(this.persistence.referenceDelegate instanceof zc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new uC(s,t.asyncQueue,n)}Ru(t){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new RT(s=>zc.Ei(s,n),this.serializer)}}class Zd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Iv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bI.bind(null,this.syncEngine),await nI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rI}()}createDatastore(t){const n=ih(t.databaseInfo.databaseId),s=function(c){return new zC(c)}(t.databaseInfo);return function(c,d,g,p){return new HC(c,d,g,p)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,l,c,d,g){return new FC(s,l,c,d,g)}(this.localStore,this.datastore,t.asyncQueue,n=>Iv(this.syncEngine,n,0),function(){return Av.C()?new Av:new PC}())}createSyncEngine(t,n){return function(l,c,d,g,p,y,E){const C=new dI(l,c,d,g,p,y);return E&&(C.hu=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(l){const c=wt(l);at(Os,"RemoteStore shutting down."),c.aa.add(5),await Pl(c),c.ca.shutdown(),c.la.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zd.provider={build:()=>new Zd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.pu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.pu(this.observer.error,t):Hi("Uncaught Error in snapshot listener:",t.toString()))}yu(){this.muted=!0}pu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="FirestoreClient";class DI{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Ye.UNAUTHENTICATED,this.clientId=z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{at(Pr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(at(Pr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=xm(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Rd(r,t){r.asyncQueue.verifyOperationInProgress(),at(Pr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await CT(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function Ov(r,t){r.asyncQueue.verifyOperationInProgress();const n=await OI(r);at(Pr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>bv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>bv(t.remoteStore,l)),r._onlineComponents=t}async function OI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(Pr,"Using user provided OfflineComponentProvider");try{await Rd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(l){return l.name==="FirebaseError"?l.code===W.FAILED_PRECONDITION||l.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),await Rd(r,new jc)}}else at(Pr,"Using default OfflineComponentProvider"),await Rd(r,new CI(void 0));return r._offlineComponents}async function FT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(Pr,"Using user provided OnlineComponentProvider"),await Ov(r,r._uninitializedComponentsProvider._online)):(at(Pr,"Using default OnlineComponentProvider"),await Ov(r,new Zd))),r._onlineComponents}function NI(r){return FT(r).then(t=>t.syncEngine)}async function MI(r){const t=await FT(r),n=t.eventManager;return n.onListen=mI.bind(null,t.syncEngine),n.onUnlisten=yI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_I.bind(null,t.syncEngine),n}function VI(r,t,n={}){const s=new Dr;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,y){const E=new II({next:D=>{E.yu(),d.enqueueAndForget(()=>aI(c,C));const j=D.docs.has(g);!j&&D.fromCache?y.reject(new pt(W.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&D.fromCache&&p&&p.source==="server"?y.reject(new pt(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(D)},error:D=>y.reject(D)}),C=new uI(Tm(g.path),E,{includeMetadataChanges:!0,Fa:!0});return sI(c,C)}(await MI(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(r,t,n){if(!n)throw new pt(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function PI(r,t,n,s){if(t===!0&&s===!0)throw new pt(W.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Mv(r){if(!yt.isDocumentKey(r))throw new pt(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function km(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":At(12329,{type:typeof r})}function wl(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new pt(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=km(r);throw new pt(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="firestore.googleapis.com",Vv=!0;class xv{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new pt(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KT,this.ssl=Vv}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Vv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=wT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<oC)throw new pt(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QT((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pt(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pt(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pt(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zm{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Lw;switch(s.type){case"firstParty":return new jw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pt(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Gc("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Nv.get(n);s&&(at("ComponentProvider","Removing Datastore"),Nv.delete(n),s.terminate())}(this),Promise.resolve()}}function UI(r,t,n,s={}){var l;r=wl(r,zm);const c=Cl(t),d=r._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),p=`${t}:${n}`;d.host!==KT&&d.host!==p&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:p,ssl:c,emulatorOptions:s});if(!Rs(y,g)&&(r._setSettings(y),c&&(Kv(`https://${p}`),Gc("Firestore",!0)),s.mockUserToken)){let E,C;if(typeof s.mockUserToken=="string")E=s.mockUserToken,C=Ye.MOCK_USER;else{E=oS(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new pt(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Ye(D)}r._authCredentials=new kw(new L0(E,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Bm(this.firestore,t,this._query)}}class Dn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Dn(this.firestore,t,this._key)}}class Rl extends Bm{constructor(t,n,s){super(t,n,Tm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Dn(this.firestore,null,new yt(t))}withConverter(t){return new Rl(this.firestore,t,this._path)}}function YT(r,t,...n){if(r=On(r),arguments.length===1&&(t=z0.newId()),xI("doc","path",t),r instanceof zm){const s=ce.fromString(t,...n);return Mv(s),new Dn(r,null,new yt(s))}{if(!(r instanceof Dn||r instanceof Rl))throw new pt(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ce.fromString(t,...n));return Mv(s),new Dn(r.firestore,r instanceof Rl?r.converter:null,new yt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="AsyncQueue";class Uv{constructor(t=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new DT(this,"async_queue_retry"),this.ju=()=>{const s=wd();s&&at(Pv,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=t;const n=wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ju(),this.Yu(t)}enterRestrictedMode(t){if(!this.$u){this.$u=!0,this.Gu=t||!1;const n=wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(t){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Dr;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qu.push(t),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(t){if(!Xa(t))throw t;at(Pv,"Operation failed with retryable error: "+t)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(t){const n=this.Hu.then(()=>(this.Wu=!0,t().catch(s=>{throw this.Ku=s,this.Wu=!1,Hi("INTERNAL UNHANDLED ERROR: ",Lv(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=n,n}enqueueAfterDelay(t,n,s){this.Ju(),this.zu.indexOf(t)>-1&&(n=0);const l=Vm.createAndSchedule(this,t,n,s,c=>this.Xu(c));return this.Uu.push(l),l}Ju(){this.Ku&&At(47125,{ec:Lv(this.Ku)})}verifyOperationInProgress(){}async tc(){let t;do t=this.Hu,await t;while(t!==this.Hu)}nc(t){for(const n of this.Uu)if(n.timerId===t)return!0;return!1}rc(t){return this.tc().then(()=>{this.Uu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.tc()})}sc(t){this.zu.push(t)}Xu(t){const n=this.Uu.indexOf(t);this.Uu.splice(n,1)}}function Lv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class jm extends zm{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new Uv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Uv(t),this._firestoreClient=void 0,await t}}}function LI(r,t){const n=typeof r=="object"?r:Zv(),s=typeof r=="string"?r:Mc,l=nm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=sS("firestore");c&&UI(l,...c)}return l}function XT(r){if(r._terminated)throw new pt(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||kI(r),r._firestoreClient}function kI(r){var t,n,s;const l=r._freezeSettings(),c=function(g,p,y,E){return new nR(g,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,QT(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new DI(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ga(qe.fromBase64String(t))}catch(n){throw new pt(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ga(qe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new pt(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new pt(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new pt(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Dt(this._lat,t._lat)||Dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=/^__.*__$/;class BI{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new xs(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(t,this.data,n,this.fieldTransforms)}}function ZT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{oc:r})}}class Fm{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this._c(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(t){return new Fm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.ac({path:s,cc:!1});return l.lc(t),l}hc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.ac({path:s,cc:!1});return l._c(),l}Pc(t){return this.ac({path:void 0,cc:!0})}Tc(t){return qc(t,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let t=0;t<this.path.length;t++)this.lc(this.path.get(t))}lc(t){if(t.length===0)throw this.Tc("Document fields must not be empty");if(ZT(this.oc)&&zI.test(t))throw this.Tc('Document fields cannot begin and end with "__"')}}class jI{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||ih(t)}dc(t,n,s,l=!1){return new Fm({oc:t,methodName:n,Ec:s,path:je.emptyPath(),cc:!1,Ic:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qI(r){const t=r._freezeSettings(),n=ih(r._databaseId);return new jI(r._databaseId,!!t.ignoreUndefinedProperties,n)}function HI(r,t,n,s,l,c={}){const d=r.dc(c.merge||c.mergeFields?2:0,t,n,l);eE("Data must be an object, but it was:",d,s);const g=WT(s,d);let p,y;if(c.merge)p=new Bn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const E=[];for(const C of c.mergeFields){const D=GI(t,C,n);if(!d.contains(D))throw new pt(W.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);QI(E,D)||E.push(D)}p=new Bn(E),y=d.fieldTransforms.filter(C=>p.covers(C.field))}else p=null,y=d.fieldTransforms;return new BI(new In(g),p,y)}function JT(r,t){if(tE(r=On(r)))return eE("Unsupported field value:",t,r),WT(r,t);if(r instanceof $T)return function(s,l){if(!ZT(l.oc))throw l.Tc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Tc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.cc&&t.oc!==4)throw t.Tc("Nested arrays are not supported");return function(s,l){const c=[];let d=0;for(const g of s){let p=JT(g,l.Pc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(r,t)}return function(s,l){if((s=On(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return RR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Re.fromDate(s);return{timestampValue:kc(l.serializer,c)}}if(s instanceof Re){const c=new Re(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kc(l.serializer,c)}}if(s instanceof Hm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ga)return{bytesValue:_T(l.serializer,s._byteString)};if(s instanceof Dn){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Tc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Gm)return function(d,g){return{mapValue:{fields:{[K0]:{stringValue:Y0},[Vc]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw g.Tc("VectorValues must only contain numeric values.");return Em(g.serializer,y)})}}}}}}(s,l);throw l.Tc(`Unsupported field value: ${km(s)}`)}(r,t)}function WT(r,t){const n={};return j0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ms(r,(s,l)=>{const c=JT(l,t.uc(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function tE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Re||r instanceof Hm||r instanceof Ga||r instanceof Dn||r instanceof $T||r instanceof Gm)}function eE(r,t,n){if(!tE(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=km(n);throw s==="an object"?t.Tc(r+" a custom object"):t.Tc(r+" "+s)}}function GI(r,t,n){if((t=On(t))instanceof qm)return t._internalPath;if(typeof t=="string")return nE(r,t);throw qc("Field path arguments must be of type string or ",r,!1,void 0,n)}const FI=new RegExp("[~\\*/\\[\\]]");function nE(r,t,n){if(t.search(FI)>=0)throw qc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new qm(...t.split("."))._internalPath}catch{throw qc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function qc(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${l}`),p+=")"),new pt(W.INVALID_ARGUMENT,g+r+p)}function QI(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new KI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(rE("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KI extends iE{data(){return super.data()}}function rE(r,t){return typeof t=="string"?nE(r,t):t instanceof qm?t._internalPath:t._delegate._internalPath}class YI{convertValue(t,n="none"){switch(Vr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw At(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Ms(t,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(t){var n,s,l;const c=(l=(s=(n=t.fields)===null||n===void 0?void 0:n[Vc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(d=>me(d.doubleValue));return new Gm(c)}convertGeoPoint(t){return new Hm(me(t.latitude),me(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=$c(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Tl(t));default:return null}}convertTimestamp(t){const n=Nr(t);return new Re(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ce.fromString(t);Ft(bT(s),9688,{name:t});const l=new El(s.get(1),s.get(3)),c=new yt(s.popFirst(5));return l.isEqual(n)||Hi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sE extends iE{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ZI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(rE("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ZI extends sE{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r){r=wl(r,Dn);const t=wl(r.firestore,jm);return VI(XT(t),r._key).then(n=>n2(t,r,n))}class WI extends YI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ga(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function t2(r,t,n){r=wl(r,Dn);const s=wl(r.firestore,jm),l=XI(r.converter,t,n);return e2(s,[HI(qI(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Bi.none())])}function e2(r,t){return function(s,l){const c=new Dr;return s.asyncQueue.enqueueAndForget(async()=>vI(await NI(s),l,c)),c.promise}(XT(r),t)}function n2(r,t,n){const s=n.docs.get(t._key),l=new WI(r);return new sE(r,l,t._key,s,new $I(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(l){Ka=l})(Fa),Ua(new Cs("firestore",(s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new jm(new zw(s.getProvider("auth-internal")),new qw(d,s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pt(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(y.options.projectId,E)}(d,l),d);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Cr(H_,G_,t),Cr(H_,G_,"esm2017")})();const i2={apiKey:"AIzaSyDdys6xkXRUIkb_Q4jYzOfutDgrqc-6H28",authDomain:"math-crow.firebaseapp.com",projectId:"math-crow",storageBucket:"math-crow.firebasestorage.app",messagingSenderId:"372664559387",appId:"1:372664559387:web:4f9b9b09342fc9392555be",measurementId:"G-MZBJMBBLPS"},aE=$v(i2),Cd=Pw(aE),oE=LI(aE),r2=new Li,ah=async(r,t)=>{if(!r)return;const n=YT(oE,"users",r.uid);try{await t2(n,t==null?void 0:t.toFireStore(),{merge:!0})}catch(s){console.error("Error saving user data:",s),alert("Failed to save data.")}},oh=$A((r,t)=>{ah(r,t)},5e3),lE=Tt.createContext(void 0),Lr=()=>{const r=Tt.useContext(lE);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r};function s2(){const{setFactors:r,factors:t}=Ur(),{user:n}=Lr(),{incrementStreak:s}=Wd(),{userData:l,setUserData:c}=Ns(),d=Tt.useMemo(()=>t.numGridCorrect===t.productGridList.length,[t.numGridCorrect]),g=Tt.useMemo(()=>t.factor2.toString().length>1,[t.product]),p=Tt.useMemo(()=>t.product.toString().length,[t.product]),y=Tt.useMemo(()=>t.numSumCorrect==t.productList.length,[t.numSumCorrect]),E=Tt.useMemo(()=>y||d&&!g,[y,d,g]),C=Tt.useRef([]),[D,j]=Tt.useState(()=>Array.from({length:p},()=>""));Tt.useEffect(()=>{d&&!g&&l.settings.speedMode&&Q()},[d]),Tt.useEffect(()=>{j(Array.from({length:p},()=>""))},[t.resetCounter,p]),Tt.useEffect(()=>{l.settings.speedMode&&Q()},[y]),Tt.useEffect(()=>{const J=ut=>{ut.key==="Enter"&&E&&Q()};return window.addEventListener("keydown",J),()=>{window.removeEventListener("keydown",J)}},[E]);const F=J=>p-1-J<t.numSumCorrect,tt=(J,ut)=>{let Z="";J.target.value!==""&&(Z=Number(J.target.value));const ht=[...D];ht[ut]=Z,(Z===""||Z<10)&&j(ht),Z===t.productList[ut]&&(J.target.value="",s(),t.correctSum(),r(t.clone()))},Q=()=>{l.correctAnswer(t.factor1-1,t.factor2-1),oh(n,l),c(l.clone()),l.settings.autoMode?t.autoNext(l.historyGrid):t.next(),r(t.clone())},st=J=>{const ut=t.productList.length-t.numSumCorrect-1;return J!==ut};function ot(J,ut,Z,ht,O){if(!ht||!O)return!1;const S=ut-Z-1;return J===S}return ct.jsx("div",{className:` mt-2 border-t-6 border-[rgb(20,128,223)] h-auto flex flex-row gap-2 justify-end ${!d||!g?"invisible":""}`,children:D.map((J,ut)=>ct.jsx("input",{className:`mt-2 product-grid-cell ${st(ut)?F(ut)?"bg-green-200":"bg-gray-400":""}`,type:"number",value:D[ut],readOnly:st(ut),ref:Z=>{C.current[ut]=Z,Z&&ot(ut,p,t.numSumCorrect,d,g)&&Z.focus()},onChange:Z=>tt(Z,ut)},ut))})}function a2(){const{factors:r}=Ur(),t=n=>{if(r.numGridCorrect===r.productGridList.length)return!1;const s=r.factor1.toString().length,l=s-n-1,c=r.product.toString().length,d=Math.floor(r.numGridCorrect/c),g=Math.min(r.numGridCorrect%c-d,s-1);return l===g};return ct.jsx("div",{className:" text-[10vh] font-bold text-[rgb(20,128,223)]",children:r.factor1.toString().split("").map((n,s)=>ct.jsx("span",{className:`${t(s)?"text-[#bb2020]":""}`,children:n},s))})}function o2(){const{factors:r}=Ur(),t=n=>{const s=r.product.toString().length,l=Math.floor(r.numGridCorrect/s);return r.factor2.toString().length-n-1===l};return ct.jsxs("div",{className:"  border-b-6 border-[rgb(20,128,223)] text-[10vh] font-bold text-[rgb(20,128,223)]",children:["X",r.factor2.toString().split("").map((n,s)=>ct.jsx("span",{className:`${t(s)?"text-[#bb2020]":""}`,children:n},s))]})}function l2(){return ct.jsxs("div",{className:"  leading-none m-auto flex flex-col items-end w-fit h-fit",children:[ct.jsx(KA,{}),ct.jsx(a2,{}),ct.jsx(o2,{}),ct.jsx(QA,{}),ct.jsx(s2,{})]})}class Qm{constructor(){Ve(this,"index");Ve(this,"factor1");Ve(this,"factor2");Ve(this,"product");Ve(this,"productList",[]);Ve(this,"factorsOrder");Ve(this,"productGridList",[]);Ve(this,"numGridCorrect",0);Ve(this,"numCarryCorrect",0);Ve(this,"numSumCorrect",0);Ve(this,"carryList",[]);Ve(this,"resetCounter",0);this.index=0,this.factorsOrder=[],this.factorsOrder=[9,1,2,3,4,5,6,7,8,10,11,12],this.factorsOrder=this.shuffleArray(this.factorsOrder),this.factor1=12,this.factor2=this.factorsOrder[this.index],this.product=this.factor1*this.factor2,this.productList=this.initProductList(this.product),[this.productGridList,this.carryList]=this.initAnswers()}initProductList(t){const n=[];for(let s=0;s<this.product.toString().length;s++)n.push(parseInt(t.toString()[s]));return n}initAnswers(){const t=[],n=[],s=this.factor1.toString(),l=this.factor2.toString();let c=0;const d=this.product.toString().length;let g=0;for(let p=l.length-1;p>=0;p--){g=0;for(let E=0;E<c;E++)t.push(0),g++;let y=0;for(let E=s.length-1;E>=0;E--){const C=parseInt(s[E]),D=parseInt(l[p]);let j=C*D+y;if(y=Math.floor(j/10),j=j%10,t.push(j),g++,y>0){const F={value:y,place:d-g-1,order:t.length-1};n.push(F)}}for(y>0&&(t.push(y),g++),g;g<d;g++)t.push(0);c++}return[t,n]}next(){this.index<10?(this.index+=1,this.factor2=this.factorsOrder[this.index],this.product=this.factor1*this.factor2,this.productList=this.initProductList(this.product),[this.productGridList,this.carryList]=this.initAnswers(),this.numGridCorrect=0,this.numCarryCorrect=0,this.numSumCorrect=0,this.resetCounter++):(this.index=0,this.factorsOrder=this.shuffleArray(this.factorsOrder),this.factor2=this.factorsOrder[this.index],this.product=this.factor1*this.factor2,this.productList=this.initProductList(this.product),[this.productGridList,this.carryList]=this.initAnswers(),this.numGridCorrect=0,this.numCarryCorrect=0,this.numSumCorrect=0,this.resetCounter++)}autoNext(t){let n=Number.MAX_SAFE_INTEGER,s=[];for(let c=0;c<t.length;c++)for(let d=0;d<t[c].length;d++){const g=t[c][d];g<n?(n=g,s=[[c,d]]):g===n&&s.push([c,d])}const l=Math.floor(Math.random()*s.length);this.factor1=s[l][0]+1,this.factor2=s[l][1]+1,this.product=this.factor1*this.factor2,this.productList=this.initProductList(this.product),[this.productGridList,this.carryList]=this.initAnswers(),this.numGridCorrect=0,this.numCarryCorrect=0,this.numSumCorrect=0,this.resetCounter++}correctGrid(){this.numGridCorrect+=1}correctCarry(){this.numCarryCorrect+=1}correctSum(){this.numSumCorrect+=1}nextCarry(){if(this.carryList[this.numCarryCorrect]!==void 0)return this.carryList[this.numCarryCorrect]}clone(){const t=new Qm;return t.index=this.index,t.factorsOrder=this.factorsOrder,t.factor1=this.factor1,t.factor2=this.factor2,t.product=this.product,t.productList=this.productList,t.numGridCorrect=this.numGridCorrect,t.numCarryCorrect=this.numCarryCorrect,t.numSumCorrect=this.numSumCorrect,t.productGridList=this.productGridList,t.carryList=this.carryList,t.resetCounter=this.resetCounter,t}setLevel(t){this.factor1=t,this.index=12,this.next()}setFactors(t,n){this.factor1=t,this.factor2=n,this.product=this.factor1*this.factor2,this.productList=this.initProductList(this.product),[this.productGridList,this.carryList]=this.initAnswers(),this.numGridCorrect=0,this.numCarryCorrect=0,this.numSumCorrect=0,this.resetCounter++}shuffleArray(t){const n=[...t];for(let s=n.length-1;s>0;s--){const l=Math.floor(Math.random()*(s+1));[n[s],n[l]]=[n[l],n[s]]}return n}}function u2({children:r}){const[t,n]=Tt.useState(new Qm);return ct.jsx(kv.Provider,{value:{factors:t,setFactors:n},children:r})}const c2="/MathCrow/assets/orch-hit-1-CsffWDYV.mp3",h2=Object.freeze(Object.defineProperty({__proto__:null,default:c2},Symbol.toStringTag,{value:"Module"})),f2="/MathCrow/assets/orch-hit-10-ux3tHloy.mp3",d2=Object.freeze(Object.defineProperty({__proto__:null,default:f2},Symbol.toStringTag,{value:"Module"})),m2="/MathCrow/assets/orch-hit-11-CONLuYIA.mp3",g2=Object.freeze(Object.defineProperty({__proto__:null,default:m2},Symbol.toStringTag,{value:"Module"})),p2="/MathCrow/assets/orch-hit-12-CxAX3g2A.mp3",y2=Object.freeze(Object.defineProperty({__proto__:null,default:p2},Symbol.toStringTag,{value:"Module"})),_2="/MathCrow/assets/orch-hit-2-CUKZb2-K.mp3",v2=Object.freeze(Object.defineProperty({__proto__:null,default:_2},Symbol.toStringTag,{value:"Module"})),T2="/MathCrow/assets/orch-hit-3-Ps1Pdv85.mp3",E2=Object.freeze(Object.defineProperty({__proto__:null,default:T2},Symbol.toStringTag,{value:"Module"})),A2="/MathCrow/assets/orch-hit-4-CBoR7lba.mp3",S2=Object.freeze(Object.defineProperty({__proto__:null,default:A2},Symbol.toStringTag,{value:"Module"})),b2="/MathCrow/assets/orch-hit-5-Cc8k6qBw.mp3",w2=Object.freeze(Object.defineProperty({__proto__:null,default:b2},Symbol.toStringTag,{value:"Module"})),R2="/MathCrow/assets/orch-hit-6-B27W21CZ.mp3",C2=Object.freeze(Object.defineProperty({__proto__:null,default:R2},Symbol.toStringTag,{value:"Module"})),I2="/MathCrow/assets/orch-hit-7-DH3w1fY6.mp3",D2=Object.freeze(Object.defineProperty({__proto__:null,default:I2},Symbol.toStringTag,{value:"Module"})),O2="/MathCrow/assets/orch-hit-8-aacTRlPQ.mp3",N2=Object.freeze(Object.defineProperty({__proto__:null,default:O2},Symbol.toStringTag,{value:"Module"})),M2="/MathCrow/assets/orch-hit-9-DsvL1Ygm.mp3",V2=Object.freeze(Object.defineProperty({__proto__:null,default:M2},Symbol.toStringTag,{value:"Module"})),x2=Object.assign({"/src/assets/sounds/orch-hit-1.mp3":h2,"/src/assets/sounds/orch-hit-10.mp3":d2,"/src/assets/sounds/orch-hit-11.mp3":g2,"/src/assets/sounds/orch-hit-12.mp3":y2,"/src/assets/sounds/orch-hit-2.mp3":v2,"/src/assets/sounds/orch-hit-3.mp3":E2,"/src/assets/sounds/orch-hit-4.mp3":S2,"/src/assets/sounds/orch-hit-5.mp3":w2,"/src/assets/sounds/orch-hit-6.mp3":C2,"/src/assets/sounds/orch-hit-7.mp3":D2,"/src/assets/sounds/orch-hit-8.mp3":N2,"/src/assets/sounds/orch-hit-9.mp3":V2}),P2=Object.entries(x2).sort(([r],[t])=>{var l,c;const n=parseInt(((l=r.match(/(\d+)\.mp3$/))==null?void 0:l[1])||"0"),s=parseInt(((c=t.match(/(\d+)\.mp3$/))==null?void 0:c[1])||"0");return n-s}).map(([,r])=>r.default);class U2{constructor(){Ve(this,"audios",[]);this.audios=P2.map(t=>{const n=new Audio(t);return n.load(),n})}playSound(t){let n=0;t>11?n=11:n=t,this.audios[n].volume=.1,this.audios[n].currentTime=0,this.audios[n].play()}}function L2({children:r}){const[t]=Tt.useState(new U2),[n,s]=Tt.useState(0),l=Tt.useRef(null),c=()=>{s(d=>d+1),t.playSound(n),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{s(0)},5e3)};return ct.jsx(zv.Provider,{value:{incrementStreak:c},children:r})}const k2=({children:r})=>{const[t,n]=Tt.useState(null),[s,l]=Tt.useState(!0);Tt.useEffect(()=>Sb(Cd,p=>{n(p),l(!1)}),[]);const c=async()=>{try{await Gb(Cd,r2)}catch(g){console.error("Login failed:",g)}},d=async()=>{await bb(Cd)};return ct.jsx(lE.Provider,{value:{user:t,loading:s,loginWithGoogle:c,logout:d},children:r})};function z2(){const r=[1,2,3,4,5,6,7,8,9,10,11,12],[t,n]=Tt.useState(0),{setFactors:s,factors:l}=Ur(),{userData:c,setUserData:d}=Ns(),{user:g}=Lr();Tt.useEffect(()=>{n(l.factor1)},[l.factor1]);const p=y=>{c.settings.autoMode&&(c.autoModeToggle(),oh(g,c),d(c.clone())),n(Number(y.target.value)),l.setLevel(Number(y.target.value)),s(l.clone())};return ct.jsxs("div",{className:"flex flex-col",children:[ct.jsx("div",{className:"text-[5vh]",children:"Selector"}),r.map(y=>{var E;return ct.jsxs("label",{className:"flex items-center mb-2",children:[ct.jsx("input",{type:"radio",name:"options",className:"h-[3vh] w-[3vh] accent-[rgb(20,128,223)] mr-2 cursor-pointer",value:y,checked:!(((E=c.settings)==null?void 0:E.autoMode)??!1)&&t===y,onChange:p}),ct.jsx("div",{className:"text-[3vh]",children:y})]},y)})]})}function B2(){const{loginWithGoogle:r,user:t}=Lr(),n=Tt.useMemo(()=>t!=null,[t]);return ct.jsx("button",{disabled:n,onClick:r,className:"p-2 bg-blue-600 text-white rounded",children:n?`Welcome ${t==null?void 0:t.displayName}`:"Login With Google"})}function j2(){const{logout:r,user:t}=Lr(),n=Tt.useMemo(()=>t!=null,[t]),{userData:s}=Ns(),l=()=>{ah(t,s),r()};return ct.jsx("button",{onClick:l,className:`p-2 bg-blue-600 text-white rounded ${n?"":"hidden"}`,children:"Log out"})}function q2(){const{user:r}=Lr(),t=Tt.useMemo(()=>r!=null,[r]),{userData:n}=Ns(),s=async()=>{ah(r,n)};return ct.jsx("button",{onClick:s,className:`p-2 bg-blue-600 text-white rounded ${t?"":"hidden"}`,children:"Save"})}function H2(){const r=[0,255,128],{userData:t}=Ns(),{setFactors:n,factors:s}=Ur(),l=g=>{const p=[200,200,200],y=t.maxCorrect;let E=0;y!==0&&(E=g/t.maxCorrect);const C=E*r[0]+(1-E)*p[0],D=E*r[1]+(1-E)*p[1],j=E*r[2]+(1-E)*p[2];return[C,D,j]},c=(g,p,y)=>y>1?`You've answered "${g}x${p}" ${y} times.`:y==1?`You've answered "${g}x${p}" ${y} time.`:`You've never answered "${g}x${p}."`,d=(g,p)=>{s.setFactors(g,p),n(s.clone())};return ct.jsxs("div",{className:" mr-auto h-fit w-fit flex flex-col items-center",children:[t.historyGrid.map((g,p)=>ct.jsx("div",{className:" h-auto flex flex-row",children:g.map((y,E)=>ct.jsx("button",{className:"scoreboard-cell",style:{backgroundColor:`rgb(${l(y).join(",")})`},title:c(p+1,E+1,g[p]),onClick:()=>d(p+1,E+1)},`${p}-${E}`))},p)),ct.jsx("div",{className:"text-[3vh] font-bold items-center",children:t.numCorrect})]})}function G2(){var p;const{factors:r,setFactors:t}=Ur(),{user:n}=Lr(),{userData:s,setUserData:l}=Ns(),[c,d]=Tt.useState(1),g=()=>{s.settings.autoMode?(r.setLevel(c),t(r.clone())):(d(r.factor1),r.autoNext(s.historyGrid),t(r.clone())),s.autoModeToggle(),oh(n,s),l(s.clone())};return ct.jsxs("div",{children:[ct.jsx("h1",{className:" font-bold text-[2vh]",children:"Auto Mode"}),ct.jsx("input",{type:"checkbox",name:"AutoModeToggle",className:"h-[3vh] w-[3vh] accent-[rgb(20,128,223)] mr-2 cursor-pointer rounded",checked:((p=s.settings)==null?void 0:p.autoMode)??!1,onChange:g})]})}function F2(){var l;const{userData:r,setUserData:t}=Ns(),{user:n}=Lr(),s=()=>{r.speedModeToggle(),oh(n,r),t(r.clone())};return ct.jsxs("div",{children:[ct.jsx("h1",{className:" font-bold text-[2vh]",children:"Speed Mode"}),ct.jsx("input",{type:"checkbox",name:"AutoModeToggle",className:"h-[3vh] w-[3vh] accent-[rgb(20,128,223)] mr-2 cursor-pointer rounded",checked:((l=r.settings)==null?void 0:l.speedMode)??!1,onChange:s})]})}function Q2(){const[r,t]=Tt.useState(!0),n=()=>{t(!r)};return ct.jsxs("div",{className:`fixed top-0 left-0 h-full bg-[#2c3e50] text-[#ecf0f1] overflow-x-hidden transition-all duration-300 p-4 ${r?"w-[200px]":"w-[50px]"}`,children:[ct.jsx("button",{className:"bg-none border-none text-inherit text-2xl cursor-pointer outline-none mb-4",onClick:n,children:r?"<":">"}),r&&ct.jsx("nav",{children:ct.jsx("ul",{className:"list-none p-0",children:ct.jsxs("li",{className:"my-4",children:[ct.jsx(B2,{}),ct.jsx(j2,{}),ct.jsx(q2,{}),ct.jsx(G2,{}),ct.jsx(F2,{}),ct.jsx(z2,{}),ct.jsx(H2,{})]})})})]})}class bs{constructor(){Ve(this,"historyGrid");Ve(this,"numCorrect");Ve(this,"maxCorrect");Ve(this,"settings");this.historyGrid=Array.from({length:12},()=>Array.from({length:12},()=>0)),this.numCorrect=0,this.maxCorrect=0,this.settings={autoMode:!1,speedMode:!1}}toFireStore(){return{historyGrid:this.historyGrid.flat(),numCorrect:this.numCorrect,maxCorrect:this.maxCorrect,settings:{autoMode:this.settings.autoMode,speedMode:this.settings.speedMode}}}correctAnswer(t,n){this.historyGrid[t][n]+=1,this.numCorrect+=1,this.historyGrid[t][n]>this.maxCorrect&&(this.maxCorrect=this.historyGrid[t][n])}autoModeToggle(){this.settings.autoMode=!this.settings.autoMode}speedModeToggle(){this.settings.speedMode=!this.settings.speedMode}clone(){const t=new bs;return t.historyGrid=this.historyGrid,t.numCorrect=this.numCorrect,t.maxCorrect=this.maxCorrect,t.settings=this.settings,t}static fromFireStore(t){let n=new bs;const s=[],l=t.historyGrid;for(let d=0;d<12;d++)s.push(l.slice(d*12,(d+1)*12));n.historyGrid=s,n.numCorrect=t.numCorrect,n.maxCorrect=t.maxCorrect;let c={autoMode:t.settings.autoMode,speedMode:t.settings.speedMode};return n.settings=c,n}}const K2=({children:r})=>{const{user:t}=Lr(),[n,s]=Tt.useState(new bs),l=async()=>{s(new bs);let c=!1;if(!t)return;const d=YT(oE,"users",t.uid);try{const g=await JI(d);if(g.exists()){c=!0;const p=g.data();s(bs.fromFireStore(p))}}catch(g){console.error("Failed to fetch user data:",g)}c||ah(t,new bs)};return Tt.useEffect(()=>{l()},[t==null?void 0:t.uid]),ct.jsx(Bv.Provider,{value:{userData:n,setUserData:s},children:r})},Y2=()=>ct.jsx(k2,{children:ct.jsx(K2,{children:ct.jsx(L2,{children:ct.jsxs(u2,{children:[ct.jsx(l2,{}),ct.jsx(Q2,{})]})})})});FA.createRoot(document.getElementById("root")).render(ct.jsx(Tt.StrictMode,{children:ct.jsx(Y2,{})}));
